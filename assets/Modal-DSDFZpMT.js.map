{"version":3,"file":"Modal-DSDFZpMT.js","sources":["../../src/shared/components/ui/Modal.tsx"],"sourcesContent":["/**\n * Modal Component\n * Accessible modal dialog with backdrop\n */\n\nimport type { ReactNode } from 'react';\nimport { useEffect, useId, useRef } from 'react';\n\nimport { AnimatePresence, motion } from 'framer-motion';\n\nimport { cn } from '@/shared/utils/helpers';\n\n/**\n * Props for the Modal component.\n */\nexport interface ModalProps {\n  /** If true, the modal is visible. */\n  isOpen: boolean;\n  /** Callback function to close the modal. */\n  onClose: () => void;\n  /** Title of the modal. */\n  title?: string;\n  /** Content of the modal. */\n  children: ReactNode;\n  /** Size of the modal. Defaults to 'md'. */\n  size?: 'sm' | 'md' | 'lg' | 'xl' | '2xl' | '3xl';\n  /** If true, clicking the backdrop closes the modal. Defaults to true. */\n  closeOnBackdrop?: boolean;\n  /** If true, removes default padding from the content area. */\n  noPadding?: boolean;\n  /** Optional class name for the modal container. */\n  className?: string;\n}\n\n/**\n * Accessible modal dialog with backdrop, focus trapping, and keyboard navigation.\n */\nexport function Modal({\n  isOpen,\n  onClose,\n  title,\n  children,\n  size = 'md',\n  closeOnBackdrop = true,\n  noPadding = false,\n  className = '',\n}: ModalProps) {\n  const titleId = useId();\n  const modalRef = useRef<HTMLDivElement>(null);\n  const previousFocusRef = useRef<HTMLElement | null>(null);\n\n  // Store previous focus\n  useEffect(() => {\n    if (isOpen) {\n      previousFocusRef.current = document.activeElement as HTMLElement;\n    } else if (previousFocusRef.current) {\n      previousFocusRef.current.focus();\n      previousFocusRef.current = null;\n    }\n  }, [isOpen]);\n\n  // Focus trap\n  useEffect(() => {\n    if (!isOpen) return;\n\n    const modalElement = modalRef.current;\n    if (!modalElement) return;\n\n    // Find all focusable elements\n    const focusableElements = modalElement.querySelectorAll(\n      'button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])'\n    );\n\n    const firstElement = focusableElements[0] as HTMLElement;\n    const lastElement = focusableElements.item(focusableElements.length - 1) as HTMLElement;\n\n    // Focus first element\n    if (firstElement) {\n      // Use requestAnimationFrame to ensure DOM is ready and animation started\n      requestAnimationFrame(() => firstElement.focus());\n    }\n\n    const handleTabKey = (event: KeyboardEvent) => {\n      if (event.key === 'Tab') {\n        if (event.shiftKey) {\n          if (document.activeElement === firstElement) {\n            event.preventDefault();\n            lastElement?.focus();\n          }\n        } else {\n          if (document.activeElement === lastElement) {\n            event.preventDefault();\n            firstElement?.focus();\n          }\n        }\n      }\n    };\n\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (event.key === 'Escape') {\n        onClose();\n      } else {\n        handleTabKey(event);\n      }\n    };\n\n    document.addEventListener('keydown', handleKeyDown);\n    return () => document.removeEventListener('keydown', handleKeyDown);\n  }, [isOpen, onClose]);\n\n  // Prevent body scroll when modal is open\n  useEffect(() => {\n    document.body.style.overflow = isOpen ? 'hidden' : 'unset';\n    return () => {\n      document.body.style.overflow = 'unset';\n    };\n  }, [isOpen]);\n\n  const sizeStyles = {\n    sm: 'max-w-md',\n    md: 'max-w-lg',\n    lg: 'max-w-2xl',\n    xl: 'max-w-4xl',\n    '2xl': 'max-w-2xl',\n    '3xl': 'max-w-3xl',\n  };\n\n  return (\n    <AnimatePresence>\n      {isOpen && (\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4\">\n          {/* Backdrop */}\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n            onClick={closeOnBackdrop ? onClose : undefined}\n            className=\"absolute inset-0 bg-black/60 backdrop-blur-sm\"\n            aria-hidden=\"true\"\n          />\n\n          {/* Modal */}\n          <motion.div\n            ref={modalRef}\n            role=\"dialog\"\n            aria-modal=\"true\"\n            aria-labelledby={title ? titleId : undefined}\n            initial={{ opacity: 0, scale: 0.95, y: 20 }}\n            animate={{ opacity: 1, scale: 1, y: 0 }}\n            exit={{ opacity: 0, scale: 0.95, y: 20 }}\n            className={cn(\n              'relative flex max-h-[90vh] w-full flex-col overflow-hidden rounded-2xl bg-white shadow-2xl',\n              sizeStyles[size],\n              className\n            )}\n            onClick={(event) => event.stopPropagation()}\n          >\n            {/* Header */}\n            {title && (\n              <div className=\"flex flex-shrink-0 items-center justify-between border-b border-gray-200 p-6\">\n                <h2 id={titleId} className=\"text-2xl font-bold text-wiria-blue-dark\">\n                  {title}\n                </h2>\n                <button\n                  onClick={onClose}\n                  className=\"rounded-full p-1 text-gray-400 transition-colors hover:bg-gray-100 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-wiria-blue-dark\"\n                  aria-label=\"Close modal\"\n                >\n                  <svg className=\"h-6 w-6\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                    <path\n                      fillRule=\"evenodd\"\n                      d=\"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z\"\n                      clipRule=\"evenodd\"\n                    />\n                  </svg>\n                </button>\n              </div>\n            )}\n\n            {/* Content */}\n            <div className={cn('flex-1 overflow-y-auto', !noPadding && 'p-6')}>{children}</div>\n          </motion.div>\n        </div>\n      )}\n    </AnimatePresence>\n  );\n}\n"],"names":["Modal","isOpen","onClose","title","children","size","closeOnBackdrop","noPadding","className","titleId","useId","modalRef","useRef","previousFocusRef","useEffect","modalElement","focusableElements","firstElement","lastElement","handleTabKey","event","handleKeyDown","sizeStyles","AnimatePresence","jsxs","jsx","motion","cn"],"mappings":"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"}