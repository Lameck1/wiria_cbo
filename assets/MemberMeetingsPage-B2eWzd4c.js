import{j as e}from"./query-vendor-DD8i-cqI.js";import{r as i}from"./react-vendor-CPrm261X.js";import{u as M,P as m}from"./useMemberData-LtED3klN.js";import{C as b,a as h}from"./Card-CLvaiLoe.js";import{B as g}from"./Button-D2GqkZ6f.js";import{S as P}from"./Spinner-B04oNdVo.js";import{n as l}from"./index-ByeBMh7d.js";import"./animation-vendor-DKvKsx_2.js";function G(){const{meetings:a,availableMeetings:n,isLoading:u,fetchMeetings:d,fetchAvailableMeetings:c,rsvpToMeeting:y,cancelRsvp:j}=M(),[t,o]=i.useState("my-meetings"),[x,r]=i.useState(null);i.useEffect(()=>{d(),c()},[d,c]);const v=async s=>{r(s);try{await y(s),l.success("Successfully RSVP'd to meeting!")}catch{l.error("Failed to RSVP. Please try again.")}finally{r(null)}},f=async s=>{r(s);try{await j(s),l.success("RSVP cancelled")}catch{l.error("Failed to cancel RSVP. Please try again.")}finally{r(null)}},N=({meeting:s,showRsvpButton:w=!0})=>e.jsx("div",{className:"bg-white rounded-xl shadow-md p-6 border border-gray-100 hover:shadow-lg transition-shadow",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("span",{className:`text-xs font-bold uppercase px-2 py-1 rounded ${s.type==="AGM"?"bg-purple-100 text-purple-800":s.type==="SPECIAL"?"bg-red-100 text-red-800":s.type==="TRAINING"?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"}`,children:s.type}),e.jsx("span",{className:`text-xs font-semibold px-2 py-1 rounded ${s.status==="UPCOMING"?"bg-blue-50 text-blue-700":s.status==="ONGOING"?"bg-green-50 text-green-700":s.status==="COMPLETED"?"bg-gray-50 text-gray-600":"bg-red-50 text-red-700"}`,children:s.status})]}),e.jsx("h3",{className:"text-lg font-bold text-wiria-blue-dark mb-2",children:s.title}),s.description&&e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:s.description}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{children:"ðŸ“…"}),e.jsx("span",{children:new Date(s.date).toLocaleDateString()})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{children:"â°"}),e.jsx("span",{children:s.time})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{children:"ðŸ“"}),e.jsx("span",{children:s.location})]}),s.attendeesCount!==void 0&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{children:"ðŸ‘¥"}),e.jsxs("span",{children:[s.attendeesCount," attending"]})]})]})]}),w&&s.status==="UPCOMING"&&e.jsx("div",{className:"flex-shrink-0",children:s.isRsvpd?e.jsx(g,{variant:"outline",size:"sm",onClick:()=>f(s.id),isLoading:x===s.id,children:"Cancel RSVP"}):e.jsx(g,{variant:"primary",size:"sm",onClick:()=>v(s.id),isLoading:x===s.id,children:"RSVP Now"})})]})}),p=t==="my-meetings"?a:n;return u&&a.length===0?e.jsx(m,{title:"Meetings & Events",children:e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx(P,{size:"lg"})})}):e.jsxs(m,{title:"Meetings & Events",subtitle:"View upcoming events, RSVP, and manage your schedule",children:[e.jsx(b,{className:"rounded-b-none border-b-0 mb-0",children:e.jsx(h,{className:"py-0 px-0",children:e.jsxs("div",{className:"flex border-b border-gray-200",children:[e.jsxs("button",{onClick:()=>o("my-meetings"),className:`pb-4 pt-4 px-6 border-b-2 font-bold text-sm transition-colors ${t==="my-meetings"?"border-wiria-blue-dark text-wiria-blue-dark":"border-transparent text-gray-500 hover:text-gray-700"}`,children:["My Meetings",a.length>0&&e.jsx("span",{className:`ml-2 text-xs py-0.5 px-2 rounded-full ${t==="my-meetings"?"bg-wiria-blue-dark text-white":"bg-gray-200 text-gray-700"}`,children:a.length})]}),e.jsxs("button",{onClick:()=>o("available-meetings"),className:`pb-4 pt-4 px-6 border-b-2 font-bold text-sm transition-colors ${t==="available-meetings"?"border-wiria-blue-dark text-wiria-blue-dark":"border-transparent text-gray-500 hover:text-gray-700"}`,children:["Available Meetings",n.length>0&&e.jsx("span",{className:`ml-2 text-xs py-0.5 px-2 rounded-full ${t==="available-meetings"?"bg-wiria-blue-dark text-white":"bg-gray-200 text-gray-700"}`,children:n.length})]})]})})}),e.jsx(b,{className:"rounded-t-none border-t-0",children:e.jsx(h,{className:"min-h-[400px]",children:p.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸ“…"}),e.jsx("p",{className:"text-gray-500",children:t==="my-meetings"?"You haven't RSVP'd to any meetings yet":"No available meetings at this time"})]}):e.jsx("div",{className:"space-y-4",children:p.map(s=>e.jsx(N,{meeting:s,showRsvpButton:t==="available-meetings"},s.id))})})})]})}export{G as default};
//# sourceMappingURL=MemberMeetingsPage-B2eWzd4c.js.map
