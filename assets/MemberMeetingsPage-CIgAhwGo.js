import{j as e}from"./query-vendor-frBnvHSF.js";import{r as l}from"./react-vendor-BdaLayic.js";import{B as j}from"./Button-K8iFFe9S.js";import{u as P,P as v}from"./useMemberData-P6dvgI-k.js";import{C as f,a as N}from"./Card-DmlQfAyP.js";import{S as R}from"./Spinner-DvzCBoUM.js";import{n as x}from"./index-ICA0O2oL.js";import"./helpers-Brneqz2V.js";import"./endpoints-Cofiu-EW.js";import"./animation-vendor-CrU7SSpu.js";const k=t=>{switch(t){case"AGM":return"bg-purple-100 text-purple-800";case"SPECIAL":return"bg-red-100 text-red-800";case"TRAINING":return"bg-green-100 text-green-800";default:return"bg-blue-100 text-blue-800"}},E=t=>{switch(t){case"UPCOMING":return"bg-blue-50 text-blue-700";case"ONGOING":return"bg-green-50 text-green-700";case"COMPLETED":return"bg-gray-50 text-gray-600";default:return"bg-red-50 text-red-700"}},A=l.memo(function({meeting:s,showRsvpButton:p=!0,loadingMeetingId:i,onRsvp:c,onCancelRsvp:d}){return e.jsx("div",{className:"rounded-xl border border-gray-100 bg-white p-6 shadow-md transition-shadow hover:shadow-lg",children:e.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-start md:justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"mb-2 flex items-center gap-3",children:[e.jsx("span",{className:`rounded px-2 py-1 text-xs font-bold uppercase ${k(s.type)}`,children:s.type}),e.jsx("span",{className:`rounded px-2 py-1 text-xs font-semibold ${E(s.status)}`,children:s.status})]}),e.jsx("h3",{className:"mb-2 text-lg font-bold text-wiria-blue-dark",children:s.title}),s.description&&e.jsx("p",{className:"mb-3 text-sm text-gray-600",children:s.description}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{children:"ðŸ“…"}),e.jsx("span",{children:new Date(s.date).toLocaleDateString()})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{children:"â°"}),e.jsx("span",{children:s.time})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{children:"ðŸ“"}),e.jsx("span",{children:s.location})]}),s.attendeesCount!==void 0&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{children:"ðŸ‘¥"}),e.jsxs("span",{children:[s.attendeesCount,s.capacity?` / ${s.capacity}`:""," attending"]})]})]})]}),p&&s.status==="UPCOMING"&&e.jsx("div",{className:"flex-shrink-0",children:s.isRsvpd?e.jsx(j,{variant:"outline",size:"sm",onClick:()=>d(s.id),isLoading:i===s.id,children:"Cancel RSVP"}):e.jsx(j,{variant:s.capacity&&(s.attendeesCount??0)>=s.capacity?"outline":"primary",size:"sm",onClick:()=>c(s.id),isLoading:i===s.id,disabled:s.capacity?(s.attendeesCount??0)>=s.capacity:!1,children:s.capacity&&(s.attendeesCount??0)>=s.capacity?"Fully Booked":"RSVP Now"})})]})})}),n="my-meetings",h="available-meetings";function z(){const{meetings:t,availableMeetings:s,isLoading:p,fetchMeetings:i,fetchAvailableMeetings:c,rsvpToMeeting:d,cancelRsvp:b}=P(),[r,m]=l.useState(n),[M,o]=l.useState(null);l.useEffect(()=>{i(),c()},[i,c]);const w=l.useCallback(async a=>{o(a);try{await d(a),x.success("Successfully RSVP'd to meeting!")}catch{x.error("Failed to RSVP. Please try again.")}finally{o(null)}},[d]),C=l.useCallback(async a=>{o(a);try{await b(a),x.success("RSVP cancelled")}catch{x.error("Failed to cancel RSVP. Please try again.")}finally{o(null)}},[b]),S=r===n?"You haven't RSVP'd to any meetings yet":"No available meetings at this time",y="border-b-2 px-6 pb-4 pt-4 text-sm font-bold transition-colors",g=r===n?t:s;return p&&t.length===0?e.jsx(v,{title:"Meetings & Events",children:e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx(R,{size:"lg"})})}):e.jsxs(v,{title:"Meetings & Events",subtitle:"View upcoming events, RSVP, and manage your schedule",children:[e.jsx(f,{className:"mb-0 rounded-b-none border-b-0",children:e.jsx(N,{className:"px-0 py-0",children:e.jsxs("div",{className:"flex border-b border-gray-200",children:[e.jsxs("button",{onClick:()=>{m(n)},className:`${y} ${r===n?"border-wiria-blue-dark text-wiria-blue-dark":"border-transparent text-gray-500 hover:text-gray-700"}`,children:["My Meetings",t.length>0&&e.jsx("span",{className:`ml-2 rounded-full px-2 py-0.5 text-xs ${r===n?"bg-wiria-blue-dark text-white":"bg-gray-200 text-gray-700"}`,children:t.length})]}),e.jsxs("button",{onClick:()=>{m(h)},className:`${y} ${r===h?"border-wiria-blue-dark text-wiria-blue-dark":"border-transparent text-gray-500 hover:text-gray-700"}`,children:["Available Meetings",s.length>0&&e.jsx("span",{className:`ml-2 rounded-full px-2 py-0.5 text-xs ${r===h?"bg-wiria-blue-dark text-white":"bg-gray-200 text-gray-700"}`,children:s.length})]})]})})}),e.jsx(f,{className:"rounded-t-none border-t-0",children:e.jsx(N,{className:"min-h-[400px]",children:g.length===0?e.jsxs("div",{className:"py-12 text-center",children:[e.jsx("div",{className:"mb-4 text-6xl",children:"ðŸ“…"}),e.jsx("p",{className:"text-gray-500",children:S})]}):e.jsx("div",{className:"space-y-4",children:g.map(a=>e.jsx(A,{meeting:a,showRsvpButton:r==="available-meetings",loadingMeetingId:M,onRsvp:u=>{w(u)},onCancelRsvp:u=>{C(u)}},a.id))})})})]})}export{z as default};
//# sourceMappingURL=MemberMeetingsPage-CIgAhwGo.js.map
