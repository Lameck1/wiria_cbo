{"version":3,"file":"MemberProfilePage-KtP4uPrL.js","sources":["../../src/pages/MemberProfilePage.tsx"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport { PortalLayout } from '@/features/membership/components/PortalLayout';\nimport { useMemberData } from '@/features/membership/hooks/useMemberData';\nimport { Button } from '@/shared/components/ui/Button';\nimport { FormField } from '@/shared/components/ui/form';\nimport { Spinner } from '@/shared/components/ui/Spinner';\nimport { notificationService } from '@/shared/services/notification/notificationService';\nimport { Card, CardBody } from '@/shared/components/ui/Card';\nimport { useForm, FormProvider, Controller } from 'react-hook-form';\nimport { zodResolver } from '@hookform/resolvers/zod';\nimport { profileSchema, ProfileFormSchema } from '@/features/membership/validation';\n\nfunction MemberProfilePage() {\n  const { profile, isLoading, fetchProfile, updateProfile } = useMemberData();\n  const [isEditing, setIsEditing] = useState(false);\n  const [isSaving, setIsSaving] = useState(false);\n\n  const methods = useForm<ProfileFormSchema>({\n    resolver: zodResolver(profileSchema),\n  });\n\n  const { reset, handleSubmit } = methods;\n\n  useEffect(() => {\n    fetchProfile();\n  }, [fetchProfile]);\n\n  useEffect(() => {\n    if (profile) {\n      reset({\n        firstName: profile.firstName,\n        lastName: profile.lastName,\n        phone: profile.phone,\n        occupation: profile.occupation,\n        address: profile.address,\n        county: profile.county,\n        subcounty: profile.subcounty,\n        ward: profile.ward,\n        interests: profile.interests,\n        skills: profile.skills,\n      });\n    }\n  }, [profile, reset]);\n\n  const onSubmit = async (data: ProfileFormSchema) => {\n    setIsSaving(true);\n    try {\n      await updateProfile(data);\n      notificationService.success('Profile updated successfully');\n      setIsEditing(false);\n    } catch {\n      notificationService.error('Failed to update profile');\n    } finally {\n      setIsSaving(false);\n    }\n  };\n\n  if (isLoading && !profile) {\n    return (\n      <PortalLayout title=\"Member Profile\">\n        <div className=\"flex items-center justify-center py-20\">\n          <Spinner size=\"lg\" />\n        </div>\n      </PortalLayout>\n    );\n  }\n\n  const ProfileField = ({ label, value }: { label: string; value?: string | string[] }) => (\n    <div className=\"rounded-xl bg-gray-50/50 p-4 border border-gray-100/50\">\n      <p className=\"mb-1 text-xs font-bold uppercase tracking-wider text-gray-500\">{label}</p>\n      <p className=\"text-lg font-semibold text-gray-800\">\n        {Array.isArray(value) ? value.join(', ') : value || '--'}\n      </p>\n    </div>\n  );\n\n  return (\n    <PortalLayout title=\"Member Profile\" subtitle=\"View and manage your profile information\">\n      <div className=\"max-w-4xl\">\n        <Card className=\"border-none shadow-xl overflow-hidden\">\n          {/* Decorative border top */}\n          <div className=\"h-2 w-full bg-gradient-to-r from-wiria-blue-dark via-wiria-yellow to-wiria-green-light\" />\n\n          <CardBody className=\"p-8\">\n            <FormProvider {...methods}>\n              {/* View Mode */}\n              {!isEditing && (\n                <div id=\"profile-view\">\n                  <div className=\"mb-8 flex items-center justify-between\">\n                    <div>\n                      <h2 className=\"text-2xl font-bold text-wiria-blue-dark\">Profile Information</h2>\n                      <p className=\"text-sm text-gray-500\">Your personal and contact details</p>\n                    </div>\n                    <Button onClick={() => setIsEditing(true)} variant=\"outline\">\n                      Edit Profile\n                    </Button>\n                  </div>\n\n                  <div className=\"grid grid-cols-1 gap-6 md:grid-cols-2\">\n                    <ProfileField\n                      label=\"Full Name\"\n                      value={`${profile?.firstName} ${profile?.lastName}`}\n                    />\n                    <ProfileField label=\"Email Address\" value={profile?.email} />\n                    <ProfileField label=\"Phone Number\" value={profile?.phone} />\n                    <ProfileField label=\"National ID\" value={profile?.nationalId} />\n                    <ProfileField label=\"Occupation\" value={profile?.occupation} />\n                    <ProfileField label=\"Address\" value={profile?.address} />\n                    <ProfileField label=\"County\" value={profile?.county} />\n                    <ProfileField label=\"Sub-County\" value={profile?.subcounty} />\n                    <ProfileField label=\"Ward\" value={profile?.ward} />\n                    <div className=\"md:col-span-2\">\n                      <ProfileField label=\"Interests\" value={profile?.interests} />\n                    </div>\n                    <div className=\"md:col-span-2\">\n                      <ProfileField label=\"Skills\" value={profile?.skills} />\n                    </div>\n                  </div>\n                </div>\n              )}\n\n              {/* Edit Mode */}\n              {isEditing && (\n                <form onSubmit={handleSubmit(onSubmit)} className=\"space-y-8\">\n                  <div className=\"mb-8\">\n                    <h2 className=\"text-2xl font-bold text-wiria-blue-dark\">Edit Member Profile</h2>\n                    <p className=\"text-sm text-gray-500\">Keep your information up to date</p>\n                  </div>\n\n                  <div className=\"grid grid-cols-1 gap-6 md:grid-cols-2\">\n                    <FormField\n                      label=\"First Name\"\n                      name=\"firstName\"\n                      required\n                    />\n                    <FormField\n                      label=\"Last Name\"\n                      name=\"lastName\"\n                      required\n                    />\n                    <FormField\n                      label=\"Phone\"\n                      name=\"phone\"\n                      type=\"tel\"\n                      placeholder=\"e.g. 0712345678\"\n                    />\n                    <FormField\n                      label=\"Occupation\"\n                      name=\"occupation\"\n                    />\n                    <div className=\"md:col-span-2\">\n                      <FormField\n                        label=\"Address\"\n                        name=\"address\"\n                      />\n                    </div>\n                    <FormField\n                      label=\"County\"\n                      name=\"county\"\n                    />\n                    <FormField\n                      label=\"Sub-County\"\n                      name=\"subcounty\"\n                    />\n                    <FormField\n                      label=\"Ward\"\n                      name=\"ward\"\n                    />\n                    <div className=\"md:col-span-2\">\n                      <div className=\"space-y-1.5\">\n                        <label className=\"text-sm font-semibold text-wiria-blue-dark\">Interests</label>\n                        <Controller\n                          name=\"interests\"\n                          render={({ field }) => (\n                            <input\n                              {...field}\n                              value={Array.isArray(field.value) ? field.value.join(', ') : ''}\n                              onChange={(e) => field.onChange(e.target.value.split(',').map((s) => s.trim()))}\n                              className=\"block w-full rounded-lg border border-gray-300 bg-white p-3 text-wiria-blue-dark focus:border-wiria-blue-dark focus:ring-1 focus:ring-wiria-blue-dark outline-none transition-all\"\n                            />\n                          )}\n                        />\n                        <p className=\"text-xs text-gray-400\">Comma separated list of interests</p>\n                      </div>\n                    </div>\n                    <div className=\"md:col-span-2\">\n                      <div className=\"space-y-1.5\">\n                        <label className=\"text-sm font-semibold text-wiria-blue-dark\">Skills</label>\n                        <Controller\n                          name=\"skills\"\n                          render={({ field }) => (\n                            <input\n                              {...field}\n                              value={Array.isArray(field.value) ? field.value.join(', ') : ''}\n                              onChange={(e) => field.onChange(e.target.value.split(',').map((s) => s.trim()))}\n                              className=\"block w-full rounded-lg border border-gray-300 bg-white p-3 text-wiria-blue-dark focus:border-wiria-blue-dark focus:ring-1 focus:ring-wiria-blue-dark outline-none transition-all\"\n                            />\n                          )}\n                        />\n                        <p className=\"text-xs text-gray-400\">Comma separated list of skills</p>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div className=\"flex gap-4 pt-4 border-t\">\n                    <Button type=\"submit\" className=\"flex-1 h-12\" isLoading={isSaving}>\n                      Save Changes\n                    </Button>\n                    <Button\n                      type=\"button\"\n                      className=\"flex-1 h-12\"\n                      variant=\"outline\"\n                      onClick={() => setIsEditing(false)}\n                      disabled={isSaving}\n                    >\n                      Cancel\n                    </Button>\n                  </div>\n                </form>\n              )}\n            </FormProvider>\n          </CardBody>\n        </Card>\n      </div>\n    </PortalLayout>\n  );\n}\n\nexport default MemberProfilePage;\n"],"names":["MemberProfilePage","profile","isLoading","fetchProfile","updateProfile","useMemberData","isEditing","setIsEditing","useState","isSaving","setIsSaving","methods","useForm","zodResolver","profileSchema","reset","handleSubmit","useEffect","onSubmit","data","notificationService","jsx","PortalLayout","Spinner","ProfileField","label","value","jsxs","Card","CardBody","FormProvider","Button","FormField","Controller","field","e","s"],"mappings":"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"}