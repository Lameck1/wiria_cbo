{"version":3,"file":"useAdminData-B_72029o.js","sources":["../../src/shared/hooks/useAdminData.ts"],"sourcesContent":["import { useMutation, useQuery, useQueryClient, type QueryKey } from '@tanstack/react-query';\n\nimport { extractArray } from '@/shared/utils/apiUtils';\n\n/**\n * Generic hook for fetching admin data with standardized extraction\n */\nexport function useAdminData<T>(\n  queryKey: QueryKey,\n  fetchFunction: () => Promise<unknown>,\n  options: {\n    arrayKey?: string;\n    staleTime?: number;\n    enabled?: boolean;\n  } = {}\n) {\n  const { data, ...rest } = useQuery({\n    queryKey,\n    queryFn: async () => {\n      const response = await fetchFunction();\n      return extractArray<T>(response, options.arrayKey);\n    },\n    staleTime: options.staleTime ?? 1000 * 60 * 5, // 5 minutes default\n    enabled: options.enabled,\n  });\n\n  return {\n    items: data ?? [],\n    ...rest,\n  };\n}\n\n/**\n * Generic hook for admin CRUD operations with automatic cache invalidation\n */\nexport function useAdminAction<TInput, TResponse>(\n  actionFunction: (input: TInput) => Promise<TResponse>,\n  queriesToInvalidate: string[][],\n  options: {\n    onSuccess?: (data: TResponse) => void;\n    onError?: (error: unknown) => void;\n  } = {}\n) {\n  const queryClient = useQueryClient();\n\n  return useMutation({\n    mutationFn: actionFunction,\n    onSuccess: (data) => {\n      queriesToInvalidate.forEach((key) => {\n        void queryClient.invalidateQueries({ queryKey: key });\n      });\n\n      options.onSuccess?.(data);\n    },\n    onError: (error) => {\n      options.onError?.(error);\n    },\n  });\n}\n"],"names":["useAdminData","queryKey","fetchFunction","options","data","rest","useQuery","response","extractArray","useAdminAction","actionFunction","queriesToInvalidate","queryClient","useQueryClient","useMutation","key","_a","error"],"mappings":"wGAOO,SAASA,EACdC,EACAC,EACAC,EAII,CAAA,EACJ,CACA,KAAM,CAAE,KAAAC,EAAM,GAAGC,CAAA,EAASC,EAAS,CACjC,SAAAL,EACA,QAAS,SAAY,CACnB,MAAMM,EAAW,MAAML,EAAA,EACvB,OAAOM,EAAgBD,EAAUJ,EAAQ,QAAQ,CACnD,EACA,UAAWA,EAAQ,WAAa,IAChC,QAASA,EAAQ,OAAA,CAClB,EAED,MAAO,CACL,MAAOC,GAAQ,CAAA,EACf,GAAGC,CAAA,CAEP,CAKO,SAASI,EACdC,EACAC,EACAR,EAGI,CAAA,EACJ,CACA,MAAMS,EAAcC,EAAA,EAEpB,OAAOC,EAAY,CACjB,WAAYJ,EACZ,UAAYN,GAAS,OACnBO,EAAoB,QAASI,GAAQ,CAC9BH,EAAY,kBAAkB,CAAE,SAAUG,EAAK,CACtD,CAAC,GAEDC,EAAAb,EAAQ,YAAR,MAAAa,EAAA,KAAAb,EAAoBC,EACtB,EACA,QAAUa,GAAU,QAClBD,EAAAb,EAAQ,UAAR,MAAAa,EAAA,KAAAb,EAAkBc,EACpB,CAAA,CACD,CACH"}