import{b as i,s as d,S as h}from"./index-ICA0O2oL.js";const A=async()=>i.get("/resources"),F=async e=>i.post("/resources",e),S=async(e,r)=>i.patch(`/resources/${e}`,r),P=async e=>i.delete(`/resources/${e}`);function m(e){if(e.size>10485760){const s=(e.size/1048576).toFixed(2);throw new Error(`File size exceeds 10MB limit. Your file is ${s}MB. Please choose a smaller file.`)}}function g(){const e=d.get(h.AUTH_TOKEN);if(!e)throw new Error("Authentication required. Please log in to upload files.");return e}function p(e,r){const s=new FormData;return s.append("file",e),s.append("folder",r),s}function w(){const e="http://localhost:5001/api";return`${e.length>0?e:"http://localhost:5001/api"}/uploads`}async function y(e){var s,a,n;const r=await e.json().catch(()=>null);return e.status===413||(a=(s=r==null?void 0:r.error)==null?void 0:s.message)!=null&&a.includes("too large")?"File is too large. Maximum size is 10MB. Please compress your file or choose a smaller one.":e.status===401?"Authentication failed. Please log in again.":e.status===403?"You do not have permission to upload files.":((n=r==null?void 0:r.error)==null?void 0:n.message)??`Upload failed (${e.status}). Please try again.`}function E(e){var r;return e.name==="TypeError"&&(((r=e.message)==null?void 0:r.includes("fetch"))??!1)}const k=async(e,r="resources")=>{var c,l,u;m(e);const s=g(),a=p(e,r),n=w();try{const t=await fetch(n,{method:"POST",headers:{Authorization:`Bearer ${s}`},body:a});if(!t.ok){const f=await y(t);throw new Error(f)}return{data:await t.json()}}catch(t){const o=t;throw(((c=o.message)==null?void 0:c.includes("10MB"))??!1)||(((l=o.message)==null?void 0:l.includes("Authentication"))??!1)||(((u=o.message)==null?void 0:u.includes("permission"))??!1)?t:E(o)?new Error("Network error. Please check your connection and try again."):new Error(o.message??"File upload failed. Please try again.")}};export{S as a,F as c,P as d,A as g,k as u};
//# sourceMappingURL=resources.api-2-mmWAeK.js.map
