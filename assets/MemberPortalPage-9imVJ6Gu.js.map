{"version":3,"file":"MemberPortalPage-9imVJ6Gu.js","sources":["../../src/pages/MemberPortalPage.tsx"],"sourcesContent":["/**\n * Member Portal Page (Dashboard)\n * Main dashboard for logged-in members\n */\n\nimport { useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport { PortalLayout } from '@/features/membership/components/PortalLayout';\nimport { useMemberData } from '@/features/membership/hooks/useMemberData';\nimport { Card, CardBody, CardHeader } from '@/shared/components/ui/Card';\nimport { Button } from '@/shared/components/ui/Button';\nimport { Spinner } from '@/shared/components/ui/Spinner';\n\nfunction MemberPortalPage() {\n  const {\n    profile,\n    payments,\n    meetings,\n    activity,\n    isLoading,\n    totalPayments,\n    upcomingMeetings,\n    daysUntilExpiry,\n    isExpired,\n    isExpiringSoon,\n    fetchAll,\n  } = useMemberData();\n\n  useEffect(() => {\n    fetchAll();\n  }, [fetchAll]);\n\n  if (isLoading && !profile) {\n    return (\n      <PortalLayout title=\"Member Portal\" subtitle=\"Loading your dashboard...\">\n        <div className=\"flex items-center justify-center py-20\">\n          <Spinner size=\"lg\" />\n        </div>\n      </PortalLayout>\n    );\n  }\n\n  const statusColor = isExpired\n    ? 'border-red-200 bg-red-50'\n    : isExpiringSoon\n      ? 'border-yellow-200 bg-yellow-50'\n      : 'border-green-200 bg-green-50';\n\n  const statusText = isExpired\n    ? 'Expired'\n    : isExpiringSoon\n      ? 'Expiring Soon'\n      : profile?.status || 'Active';\n  const statusTextColor = isExpired\n    ? 'text-red-700'\n    : isExpiringSoon\n      ? 'text-yellow-700'\n      : 'text-green-700';\n\n  return (\n    <PortalLayout title=\"Welcome Back!\" subtitle=\"Here's what's happening with your membership\">\n      {/* Stats Cards */}\n      <div className=\"mb-8 grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-4\">\n        {/* Profile Card */}\n        <Card>\n          <CardBody>\n            <div className=\"mb-4 flex items-center gap-4\">\n              <div className=\"flex h-16 w-16 items-center justify-center rounded-full bg-wiria-blue-dark text-2xl font-bold text-white\">\n                {profile?.firstName?.[0]}\n                {profile?.lastName?.[0]}\n              </div>\n              <div>\n                <h2 className=\"text-xl font-bold text-wiria-blue-dark\">\n                  {profile?.firstName} {profile?.lastName}\n                </h2>\n                <p className=\"text-sm text-gray-500\">{profile?.email}</p>\n              </div>\n            </div>\n            <div className=\"space-y-2 text-sm\">\n              <div className=\"flex justify-between\">\n                <span className=\"text-gray-500\">Member ID:</span>\n                <span className=\"font-semibold text-gray-800\">{profile?.memberNumber || '--'}</span>\n              </div>\n              <div className=\"flex items-center justify-between\">\n                <span className=\"text-gray-500\">Status:</span>\n                <span\n                  className={`rounded px-2 py-0.5 text-xs font-bold uppercase ${statusTextColor} ${statusColor}`}\n                >\n                  {statusText}\n                </span>\n              </div>\n            </div>\n            <Link to=\"/member-profile\">\n              <Button className=\"mt-4 w-full\" variant=\"primary\">\n                View Profile\n              </Button>\n            </Link>\n          </CardBody>\n        </Card>\n\n        {/* Membership Status Card */}\n        <Card\n          className={`bg-gradient-to-br from-wiria-blue-dark to-blue-900 text-white ${isExpired ? 'ring-2 ring-red-500' : ''}`}\n        >\n          <CardBody>\n            <h3 className=\"mb-2 text-lg font-bold\">Membership</h3>\n            <p className=\"mb-4 text-sm text-blue-100\">\n              {isExpired\n                ? 'Your membership has expired'\n                : daysUntilExpiry !== null\n                  ? `Expires in ${daysUntilExpiry} days`\n                  : 'Checking status...'}\n            </p>\n            <div className=\"mb-4\">\n              <div className=\"mb-1 flex justify-between text-xs\">\n                <span>Joined</span>\n                <span>\n                  {profile?.joinedAt ? new Date(profile.joinedAt).toLocaleDateString() : '--'}\n                </span>\n              </div>\n            </div>\n            <Link to=\"/member-renewal\">\n              <Button className=\"w-full bg-wiria-yellow font-bold text-white shadow-lg transition-all hover:scale-105\">\n                Renew Membership\n              </Button>\n            </Link>\n          </CardBody>\n        </Card>\n\n        {/* Payments Summary */}\n        <Card>\n          <CardBody className=\"flex items-center justify-between\">\n            <div>\n              <p className=\"mb-1 text-sm text-gray-500\">Total Payments</p>\n              <p className=\"text-2xl font-bold text-wiria-blue-dark\">\n                KES {totalPayments.toLocaleString()}\n              </p>\n              <p className=\"text-xs text-gray-500\">{payments.length} transactions</p>\n            </div>\n            <div className=\"flex h-12 w-12 items-center justify-center rounded-xl bg-green-100 text-2xl text-green-600\">\n              ðŸ’³\n            </div>\n          </CardBody>\n        </Card>\n\n        {/* Meetings Count */}\n        <Card>\n          <CardBody className=\"flex items-center justify-between\">\n            <div>\n              <p className=\"mb-1 text-sm text-gray-500\">Upcoming Meetings</p>\n              <p className=\"text-2xl font-bold text-wiria-blue-dark\">{upcomingMeetings}</p>\n              <p className=\"text-xs text-gray-500\">This month</p>\n            </div>\n            <div className=\"flex h-12 w-12 items-center justify-center rounded-xl bg-blue-100 text-2xl text-blue-600\">\n              ðŸ“…\n            </div>\n          </CardBody>\n        </Card>\n      </div>\n\n      {/* Two Column Layout */}\n      <div className=\"grid grid-cols-1 gap-6 lg:grid-cols-2\">\n        {/* Upcoming Meetings */}\n        <Card>\n          <CardHeader>\n            <div className=\"flex items-center justify-between\">\n              <h3 className=\"text-xl font-bold text-wiria-blue-dark\">Upcoming Meetings</h3>\n              <Link\n                to=\"/member-meetings\"\n                className=\"text-sm text-wiria-blue-dark hover:text-wiria-yellow\"\n              >\n                View All â†’\n              </Link>\n            </div>\n          </CardHeader>\n          <CardBody>\n            <div className=\"space-y-3\">\n              {meetings.length === 0 ? (\n                <p className=\"text-sm italic text-gray-500\">No upcoming meetings</p>\n              ) : (\n                meetings.slice(0, 3).map((meeting) => (\n                  <div key={meeting.id} className=\"rounded-lg bg-gray-50 p-3\">\n                    <div className=\"flex items-start justify-between\">\n                      <div>\n                        <p className=\"font-semibold text-gray-800\">{meeting.title}</p>\n                        <p className=\"text-xs text-gray-500\">\n                          {new Date(meeting.date).toLocaleDateString()} at {meeting.time}\n                        </p>\n                      </div>\n                      <span className=\"rounded bg-blue-100 px-2 py-1 text-xs text-blue-800\">\n                        {meeting.type}\n                      </span>\n                    </div>\n                  </div>\n                ))\n              )}\n            </div>\n          </CardBody>\n        </Card>\n\n        {/* Recent Activity */}\n        <Card>\n          <CardHeader>\n            <h3 className=\"text-xl font-bold text-wiria-blue-dark\">Recent Activity</h3>\n          </CardHeader>\n          <CardBody>\n            <div className=\"space-y-3\">\n              {activity.length === 0 ? (\n                <p className=\"text-sm italic text-gray-500\">No recent activity</p>\n              ) : (\n                activity.slice(0, 5).map((item) => (\n                  <div key={item.id} className=\"flex items-start gap-3 text-sm\">\n                    <div className=\"mt-2 h-2 w-2 rounded-full bg-wiria-blue-dark\" />\n                    <div>\n                      <p className=\"text-gray-800\">{item.description}</p>\n                      <p className=\"text-xs text-gray-500\">\n                        {new Date(item.createdAt).toLocaleDateString()}\n                      </p>\n                    </div>\n                  </div>\n                ))\n              )}\n            </div>\n          </CardBody>\n        </Card>\n      </div>\n    </PortalLayout>\n  );\n}\n\nexport default MemberPortalPage;\n"],"names":["MemberPortalPage","profile","payments","meetings","activity","isLoading","totalPayments","upcomingMeetings","daysUntilExpiry","isExpired","isExpiringSoon","fetchAll","useMemberData","useEffect","jsx","PortalLayout","Spinner","statusColor","statusText","statusTextColor","jsxs","Card","CardBody","_a","_b","Link","Button","CardHeader","meeting","item"],"mappings":"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"}