{"version":3,"file":"MemberMeetingsPage-D5QBpcFX.js","sources":["../../src/pages/MemberMeetingsPage.tsx"],"sourcesContent":["/**\n * Member Meetings Page\n * View and RSVP to meetings\n */\n\nimport { useEffect, useState } from 'react';\nimport { PortalLayout } from '@/features/membership/components/PortalLayout';\nimport { useMemberData, Meeting } from '@/features/membership/hooks/useMemberData';\nimport { Card, CardBody } from '@/shared/components/ui/Card';\nimport { Button } from '@/shared/components/ui/Button';\nimport { Spinner } from '@/shared/components/ui/Spinner';\nimport { notificationService } from '@/shared/services/notification/notificationService';\n\ntype Tab = 'my-meetings' | 'available-meetings';\n\nfunction MemberMeetingsPage() {\n  const {\n    meetings,\n    availableMeetings,\n    isLoading,\n    fetchMeetings,\n    fetchAvailableMeetings,\n    rsvpToMeeting,\n    cancelRsvp,\n  } = useMemberData();\n\n  const [activeTab, setActiveTab] = useState<Tab>('my-meetings');\n  const [loadingMeetingId, setLoadingMeetingId] = useState<string | null>(null);\n\n  useEffect(() => {\n    fetchMeetings();\n    fetchAvailableMeetings();\n  }, [fetchMeetings, fetchAvailableMeetings]);\n\n  const handleRsvp = async (meetingId: string) => {\n    setLoadingMeetingId(meetingId);\n    try {\n      await rsvpToMeeting(meetingId);\n      notificationService.success(\"Successfully RSVP'd to meeting!\");\n    } catch {\n      notificationService.error('Failed to RSVP. Please try again.');\n    } finally {\n      setLoadingMeetingId(null);\n    }\n  };\n\n  const handleCancelRsvp = async (meetingId: string) => {\n    setLoadingMeetingId(meetingId);\n    try {\n      await cancelRsvp(meetingId);\n      notificationService.success('RSVP cancelled');\n    } catch {\n      notificationService.error('Failed to cancel RSVP. Please try again.');\n    } finally {\n      setLoadingMeetingId(null);\n    }\n  };\n\n  const MeetingCard = ({\n    meeting,\n    showRsvpButton = true,\n  }: {\n    meeting: Meeting;\n    showRsvpButton?: boolean;\n  }) => (\n    <div className=\"rounded-xl border border-gray-100 bg-white p-6 shadow-md transition-shadow hover:shadow-lg\">\n      <div className=\"flex flex-col gap-4 md:flex-row md:items-start md:justify-between\">\n        <div className=\"flex-1\">\n          <div className=\"mb-2 flex items-center gap-3\">\n            <span\n              className={`rounded px-2 py-1 text-xs font-bold uppercase ${meeting.type === 'AGM'\n                  ? 'bg-purple-100 text-purple-800'\n                  : meeting.type === 'SPECIAL'\n                    ? 'bg-red-100 text-red-800'\n                    : meeting.type === 'TRAINING'\n                      ? 'bg-green-100 text-green-800'\n                      : 'bg-blue-100 text-blue-800'\n                }`}\n            >\n              {meeting.type}\n            </span>\n            <span\n              className={`rounded px-2 py-1 text-xs font-semibold ${meeting.status === 'UPCOMING'\n                  ? 'bg-blue-50 text-blue-700'\n                  : meeting.status === 'ONGOING'\n                    ? 'bg-green-50 text-green-700'\n                    : meeting.status === 'COMPLETED'\n                      ? 'bg-gray-50 text-gray-600'\n                      : 'bg-red-50 text-red-700'\n                }`}\n            >\n              {meeting.status}\n            </span>\n          </div>\n          <h3 className=\"mb-2 text-lg font-bold text-wiria-blue-dark\">{meeting.title}</h3>\n          {meeting.description && (\n            <p className=\"mb-3 text-sm text-gray-600\">{meeting.description}</p>\n          )}\n          <div className=\"flex flex-wrap gap-4 text-sm text-gray-500\">\n            <div className=\"flex items-center gap-1\">\n              <span>üìÖ</span>\n              <span>{new Date(meeting.date).toLocaleDateString()}</span>\n            </div>\n            <div className=\"flex items-center gap-1\">\n              <span>‚è∞</span>\n              <span>{meeting.time}</span>\n            </div>\n            <div className=\"flex items-center gap-1\">\n              <span>üìç</span>\n              <span>{meeting.location}</span>\n            </div>\n            {meeting.attendeesCount !== undefined && (\n              <div className=\"flex items-center gap-1\">\n                <span>üë•</span>\n                <span>\n                  {meeting.attendeesCount}\n                  {meeting.capacity ? ` / ${meeting.capacity}` : ''} attending\n                </span>\n              </div>\n            )}\n          </div>\n        </div>\n        {showRsvpButton && meeting.status === 'UPCOMING' && (\n          <div className=\"flex-shrink-0\">\n            {meeting.isRsvpd ? (\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={() => handleCancelRsvp(meeting.id)}\n                isLoading={loadingMeetingId === meeting.id}\n              >\n                Cancel RSVP\n              </Button>\n            ) : (\n              <Button\n                variant={meeting.capacity && (meeting.attendeesCount || 0) >= meeting.capacity ? \"outline\" : \"primary\"}\n                size=\"sm\"\n                onClick={() => handleRsvp(meeting.id)}\n                isLoading={loadingMeetingId === meeting.id}\n                disabled={meeting.capacity ? (meeting.attendeesCount || 0) >= meeting.capacity : false}\n              >\n                {meeting.capacity && (meeting.attendeesCount || 0) >= meeting.capacity ? \"Fully Booked\" : \"RSVP Now\"}\n              </Button>\n            )}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n\n  const currentMeetings = activeTab === 'my-meetings' ? meetings : availableMeetings;\n\n  if (isLoading && meetings.length === 0) {\n    return (\n      <PortalLayout title=\"Meetings & Events\">\n        <div className=\"flex items-center justify-center py-20\">\n          <Spinner size=\"lg\" />\n        </div>\n      </PortalLayout>\n    );\n  }\n\n  return (\n    <PortalLayout\n      title=\"Meetings & Events\"\n      subtitle=\"View upcoming events, RSVP, and manage your schedule\"\n    >\n      {/* Tabs */}\n      <Card className=\"mb-0 rounded-b-none border-b-0\">\n        <CardBody className=\"px-0 py-0\">\n          <div className=\"flex border-b border-gray-200\">\n            <button\n              onClick={() => setActiveTab('my-meetings')}\n              className={`border-b-2 px-6 pb-4 pt-4 text-sm font-bold transition-colors ${activeTab === 'my-meetings'\n                  ? 'border-wiria-blue-dark text-wiria-blue-dark'\n                  : 'border-transparent text-gray-500 hover:text-gray-700'\n                }`}\n            >\n              My Meetings\n              {meetings.length > 0 && (\n                <span\n                  className={`ml-2 rounded-full px-2 py-0.5 text-xs ${activeTab === 'my-meetings'\n                      ? 'bg-wiria-blue-dark text-white'\n                      : 'bg-gray-200 text-gray-700'\n                    }`}\n                >\n                  {meetings.length}\n                </span>\n              )}\n            </button>\n            <button\n              onClick={() => setActiveTab('available-meetings')}\n              className={`border-b-2 px-6 pb-4 pt-4 text-sm font-bold transition-colors ${activeTab === 'available-meetings'\n                  ? 'border-wiria-blue-dark text-wiria-blue-dark'\n                  : 'border-transparent text-gray-500 hover:text-gray-700'\n                }`}\n            >\n              Available Meetings\n              {availableMeetings.length > 0 && (\n                <span\n                  className={`ml-2 rounded-full px-2 py-0.5 text-xs ${activeTab === 'available-meetings'\n                      ? 'bg-wiria-blue-dark text-white'\n                      : 'bg-gray-200 text-gray-700'\n                    }`}\n                >\n                  {availableMeetings.length}\n                </span>\n              )}\n            </button>\n          </div>\n        </CardBody>\n      </Card>\n\n      {/* Content */}\n      <Card className=\"rounded-t-none border-t-0\">\n        <CardBody className=\"min-h-[400px]\">\n          {currentMeetings.length === 0 ? (\n            <div className=\"py-12 text-center\">\n              <div className=\"mb-4 text-6xl\">üìÖ</div>\n              <p className=\"text-gray-500\">\n                {activeTab === 'my-meetings'\n                  ? \"You haven't RSVP'd to any meetings yet\"\n                  : 'No available meetings at this time'}\n              </p>\n            </div>\n          ) : (\n            <div className=\"space-y-4\">\n              {currentMeetings.map((meeting) => (\n                <MeetingCard\n                  key={meeting.id}\n                  meeting={meeting}\n                  showRsvpButton={activeTab === 'available-meetings'}\n                />\n              ))}\n            </div>\n          )}\n        </CardBody>\n      </Card>\n    </PortalLayout>\n  );\n}\n\nexport default MemberMeetingsPage;\n"],"names":["MemberMeetingsPage","meetings","availableMeetings","isLoading","fetchMeetings","fetchAvailableMeetings","rsvpToMeeting","cancelRsvp","useMemberData","activeTab","setActiveTab","useState","loadingMeetingId","setLoadingMeetingId","useEffect","handleRsvp","meetingId","notificationService","handleCancelRsvp","MeetingCard","meeting","showRsvpButton","jsxs","jsx","Button","currentMeetings","PortalLayout","Spinner","Card","CardBody"],"mappings":"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"}