{"version":3,"file":"TenderManagementPage-k5ePOQnm.js","sources":["../../src/features/admin/api/tenders.api.ts","../../src/features/admin/components/tenders/modals/TenderFields.tsx","../../src/features/admin/components/tenders/modals/TenderModal.tsx","../../src/pages/admin/TenderManagementPage.tsx"],"sourcesContent":["import { apiClient as client } from '@/shared/services/api/client';\n\nexport interface Tender {\n  id: string;\n  refNo: string;\n  title: string;\n  category: string;\n  deadline: string;\n  status: 'OPEN' | 'CLOSED' | 'AWARDED' | 'CANCELLED';\n  estimatedValue?: string;\n  submissionMethod: 'ONLINE' | 'PHYSICAL' | 'BOTH';\n  submissionEmail: string;\n  contactPerson: string;\n  contactPhone: string;\n  downloadUrl?: string;\n  description: string;\n  eligibility: string[];\n  requiredDocuments: string[];\n  createdAt: string;\n}\n\ninterface CreateTenderPayload {\n  refNo: string;\n  title: string;\n  category: string;\n  deadline: string;\n  status: 'OPEN' | 'CLOSED' | 'AWARDED' | 'CANCELLED';\n  estimatedValue?: string;\n  submissionMethod: 'ONLINE' | 'PHYSICAL' | 'BOTH';\n  submissionEmail: string;\n  contactPerson: string;\n  contactPhone: string;\n  downloadUrl?: string;\n  description: string;\n  eligibility: string[];\n  requiredDocuments: string[];\n}\n\nexport const getTenders = async (\n  options: { status?: string; category?: string; all?: boolean } = {}\n) => {\n  const params = new URLSearchParams();\n  if (options.status) params.append('status', options.status);\n  if (options.category) params.append('category', options.category);\n  if (options.all) params.append('all', 'true');\n\n  const queryString = params.toString();\n  const url = queryString ? `/tenders?${queryString}` : '/tenders';\n\n  return client.get<{ data: Tender[] }>(url);\n};\n\nexport const createTender = async (data: CreateTenderPayload) => {\n  return client.post<Tender>('/tenders', data);\n};\n\nexport const updateTender = async (id: string, data: Partial<CreateTenderPayload>) => {\n  return client.patch<Tender>(`/tenders/${id}`, data);\n};\n\nexport const deleteTender = async (id: string) => {\n  return client.delete(`/tenders/${id}`);\n};\n","import type React from 'react';\n\nimport type { Tender } from '@/features/admin/api/tenders.api';\n\nfunction handleArrayChange(\n  setter: React.Dispatch<React.SetStateAction<string[]>>,\n  index: number,\n  value: string\n) {\n  setter((previous) => {\n    const newArray = [...previous];\n    newArray[index] = value;\n    return newArray;\n  });\n}\n\nfunction addArrayItem(setter: React.Dispatch<React.SetStateAction<string[]>>) {\n  setter((previous) => [...previous, '']);\n}\n\nfunction removeArrayItem(setter: React.Dispatch<React.SetStateAction<string[]>>, index: number) {\n  setter((previous) => previous.filter((_, index_) => index_ !== index));\n}\n\nexport interface TenderBasicInfoFieldsProps {\n  tender: Tender | null;\n}\n\nexport function TenderBasicInfoFields({ tender }: TenderBasicInfoFieldsProps) {\n  return (\n    <div className=\"space-y-4\">\n      <h4 className=\"border-b pb-1 font-bold text-wiria-blue-dark\">Basic Information</h4>\n      <div>\n        <label className=\"mb-1 block text-sm font-bold\" htmlFor=\"tender-title\">\n          Tender Title *\n        </label>\n        <input\n          id=\"tender-title\"\n          name=\"title\"\n          defaultValue={tender?.title}\n          className=\"w-full rounded-lg border p-2.5\"\n          required\n        />\n      </div>\n      <div className=\"grid grid-cols-2 gap-3\">\n        <div>\n          <label className=\"mb-1 block text-sm font-bold\" htmlFor=\"tender-refNo\">\n            Reference No *\n          </label>\n          <input\n            id=\"tender-refNo\"\n            name=\"refNo\"\n            defaultValue={tender?.refNo}\n            className=\"w-full rounded-lg border p-2.5\"\n            required\n            placeholder=\"WIRIA/2025/...\"\n          />\n        </div>\n        <div>\n          <label className=\"mb-1 block text-sm font-bold\" htmlFor=\"tender-category\">\n            Category *\n          </label>\n          <input\n            id=\"tender-category\"\n            name=\"category\"\n            defaultValue={tender?.category}\n            className=\"w-full rounded-lg border p-2.5\"\n            required\n          />\n        </div>\n      </div>\n      <div className=\"grid grid-cols-2 gap-3\">\n        <div>\n          <label className=\"mb-1 block text-sm font-bold\" htmlFor=\"tender-deadline\">\n            Deadline *\n          </label>\n          <input\n            id=\"tender-deadline\"\n            type=\"datetime-local\"\n            name=\"deadline\"\n            defaultValue={\n              tender?.deadline ? new Date(tender.deadline).toISOString().slice(0, 16) : ''\n            }\n            className=\"w-full rounded-lg border p-2.5\"\n            required\n          />\n        </div>\n        <div>\n          <label className=\"mb-1 block text-sm font-bold\" htmlFor=\"tender-estimatedValue\">\n            Est. Value\n          </label>\n          <input\n            id=\"tender-estimatedValue\"\n            name=\"estimatedValue\"\n            defaultValue={tender?.estimatedValue}\n            className=\"w-full rounded-lg border p-2.5\"\n          />\n        </div>\n      </div>\n      <div>\n        <label className=\"mb-1 block text-sm font-bold\" htmlFor=\"tender-status\">\n          Status\n        </label>\n        <select\n          id=\"tender-status\"\n          name=\"status\"\n          defaultValue={tender?.status ?? 'OPEN'}\n          className=\"w-full rounded-lg border p-2.5\"\n        >\n          <option value=\"OPEN\">Open</option>\n          <option value=\"CLOSED\">Closed</option>\n          <option value=\"AWARDED\">Awarded</option>\n          <option value=\"CANCELLED\">Cancelled</option>\n        </select>\n      </div>\n    </div>\n  );\n}\n\nexport interface TenderSubmissionFieldsProps {\n  tender: Tender | null;\n}\n\nexport function TenderSubmissionFields({ tender }: TenderSubmissionFieldsProps) {\n  return (\n    <div className=\"space-y-4\">\n      <h4 className=\"border-b pb-1 font-bold text-wiria-blue-dark\">Submission & Contact</h4>\n      <div>\n        <label className=\"mb-1 block text-sm font-bold\" htmlFor=\"tender-submissionMethod\">\n          Submission Method *\n        </label>\n        <select\n          id=\"tender-submissionMethod\"\n          name=\"submissionMethod\"\n          defaultValue={tender?.submissionMethod ?? 'ONLINE'}\n          className=\"w-full rounded-lg border p-2.5\"\n        >\n          <option value=\"ONLINE\">Online (Email)</option>\n          <option value=\"PHYSICAL\">Physical (Seal Box)</option>\n          <option value=\"BOTH\">Both</option>\n        </select>\n      </div>\n      <div>\n        <label className=\"mb-1 block text-sm font-bold\" htmlFor=\"tender-submissionEmail\">\n          Submission Email *\n        </label>\n        <input\n          id=\"tender-submissionEmail\"\n          type=\"email\"\n          name=\"submissionEmail\"\n          defaultValue={tender?.submissionEmail ?? 'tenders@wiria.org'}\n          className=\"w-full rounded-lg border p-2.5\"\n          required\n        />\n      </div>\n      <div className=\"grid grid-cols-2 gap-3\">\n        <div>\n          <label className=\"mb-1 block text-sm font-bold\" htmlFor=\"tender-contactPerson\">\n            Contact Person *\n          </label>\n          <input\n            id=\"tender-contactPerson\"\n            name=\"contactPerson\"\n            defaultValue={tender?.contactPerson}\n            className=\"w-full rounded-lg border p-2.5\"\n            required\n          />\n        </div>\n        <div>\n          <label className=\"mb-1 block text-sm font-bold\" htmlFor=\"tender-contactPhone\">\n            Contact Phone *\n          </label>\n          <input\n            id=\"tender-contactPhone\"\n            name=\"contactPhone\"\n            defaultValue={tender?.contactPhone}\n            className=\"w-full rounded-lg border p-2.5\"\n            required\n          />\n        </div>\n      </div>\n      <div>\n        <label className=\"mb-1 block text-sm font-bold\" htmlFor=\"tender-file-input\">\n          Tender Document (PDF)\n        </label>\n        <input\n          type=\"file\"\n          id=\"tender-file-input\"\n          className=\"w-full rounded-lg border p-2 text-sm\"\n          accept=\".pdf,.doc,.docx\"\n        />\n        <input type=\"hidden\" name=\"downloadUrl\" defaultValue={tender?.downloadUrl} />\n      </div>\n    </div>\n  );\n}\n\nexport interface TenderCriteriaFieldsProps {\n  eligibility: string[];\n  requiredDocuments: string[];\n  setEligibility: React.Dispatch<React.SetStateAction<string[]>>;\n  setRequiredDocuments: React.Dispatch<React.SetStateAction<string[]>>;\n}\n\nexport function TenderCriteriaFields({\n  eligibility,\n  requiredDocuments,\n  setEligibility,\n  setRequiredDocuments,\n}: TenderCriteriaFieldsProps) {\n  return (\n    <div className=\"grid grid-cols-1 gap-6 md:grid-cols-2\">\n      <div>\n        <h4 className=\"mb-2 block text-sm font-bold\">Eligibility Criteria</h4>\n        {eligibility.map((item: string, index: number) => (\n          <div key={index} className=\"mb-2 flex gap-2\">\n            <input\n              aria-label={`Eligibility criteria ${index + 1}`}\n              value={item}\n              onChange={(event) => handleArrayChange(setEligibility, index, event.target.value)}\n              className=\"flex-1 rounded-lg border p-2 text-sm\"\n              required\n            />\n            <button\n              type=\"button\"\n              onClick={() => removeArrayItem(setEligibility, index)}\n              className=\"text-red-500\"\n            >\n              ✕\n            </button>\n          </div>\n        ))}\n        <button\n          type=\"button\"\n          onClick={() => addArrayItem(setEligibility)}\n          className=\"text-xs font-bold text-blue-600\"\n        >\n          + Add Criteria\n        </button>\n      </div>\n      <div>\n        <h4 className=\"mb-2 block text-sm font-bold\">Required Documents</h4>\n        {requiredDocuments.map((item: string, index: number) => (\n          <div key={index} className=\"mb-2 flex gap-2\">\n            <input\n              aria-label={`Required document ${index + 1}`}\n              value={item}\n              onChange={(event) =>\n                handleArrayChange(setRequiredDocuments, index, event.target.value)\n              }\n              className=\"flex-1 rounded-lg border p-2 text-sm\"\n              required\n            />\n            <button\n              type=\"button\"\n              onClick={() => removeArrayItem(setRequiredDocuments, index)}\n              className=\"text-red-500\"\n            >\n              ✕\n            </button>\n          </div>\n        ))}\n        <button\n          type=\"button\"\n          onClick={() => addArrayItem(setRequiredDocuments)}\n          className=\"text-xs font-bold text-blue-600\"\n        >\n          + Add Document\n        </button>\n      </div>\n    </div>\n  );\n}\n","import { useState } from 'react';\n\nimport { useQueryClient } from '@tanstack/react-query';\n\nimport { uploadFile } from '@/features/admin/api/resources.api';\nimport type { Tender } from '@/features/admin/api/tenders.api';\nimport { createTender, updateTender } from '@/features/admin/api/tenders.api';\nimport { Button } from '@/shared/components/ui/Button';\nimport { Modal } from '@/shared/components/ui/Modal';\nimport { notificationService } from '@/shared/services/notification/notificationService';\nimport { getErrorMessage } from '@/shared/utils/apiUtils';\n\nimport {\n  TenderBasicInfoFields,\n  TenderCriteriaFields,\n  TenderSubmissionFields,\n} from './TenderFields';\n\ninterface TenderModalProps {\n  tender: Tender | null;\n  onClose: () => void;\n  onSuccess: () => void;\n}\n\ninterface TenderSubmitConfig {\n  tender: Tender | null;\n  eligibility: string[];\n  requiredDocuments: string[];\n  queryClient: ReturnType<typeof useQueryClient>;\n  onSuccess: () => void;\n  setIsSubmitting: React.Dispatch<React.SetStateAction<boolean>>;\n}\n\nfunction createTenderSubmitHandler({\n  tender,\n  eligibility,\n  requiredDocuments,\n  queryClient,\n  onSuccess,\n  setIsSubmitting,\n}: TenderSubmitConfig) {\n  return async (event: React.FormEvent<HTMLFormElement>) => {\n    event.preventDefault();\n    setIsSubmitting(true);\n    const form = event.currentTarget;\n    const formData = new FormData(form);\n    const rawData = Object.fromEntries(formData.entries());\n\n    const fileInput = form.querySelector<HTMLInputElement>('#tender-file-input');\n    let downloadUrl = (rawData['downloadUrl'] as string) || '';\n\n    try {\n      if (fileInput?.files && fileInput.files.length > 0) {\n        notificationService.info('Uploading document...');\n        const file = fileInput.files[0];\n        if (file) {\n          const uploadResult = await uploadFile(file, 'tenders');\n          downloadUrl = uploadResult.data.url;\n        }\n      }\n\n      const data = {\n        title: rawData['title'] as string,\n        refNo: rawData['refNo'] as string,\n        category: rawData['category'] as string,\n        estimatedValue: rawData['estimatedValue'] as string,\n        deadline: new Date(rawData['deadline'] as string).toISOString(),\n        status: rawData['status'] as 'OPEN' | 'CLOSED' | 'AWARDED' | 'CANCELLED',\n        submissionMethod: rawData['submissionMethod'] as 'ONLINE' | 'PHYSICAL' | 'BOTH',\n        submissionEmail: rawData['submissionEmail'] as string,\n        contactPerson: rawData['contactPerson'] as string,\n        contactPhone: rawData['contactPhone'] as string,\n        description: rawData['description'] as string,\n        eligibility: eligibility.filter((item: string) => item.trim()),\n        requiredDocuments: requiredDocuments.filter((item: string) => item.trim()),\n        downloadUrl,\n      };\n\n      if (tender) {\n        await updateTender(tender.id, data);\n        notificationService.success('Tender updated');\n      } else {\n        await createTender(data);\n        notificationService.success('Tender advertised');\n      }\n      void queryClient.invalidateQueries({ queryKey: ['tenders'] });\n      onSuccess();\n    } catch (error: unknown) {\n      notificationService.error(getErrorMessage(error, 'Operation failed'));\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n}\n\nexport function TenderModal({ tender, onClose, onSuccess }: TenderModalProps) {\n  const queryClient = useQueryClient();\n  const [eligibility, setEligibility] = useState<string[]>(\n    tender?.eligibility ?? ['Legal registration in Kenya', 'Tax compliance']\n  );\n  const [requiredDocuments, setRequiredDocuments] = useState<string[]>(\n    tender?.requiredDocuments ?? ['Certificate of Incorporation', 'KRA PIN/Tax Compliance']\n  );\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  const handleSubmit = createTenderSubmitHandler({\n    tender,\n    eligibility,\n    requiredDocuments,\n    queryClient,\n    onSuccess,\n    setIsSubmitting,\n  });\n\n  return (\n    <Modal\n      isOpen={true}\n      onClose={onClose}\n      title={tender ? 'Edit Tender' : 'Advertise New Tender'}\n      size=\"3xl\"\n    >\n      <form onSubmit={(event) => void handleSubmit(event)} className=\"space-y-6\">\n        <div className=\"grid grid-cols-1 gap-6 md:grid-cols-2\">\n          <TenderBasicInfoFields tender={tender} />\n          <TenderSubmissionFields tender={tender} />\n        </div>\n\n        <TenderCriteriaFields\n          eligibility={eligibility}\n          requiredDocuments={requiredDocuments}\n          setEligibility={setEligibility}\n          setRequiredDocuments={setRequiredDocuments}\n        />\n\n        <div>\n          <label className=\"mb-1 block text-sm font-bold\" htmlFor=\"tender-description\">\n            Full Description *\n          </label>\n          <textarea\n            id=\"tender-description\"\n            name=\"description\"\n            defaultValue={tender?.description}\n            className=\"h-24 w-full rounded-lg border p-3 text-sm\"\n            required\n          />\n        </div>\n\n        <div className=\"flex gap-4 pt-4\">\n          <Button type=\"submit\" fullWidth disabled={isSubmitting}>\n            {isSubmitting ? 'Saving...' : tender ? 'Update Tender' : 'Advertise Tender'}\n          </Button>\n          <Button\n            type=\"button\"\n            variant=\"secondary\"\n            fullWidth\n            onClick={onClose}\n            disabled={isSubmitting}\n          >\n            Cancel\n          </Button>\n        </div>\n      </form>\n    </Modal>\n  );\n}\n","import { useState } from 'react';\n\nimport type { Tender } from '@/features/admin/api/tenders.api';\nimport { getTenders, deleteTender } from '@/features/admin/api/tenders.api';\nimport { TenderModal } from '@/features/admin/components/tenders/modals/TenderModal';\nimport { ConfirmDialog } from '@/shared/components/modals/ConfirmDialog';\nimport { Button } from '@/shared/components/ui/Button';\nimport type { Column } from '@/shared/components/ui/DataTable';\nimport { DataTable } from '@/shared/components/ui/DataTable';\nimport { useAdminData, useAdminAction } from '@/shared/hooks/useAdminData';\nimport { notificationService } from '@/shared/services/notification/notificationService';\n\nexport default function TenderManagementPage() {\n  const { items: tenders, isLoading } = useAdminData<Tender>(['tenders', { all: true }], () =>\n    getTenders({ all: true })\n  );\n  const deleteAction = useAdminAction(\n    (id: string) => deleteTender(id),\n    [['tenders']],\n    {\n      onSuccess: () => {\n        notificationService.success('Tender deleted successfully');\n      },\n      onError: () => {\n        notificationService.error('Failed to delete tender');\n      },\n    }\n  );\n\n  const [editingTender, setEditingTender] = useState<Tender | null>(null);\n  const [showModal, setShowModal] = useState(false);\n  const [tenderIdToDelete, setTenderIdToDelete] = useState<string | null>(null);\n\n  const handleDelete = (id: string) => {\n    setTenderIdToDelete(id);\n  };\n\n  const handleConfirmDelete = () => {\n    if (!tenderIdToDelete) return;\n    deleteAction.mutate(tenderIdToDelete);\n    setTenderIdToDelete(null);\n  };\n\n  const columns: Column<Tender>[] = [\n    { header: 'Ref No', key: 'refNo', className: 'font-mono text-xs' },\n    { header: 'Title', key: 'title', className: 'font-semibold' },\n    {\n      header: 'Deadline',\n      key: 'deadline',\n      render: (t) => <span className=\"text-sm\">{new Date(t.deadline).toLocaleDateString()}</span>,\n    },\n    {\n      header: 'Document',\n      key: 'downloadUrl',\n      render: (t) =>\n        t.downloadUrl ? (\n          <span className=\"inline-flex items-center gap-1 rounded bg-green-100 px-2 py-0.5 text-[10px] font-bold uppercase text-green-700\">\n            ✓ Uploaded\n          </span>\n        ) : (\n          <span className=\"inline-flex items-center gap-1 rounded bg-yellow-100 px-2 py-0.5 text-[10px] font-bold uppercase text-yellow-700\">\n            ⚠ Missing\n          </span>\n        ),\n    },\n    {\n      header: 'Status',\n      key: 'status',\n      render: (t) => <TenderStatusBadge tender={t} />,\n    },\n    {\n      header: 'Actions',\n      key: 'actions',\n      align: 'right',\n      render: (t) => (\n        <div className=\"flex justify-end gap-3\">\n          <button\n            onClick={() => {\n              setEditingTender(t);\n              setShowModal(true);\n            }}\n            className=\"text-sm font-bold text-wiria-blue-dark hover:underline\"\n          >\n            Edit\n          </button>\n          <button\n            onClick={() => handleDelete(t.id)}\n            className=\"text-sm font-bold text-red-600 hover:underline\"\n          >\n            Delete\n          </button>\n        </div>\n      ),\n    },\n  ];\n\n  return (\n    <div className=\"space-y-8\">\n      <header className=\"flex items-center justify-between rounded-2xl border border-gray-100 bg-gray-50/50 p-6\">\n        <div>\n          <h1 className=\"text-3xl font-bold tracking-tight text-gray-900\">Tender Management</h1>\n          <p className=\"mt-1 font-medium text-gray-500\">\n            Advertise and manage organization procurement opportunities.\n          </p>\n        </div>\n        <Button\n          onClick={() => {\n            setEditingTender(null);\n            setShowModal(true);\n          }}\n        >\n          + Advertise New Tender\n        </Button>\n      </header>\n\n      <DataTable\n        columns={columns}\n        data={tenders}\n        rowKey=\"id\"\n        isLoading={isLoading}\n        emptyMessage=\"No tenders advertised yet.\"\n      />\n\n      {showModal && (\n        <TenderModal\n          tender={editingTender}\n          onClose={() => setShowModal(false)}\n          onSuccess={() => setShowModal(false)}\n        />\n      )}\n      <ConfirmDialog\n        isOpen={tenderIdToDelete !== null}\n        title=\"Delete Tender\"\n        message=\"Are you sure you want to delete this tender?\"\n        confirmLabel=\"Delete\"\n        onConfirm={handleConfirmDelete}\n        onCancel={() => setTenderIdToDelete(null)}\n      />\n    </div>\n  );\n}\n\nfunction TenderStatusBadge({ tender }: { tender: Tender }) {\n  const isExpired = tender.status === 'OPEN' && new Date(tender.deadline) < new Date();\n  const status = isExpired ? 'EXPIRED' : tender.status;\n\n  const styles: Record<string, string> = {\n    OPEN: 'bg-green-100 text-green-700',\n    CLOSED: 'bg-red-100 text-red-700',\n    AWARDED: 'bg-blue-100 text-blue-700',\n    CANCELLED: 'bg-gray-100 text-gray-700',\n    EXPIRED: 'bg-yellow-100 text-yellow-700',\n  };\n  return (\n    <span\n      className={`rounded-full px-2 py-1 text-[10px] font-bold uppercase tracking-wider ${styles[status] ?? 'bg-gray-100'}`}\n    >\n      {status}\n    </span>\n  );\n}\n"],"names":["getTenders","options","params","queryString","url","client","createTender","data","updateTender","id","deleteTender","handleArrayChange","setter","index","value","previous","newArray","addArrayItem","removeArrayItem","_","index_","TenderBasicInfoFields","tender","jsxs","jsx","TenderSubmissionFields","TenderCriteriaFields","eligibility","requiredDocuments","setEligibility","setRequiredDocuments","item","event","createTenderSubmitHandler","queryClient","onSuccess","setIsSubmitting","form","formData","rawData","fileInput","downloadUrl","notificationService","file","uploadFile","error","getErrorMessage","TenderModal","onClose","useQueryClient","useState","isSubmitting","handleSubmit","Modal","Button","TenderManagementPage","tenders","isLoading","useAdminData","deleteAction","useAdminAction","editingTender","setEditingTender","showModal","setShowModal","tenderIdToDelete","setTenderIdToDelete","handleDelete","handleConfirmDelete","columns","t","TenderStatusBadge","DataTable","ConfirmDialog","status","styles"],"mappings":"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"}