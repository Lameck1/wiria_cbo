{"version":3,"file":"apiUtils-CDDJc0SC.js","sources":["../../src/shared/utils/apiUtils.ts"],"sourcesContent":["/**\n * API Response Utilities\n * Shared typed utilities for handling varying API response structures\n */\n\n/**\n * Extracts an array from varying API response structures.\n * Handles:\n * - Direct array response\n * - { data: T[] } wrapper\n * - { data: { data: T[] } } nested wrapper\n * - Named arrays like { items: T[] } or { members: T[] }\n *\n * @example\n * const items = extractArray<Item>(apiResponse);\n */\nexport function extractArray<T>(response: unknown, arrayKey?: string): T[] {\n  // Direct array\n  if (Array.isArray(response)) {\n    return response as T[];\n  }\n\n  if (!response || typeof response !== 'object') {\n    return [];\n  }\n\n  const object = response as Record<string, unknown>;\n\n  // Check for specific key if provided (e.g., 'members', 'items')\n  if (arrayKey && Array.isArray(object[arrayKey])) {\n    return object[arrayKey] as T[];\n  }\n\n  // Standard { data: T[] } wrapper\n  if (Array.isArray(object['data'])) {\n    return object['data'] as T[];\n  }\n\n  // Nested { data: { data: T[] } } wrapper\n  const nestedData = object['data'];\n  if (nestedData && typeof nestedData === 'object') {\n    const nested = nestedData as Record<string, unknown>;\n\n    if (Array.isArray(nested['data'])) {\n      return nested['data'] as T[];\n    }\n\n    // Check for named arrays in nested data\n    if (arrayKey && Array.isArray(nested[arrayKey])) {\n      return nested[arrayKey] as T[];\n    }\n  }\n\n  return [];\n}\n\n/**\n * Extracts a single data object from API response.\n * Handles:\n * - Direct object response\n * - { data: T } wrapper\n *\n * @example\n * const item = extractData<Item>(apiResponse);\n */\nexport function extractData<T>(response: unknown): T | null {\n  if (!response) {\n    return null;\n  }\n\n  if (typeof response === 'object') {\n    const object = response as Record<string, unknown>;\n\n    // If response has 'data' property, use it\n    if ('data' in object && object['data'] !== undefined) {\n      return object['data'] as T;\n    }\n\n    // Otherwise return the response itself\n    return response as T;\n  }\n\n  return null;\n}\n\n/**\n * Type-safe error message extractor\n * Handles unknown catch block errors\n *\n * @example\n * catch (error: unknown) {\n * const message = getErrorMessage(error);\n * }\n */\nexport function getErrorMessage(error: unknown, fallback = 'An error occurred'): string {\n  if (error instanceof Error) {\n    return error.message;\n  }\n  if (typeof error === 'string') {\n    return error;\n  }\n  if (error && typeof error === 'object' && 'message' in error) {\n    return String((error as { message: unknown }).message);\n  }\n  return fallback;\n}\n\n/**\n * Type guard to check if value is a non-null object\n */\nexport function isObject(value: unknown): value is Record<string, unknown> {\n  return value !== null && typeof value === 'object' && !Array.isArray(value);\n}\n"],"names":["extractArray","response","arrayKey","object","nestedData","nested","extractData","getErrorMessage","error","fallback"],"mappings":"AAgBO,SAASA,EAAgBC,EAAmBC,EAAwB,CAEzE,GAAI,MAAM,QAAQD,CAAQ,EACxB,OAAOA,EAGT,GAAI,CAACA,GAAY,OAAOA,GAAa,SACnC,MAAO,CAAA,EAGT,MAAME,EAASF,EAGf,GAAIC,GAAY,MAAM,QAAQC,EAAOD,CAAQ,CAAC,EAC5C,OAAOC,EAAOD,CAAQ,EAIxB,GAAI,MAAM,QAAQC,EAAO,IAAO,EAC9B,OAAOA,EAAO,KAIhB,MAAMC,EAAaD,EAAO,KAC1B,GAAIC,GAAc,OAAOA,GAAe,SAAU,CAChD,MAAMC,EAASD,EAEf,GAAI,MAAM,QAAQC,EAAO,IAAO,EAC9B,OAAOA,EAAO,KAIhB,GAAIH,GAAY,MAAM,QAAQG,EAAOH,CAAQ,CAAC,EAC5C,OAAOG,EAAOH,CAAQ,CAE1B,CAEA,MAAO,CAAA,CACT,CAWO,SAASI,EAAeL,EAA6B,CAC1D,GAAI,CAACA,EACH,OAAO,KAGT,GAAI,OAAOA,GAAa,SAAU,CAChC,MAAME,EAASF,EAGf,MAAI,SAAUE,GAAUA,EAAO,OAAY,OAClCA,EAAO,KAITF,CACT,CAEA,OAAO,IACT,CAWO,SAASM,EAAgBC,EAAgBC,EAAW,oBAA6B,CACtF,OAAID,aAAiB,MACZA,EAAM,QAEX,OAAOA,GAAU,SACZA,EAELA,GAAS,OAAOA,GAAU,UAAY,YAAaA,EAC9C,OAAQA,EAA+B,OAAO,EAEhDC,CACT"}