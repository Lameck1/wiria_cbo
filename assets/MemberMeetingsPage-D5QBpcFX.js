import{j as s}from"./query-vendor-CM55eWOT.js";import{r as n}from"./react-vendor-CXp26_Hx.js";import{u as M,P as b}from"./useMemberData-BdepG6Fx.js";import{C as h,a as u}from"./Card-C-jJKiAv.js";import{B as m}from"./Button-JX_3oChN.js";import{S as C}from"./Spinner-CSB2ADVs.js";import{n as l}from"./index-Ck6qqv4n.js";import"./animation-vendor-Bcu85ETC.js";function A(){const{meetings:t,availableMeetings:i,isLoading:y,fetchMeetings:c,fetchAvailableMeetings:d,rsvpToMeeting:g,cancelRsvp:j}=M(),[a,o]=n.useState("my-meetings"),[x,r]=n.useState(null);n.useEffect(()=>{c(),d()},[c,d]);const f=async e=>{r(e);try{await g(e),l.success("Successfully RSVP'd to meeting!")}catch{l.error("Failed to RSVP. Please try again.")}finally{r(null)}},v=async e=>{r(e);try{await j(e),l.success("RSVP cancelled")}catch{l.error("Failed to cancel RSVP. Please try again.")}finally{r(null)}},N=({meeting:e,showRsvpButton:w=!0})=>s.jsx("div",{className:"rounded-xl border border-gray-100 bg-white p-6 shadow-md transition-shadow hover:shadow-lg",children:s.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-start md:justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"mb-2 flex items-center gap-3",children:[s.jsx("span",{className:`rounded px-2 py-1 text-xs font-bold uppercase ${e.type==="AGM"?"bg-purple-100 text-purple-800":e.type==="SPECIAL"?"bg-red-100 text-red-800":e.type==="TRAINING"?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"}`,children:e.type}),s.jsx("span",{className:`rounded px-2 py-1 text-xs font-semibold ${e.status==="UPCOMING"?"bg-blue-50 text-blue-700":e.status==="ONGOING"?"bg-green-50 text-green-700":e.status==="COMPLETED"?"bg-gray-50 text-gray-600":"bg-red-50 text-red-700"}`,children:e.status})]}),s.jsx("h3",{className:"mb-2 text-lg font-bold text-wiria-blue-dark",children:e.title}),e.description&&s.jsx("p",{className:"mb-3 text-sm text-gray-600",children:e.description}),s.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-gray-500",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{children:"ðŸ“…"}),s.jsx("span",{children:new Date(e.date).toLocaleDateString()})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{children:"â°"}),s.jsx("span",{children:e.time})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{children:"ðŸ“"}),s.jsx("span",{children:e.location})]}),e.attendeesCount!==void 0&&s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{children:"ðŸ‘¥"}),s.jsxs("span",{children:[e.attendeesCount,e.capacity?` / ${e.capacity}`:""," attending"]})]})]})]}),w&&e.status==="UPCOMING"&&s.jsx("div",{className:"flex-shrink-0",children:e.isRsvpd?s.jsx(m,{variant:"outline",size:"sm",onClick:()=>v(e.id),isLoading:x===e.id,children:"Cancel RSVP"}):s.jsx(m,{variant:e.capacity&&(e.attendeesCount||0)>=e.capacity?"outline":"primary",size:"sm",onClick:()=>f(e.id),isLoading:x===e.id,disabled:e.capacity?(e.attendeesCount||0)>=e.capacity:!1,children:e.capacity&&(e.attendeesCount||0)>=e.capacity?"Fully Booked":"RSVP Now"})})]})}),p=a==="my-meetings"?t:i;return y&&t.length===0?s.jsx(b,{title:"Meetings & Events",children:s.jsx("div",{className:"flex items-center justify-center py-20",children:s.jsx(C,{size:"lg"})})}):s.jsxs(b,{title:"Meetings & Events",subtitle:"View upcoming events, RSVP, and manage your schedule",children:[s.jsx(h,{className:"mb-0 rounded-b-none border-b-0",children:s.jsx(u,{className:"px-0 py-0",children:s.jsxs("div",{className:"flex border-b border-gray-200",children:[s.jsxs("button",{onClick:()=>o("my-meetings"),className:`border-b-2 px-6 pb-4 pt-4 text-sm font-bold transition-colors ${a==="my-meetings"?"border-wiria-blue-dark text-wiria-blue-dark":"border-transparent text-gray-500 hover:text-gray-700"}`,children:["My Meetings",t.length>0&&s.jsx("span",{className:`ml-2 rounded-full px-2 py-0.5 text-xs ${a==="my-meetings"?"bg-wiria-blue-dark text-white":"bg-gray-200 text-gray-700"}`,children:t.length})]}),s.jsxs("button",{onClick:()=>o("available-meetings"),className:`border-b-2 px-6 pb-4 pt-4 text-sm font-bold transition-colors ${a==="available-meetings"?"border-wiria-blue-dark text-wiria-blue-dark":"border-transparent text-gray-500 hover:text-gray-700"}`,children:["Available Meetings",i.length>0&&s.jsx("span",{className:`ml-2 rounded-full px-2 py-0.5 text-xs ${a==="available-meetings"?"bg-wiria-blue-dark text-white":"bg-gray-200 text-gray-700"}`,children:i.length})]})]})})}),s.jsx(h,{className:"rounded-t-none border-t-0",children:s.jsx(u,{className:"min-h-[400px]",children:p.length===0?s.jsxs("div",{className:"py-12 text-center",children:[s.jsx("div",{className:"mb-4 text-6xl",children:"ðŸ“…"}),s.jsx("p",{className:"text-gray-500",children:a==="my-meetings"?"You haven't RSVP'd to any meetings yet":"No available meetings at this time"})]}):s.jsx("div",{className:"space-y-4",children:p.map(e=>s.jsx(N,{meeting:e,showRsvpButton:a==="available-meetings"},e.id))})})})]})}export{A as default};
//# sourceMappingURL=MemberMeetingsPage-D5QBpcFX.js.map
