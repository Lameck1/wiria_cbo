{"version":3,"file":"ResetPasswordPage-DypA1Jq9.js","sources":["../../src/pages/ResetPasswordPage.tsx"],"sourcesContent":["/**\n * Reset Password Page\n * Password reset request and confirmation\n */\n\nimport { useState } from 'react';\n\nimport { Link } from 'react-router-dom';\n\nimport { Button } from '@/shared/components/ui/Button';\nimport { Card, CardBody } from '@/shared/components/ui/Card';\nimport { Input } from '@/shared/components/ui/Input';\nimport { apiClient } from '@/shared/services/api/client';\nimport { API_ENDPOINTS } from '@/shared/services/api/endpoints';\nimport { logger } from '@/shared/services/logger';\nimport { notificationService } from '@/shared/services/notification/notificationService';\n\ntype Step = 'request' | 'confirm' | 'success';\n\ninterface ResetPasswordRequestStepProps {\n  email: string;\n  isLoading: boolean;\n  onEmailChange: (value: string) => void;\n  onSubmit: (event: React.FormEvent) => void;\n  onGoToConfirm: () => void;\n}\n\nfunction ResetPasswordRequestStep({\n  email,\n  isLoading,\n  onEmailChange,\n  onSubmit,\n  onGoToConfirm,\n}: ResetPasswordRequestStepProps) {\n  return (\n    <>\n      <div className=\"mb-8 text-center\">\n        <div className=\"mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-wiria-yellow/10\">\n          <svg\n            className=\"h-8 w-8 text-wiria-yellow\"\n            fill=\"none\"\n            stroke=\"currentColor\"\n            viewBox=\"0 0 24 24\"\n          >\n            <path\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              strokeWidth={2}\n              d=\"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z\"\n            />\n          </svg>\n        </div>\n        <h1 className=\"text-2xl font-bold text-wiria-blue-dark\">Reset Password</h1>\n        <p className=\"mt-2 text-gray-500\">Enter your email to receive a password reset link</p>\n      </div>\n\n      <form onSubmit={onSubmit} className=\"space-y-6\">\n        <Input\n          type=\"email\"\n          label=\"Email Address\"\n          value={email}\n          onChange={(event) => onEmailChange(event.target.value)}\n          placeholder=\"you@example.com\"\n          required\n        />\n\n        <Button type=\"submit\" fullWidth size=\"lg\" isLoading={isLoading}>\n          Send Reset Link\n        </Button>\n      </form>\n\n      <div className=\"mt-6 text-center\">\n        <p className=\"text-sm text-gray-600\">\n          Already have a reset token?{' '}\n          <button\n            onClick={onGoToConfirm}\n            className=\"font-semibold text-wiria-blue-dark hover:text-wiria-yellow\"\n          >\n            Enter token\n          </button>\n        </p>\n      </div>\n    </>\n  );\n}\n\ninterface ResetPasswordConfirmStepProps {\n  token: string;\n  newPassword: string;\n  confirmPassword: string;\n  isLoading: boolean;\n  onTokenChange: (value: string) => void;\n  onNewPasswordChange: (value: string) => void;\n  onConfirmPasswordChange: (value: string) => void;\n  onSubmit: (event: React.FormEvent) => void;\n  onBackToRequest: () => void;\n}\n\nfunction ResetPasswordConfirmStep({\n  token,\n  newPassword,\n  confirmPassword,\n  isLoading,\n  onTokenChange,\n  onNewPasswordChange,\n  onConfirmPasswordChange,\n  onSubmit,\n  onBackToRequest,\n}: ResetPasswordConfirmStepProps) {\n  return (\n    <>\n      <div className=\"mb-8 text-center\">\n        <div className=\"mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-green-100\">\n          <svg\n            className=\"h-8 w-8 text-green-600\"\n            fill=\"none\"\n            stroke=\"currentColor\"\n            viewBox=\"0 0 24 24\"\n          >\n            <path\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              strokeWidth={2}\n              d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\"\n            />\n          </svg>\n        </div>\n        <h1 className=\"text-2xl font-bold text-wiria-blue-dark\">Check Your Email</h1>\n        <p className=\"mt-2 text-gray-500\">Enter the token from your email and set a new password</p>\n      </div>\n\n      <form onSubmit={onSubmit} className=\"space-y-6\">\n        <Input\n          label=\"Reset Token\"\n          value={token}\n          onChange={(event) => onTokenChange(event.target.value)}\n          placeholder=\"Enter token from email\"\n          required\n        />\n\n        <Input\n          type=\"password\"\n          label=\"New Password\"\n          value={newPassword}\n          onChange={(event) => onNewPasswordChange(event.target.value)}\n          placeholder=\"••••••••\"\n          helperText=\"Minimum 8 characters\"\n          required\n        />\n\n        <Input\n          type=\"password\"\n          label=\"Confirm Password\"\n          value={confirmPassword}\n          onChange={(event) => onConfirmPasswordChange(event.target.value)}\n          placeholder=\"••••••••\"\n          required\n        />\n\n        <Button type=\"submit\" fullWidth size=\"lg\" isLoading={isLoading}>\n          Reset Password\n        </Button>\n      </form>\n\n      <div className=\"mt-6 text-center\">\n        <button\n          onClick={onBackToRequest}\n          className=\"text-sm text-gray-500 hover:text-wiria-blue-dark\"\n        >\n          ← Request new reset link\n        </button>\n      </div>\n    </>\n  );\n}\n\nfunction ResetPasswordSuccessStep() {\n  return (\n    <div className=\"py-6 text-center\">\n      <div className=\"mx-auto mb-6 flex h-20 w-20 items-center justify-center rounded-full bg-green-100\">\n        <svg\n          className=\"h-10 w-10 text-green-600\"\n          fill=\"none\"\n          stroke=\"currentColor\"\n          viewBox=\"0 0 24 24\"\n        >\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n        </svg>\n      </div>\n      <h1 className=\"mb-2 text-2xl font-bold text-green-800\">Password Reset!</h1>\n      <p className=\"mb-6 text-gray-600\">\n        Your password has been successfully reset. You can now login with your new password.\n      </p>\n      <Link to=\"/member-login\">\n        <Button fullWidth size=\"lg\">\n          Login to Member Portal\n        </Button>\n      </Link>\n    </div>\n  );\n}\n\nfunction ResetPasswordBackToLogin({ hidden }: { hidden: boolean }) {\n  if (hidden) {\n    return null;\n  }\n\n  return (\n    <div className=\"mt-8 border-t border-gray-100 pt-6 text-center\">\n      <Link\n        to=\"/member-login\"\n        className=\"inline-flex items-center gap-2 text-sm text-gray-500 hover:text-wiria-blue-dark\"\n      >\n        <svg className=\"h-4 w-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n          <path\n            strokeLinecap=\"round\"\n            strokeLinejoin=\"round\"\n            strokeWidth={2}\n            d=\"M10 19l-7-7m0 0l7-7m-7 7h18\"\n          />\n        </svg>\n        Back to Login\n      </Link>\n    </div>\n  );\n}\n\nfunction ResetPasswordPage() {\n  const [step, setStep] = useState<Step>('request');\n  const [email, setEmail] = useState('');\n  const [token, setToken] = useState('');\n  const [newPassword, setNewPassword] = useState('');\n  const [confirmPassword, setConfirmPassword] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n\n  const handleRequestReset = async (event: React.FormEvent) => {\n    event.preventDefault();\n    setIsLoading(true);\n\n    try {\n      await apiClient.post(API_ENDPOINTS.AUTH_RESET_PASSWORD_REQUEST, { email });\n      notificationService.success('Password reset link sent to your email!');\n      setStep('confirm');\n    } catch (error) {\n      notificationService.error(\n        'Failed to send reset link. Please check your email and try again.'\n      );\n      logger.error('Reset request error:', error);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleConfirmReset = async (event: React.FormEvent) => {\n    event.preventDefault();\n\n    if (newPassword !== confirmPassword) {\n      notificationService.error('Passwords do not match');\n      return;\n    }\n\n    if (newPassword.length < 8) {\n      notificationService.error('Password must be at least 8 characters');\n      return;\n    }\n\n    setIsLoading(true);\n\n    try {\n      await apiClient.post(API_ENDPOINTS.AUTH_RESET_PASSWORD_CONFIRM, {\n        token,\n        newPassword,\n      });\n      notificationService.success('Password reset successfully!');\n      setStep('success');\n    } catch (error) {\n      notificationService.error('Failed to reset password. Token may be invalid or expired.');\n      logger.error('Reset confirm error:', error);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"flex min-h-[70vh] items-center justify-center bg-gray-50 px-4 py-12\">\n      <div className=\"w-full max-w-md\">\n        <Card>\n          <CardBody className=\"p-8\">\n            {step === 'request' && (\n              <ResetPasswordRequestStep\n                email={email}\n                isLoading={isLoading}\n                onEmailChange={setEmail}\n                onSubmit={(event) => {\n                  void handleRequestReset(event);\n                }}\n                onGoToConfirm={() => setStep('confirm')}\n              />\n            )}\n\n            {step === 'confirm' && (\n              <ResetPasswordConfirmStep\n                token={token}\n                newPassword={newPassword}\n                confirmPassword={confirmPassword}\n                isLoading={isLoading}\n                onTokenChange={setToken}\n                onNewPasswordChange={setNewPassword}\n                onConfirmPasswordChange={setConfirmPassword}\n                onSubmit={(event) => {\n                  void handleConfirmReset(event);\n                }}\n                onBackToRequest={() => setStep('request')}\n              />\n            )}\n\n            {step === 'success' && <ResetPasswordSuccessStep />}\n\n            <ResetPasswordBackToLogin hidden={step === 'success'} />\n          </CardBody>\n        </Card>\n      </div>\n    </div>\n  );\n}\n\nexport default ResetPasswordPage;\n"],"names":["ResetPasswordRequestStep","email","isLoading","onEmailChange","onSubmit","onGoToConfirm","jsxs","Fragment","jsx","Input","event","Button","ResetPasswordConfirmStep","token","newPassword","confirmPassword","onTokenChange","onNewPasswordChange","onConfirmPasswordChange","onBackToRequest","ResetPasswordSuccessStep","Link","ResetPasswordBackToLogin","hidden","ResetPasswordPage","step","setStep","useState","setEmail","setToken","setNewPassword","setConfirmPassword","setIsLoading","handleRequestReset","apiClient","API_ENDPOINTS","notificationService","error","logger","handleConfirmReset","Card","CardBody"],"mappings":"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"}