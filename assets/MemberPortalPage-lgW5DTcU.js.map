{"version":3,"file":"MemberPortalPage-lgW5DTcU.js","sources":["../../src/pages/MemberPortalPage.tsx"],"sourcesContent":["/**\n * Member Portal Page (Dashboard)\n * Main dashboard for logged-in members\n */\n\nimport { useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport { PortalLayout } from '@/features/membership/components/PortalLayout';\nimport { useMemberData } from '@/features/membership/hooks/useMemberData';\nimport { Card, CardBody, CardHeader } from '@/shared/components/ui/Card';\nimport { Button } from '@/shared/components/ui/Button';\nimport { Spinner } from '@/shared/components/ui/Spinner';\n\nfunction MemberPortalPage() {\n    const {\n        profile,\n        payments,\n        meetings,\n        activity,\n        isLoading,\n        totalPayments,\n        upcomingMeetings,\n        daysUntilExpiry,\n        isExpired,\n        isExpiringSoon,\n        fetchAll,\n    } = useMemberData();\n\n    useEffect(() => {\n        fetchAll();\n    }, [fetchAll]);\n\n    if (isLoading && !profile) {\n        return (\n            <PortalLayout title=\"Member Portal\" subtitle=\"Loading your dashboard...\">\n                <div className=\"flex items-center justify-center py-20\">\n                    <Spinner size=\"lg\" />\n                </div>\n            </PortalLayout>\n        );\n    }\n\n    const statusColor = isExpired\n        ? 'border-red-200 bg-red-50'\n        : isExpiringSoon\n            ? 'border-yellow-200 bg-yellow-50'\n            : 'border-green-200 bg-green-50';\n\n    const statusText = isExpired ? 'Expired' : isExpiringSoon ? 'Expiring Soon' : profile?.status || 'Active';\n    const statusTextColor = isExpired ? 'text-red-700' : isExpiringSoon ? 'text-yellow-700' : 'text-green-700';\n\n    return (\n        <PortalLayout title=\"Welcome Back!\" subtitle=\"Here's what's happening with your membership\">\n            {/* Stats Cards */}\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8\">\n                {/* Profile Card */}\n                <Card>\n                    <CardBody>\n                        <div className=\"flex items-center gap-4 mb-4\">\n                            <div className=\"w-16 h-16 bg-wiria-blue-dark text-white rounded-full flex items-center justify-center font-bold text-2xl\">\n                                {profile?.firstName?.[0]}{profile?.lastName?.[0]}\n                            </div>\n                            <div>\n                                <h2 className=\"text-xl font-bold text-wiria-blue-dark\">\n                                    {profile?.firstName} {profile?.lastName}\n                                </h2>\n                                <p className=\"text-sm text-gray-500\">{profile?.email}</p>\n                            </div>\n                        </div>\n                        <div className=\"space-y-2 text-sm\">\n                            <div className=\"flex justify-between\">\n                                <span className=\"text-gray-500\">Member ID:</span>\n                                <span className=\"font-semibold text-gray-800\">{profile?.memberNumber || '--'}</span>\n                            </div>\n                            <div className=\"flex justify-between items-center\">\n                                <span className=\"text-gray-500\">Status:</span>\n                                <span className={`px-2 py-0.5 rounded text-xs font-bold uppercase ${statusTextColor} ${statusColor}`}>\n                                    {statusText}\n                                </span>\n                            </div>\n                        </div>\n                        <Link to=\"/member-profile\">\n                            <Button className=\"w-full mt-4\" variant=\"primary\">View Profile</Button>\n                        </Link>\n                    </CardBody>\n                </Card>\n\n                {/* Membership Status Card */}\n                <Card className={`bg-gradient-to-br from-wiria-blue-dark to-blue-900 text-white ${isExpired ? 'ring-2 ring-red-500' : ''}`}>\n                    <CardBody>\n                        <h3 className=\"text-lg font-bold mb-2\">Membership</h3>\n                        <p className=\"text-blue-100 mb-4 text-sm\">\n                            {isExpired\n                                ? 'Your membership has expired'\n                                : daysUntilExpiry !== null\n                                    ? `Expires in ${daysUntilExpiry} days`\n                                    : 'Checking status...'}\n                        </p>\n                        <div className=\"mb-4\">\n                            <div className=\"flex justify-between text-xs mb-1\">\n                                <span>Joined</span>\n                                <span>\n                                    {profile?.joinedAt\n                                        ? new Date(profile.joinedAt).toLocaleDateString()\n                                        : '--'}\n                                </span>\n                            </div>\n                        </div>\n                        <Link to=\"/member-renewal\">\n                            <Button\n                                className=\"w-full bg-wiria-yellow text-white font-bold shadow-lg hover:scale-105 transition-all\"\n                            >\n                                Renew Membership\n                            </Button>\n                        </Link>\n                    </CardBody>\n                </Card>\n\n                {/* Payments Summary */}\n                <Card>\n                    <CardBody className=\"flex items-center justify-between\">\n                        <div>\n                            <p className=\"text-gray-500 text-sm mb-1\">Total Payments</p>\n                            <p className=\"text-2xl font-bold text-wiria-blue-dark\">\n                                KES {totalPayments.toLocaleString()}\n                            </p>\n                            <p className=\"text-xs text-gray-500\">{payments.length} transactions</p>\n                        </div>\n                        <div className=\"w-12 h-12 rounded-xl bg-green-100 text-green-600 flex items-center justify-center text-2xl\">\n                            ðŸ’³\n                        </div>\n                    </CardBody>\n                </Card>\n\n                {/* Meetings Count */}\n                <Card>\n                    <CardBody className=\"flex items-center justify-between\">\n                        <div>\n                            <p className=\"text-gray-500 text-sm mb-1\">Upcoming Meetings</p>\n                            <p className=\"text-2xl font-bold text-wiria-blue-dark\">{upcomingMeetings}</p>\n                            <p className=\"text-xs text-gray-500\">This month</p>\n                        </div>\n                        <div className=\"w-12 h-12 rounded-xl bg-blue-100 text-blue-600 flex items-center justify-center text-2xl\">\n                            ðŸ“…\n                        </div>\n                    </CardBody>\n                </Card>\n            </div>\n\n            {/* Two Column Layout */}\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n                {/* Upcoming Meetings */}\n                <Card>\n                    <CardHeader>\n                        <div className=\"flex justify-between items-center\">\n                            <h3 className=\"text-xl font-bold text-wiria-blue-dark\">Upcoming Meetings</h3>\n                            <Link to=\"/member-meetings\" className=\"text-sm text-wiria-blue-dark hover:text-wiria-yellow\">\n                                View All â†’\n                            </Link>\n                        </div>\n                    </CardHeader>\n                    <CardBody>\n                        <div className=\"space-y-3\">\n                            {meetings.length === 0 ? (\n                                <p className=\"text-gray-500 italic text-sm\">No upcoming meetings</p>\n                            ) : (\n                                meetings.slice(0, 3).map((meeting) => (\n                                    <div key={meeting.id} className=\"p-3 bg-gray-50 rounded-lg\">\n                                        <div className=\"flex justify-between items-start\">\n                                            <div>\n                                                <p className=\"font-semibold text-gray-800\">{meeting.title}</p>\n                                                <p className=\"text-xs text-gray-500\">\n                                                    {new Date(meeting.date).toLocaleDateString()} at {meeting.time}\n                                                </p>\n                                            </div>\n                                            <span className=\"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded\">\n                                                {meeting.type}\n                                            </span>\n                                        </div>\n                                    </div>\n                                ))\n                            )}\n                        </div>\n                    </CardBody>\n                </Card>\n\n                {/* Recent Activity */}\n                <Card>\n                    <CardHeader>\n                        <h3 className=\"text-xl font-bold text-wiria-blue-dark\">Recent Activity</h3>\n                    </CardHeader>\n                    <CardBody>\n                        <div className=\"space-y-3\">\n                            {activity.length === 0 ? (\n                                <p className=\"text-gray-500 italic text-sm\">No recent activity</p>\n                            ) : (\n                                activity.slice(0, 5).map((item) => (\n                                    <div key={item.id} className=\"flex items-start gap-3 text-sm\">\n                                        <div className=\"w-2 h-2 bg-wiria-blue-dark rounded-full mt-2\" />\n                                        <div>\n                                            <p className=\"text-gray-800\">{item.description}</p>\n                                            <p className=\"text-xs text-gray-500\">\n                                                {new Date(item.createdAt).toLocaleDateString()}\n                                            </p>\n                                        </div>\n                                    </div>\n                                ))\n                            )}\n                        </div>\n                    </CardBody>\n                </Card>\n            </div>\n        </PortalLayout>\n    );\n}\n\nexport default MemberPortalPage;\n"],"names":["MemberPortalPage","profile","payments","meetings","activity","isLoading","totalPayments","upcomingMeetings","daysUntilExpiry","isExpired","isExpiringSoon","fetchAll","useMemberData","useEffect","jsx","PortalLayout","Spinner","statusColor","statusText","statusTextColor","jsxs","Card","CardBody","_a","_b","Link","Button","CardHeader","meeting","item"],"mappings":"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"}