{"version":3,"file":"MembershipPage-CYIbG-QL.js","sources":["../../src/features/membership/hooks/useRegistration.ts","../../src/pages/membership/components/Hero.tsx","../../src/pages/membership/components/OfflineCard.tsx","../../src/pages/membership/components/SuccessCard.tsx","../../src/pages/membership/components/PendingCard.tsx","../../src/pages/membership/components/TypeToggle.tsx","../../src/pages/membership/components/GroupSection.tsx","../../src/pages/membership/components/PersonalSection.tsx","../../src/pages/membership/components/ContactSection.tsx","../../src/pages/membership/components/FeeSection.tsx","../../src/pages/membership/components/ConsentSection.tsx","../../src/pages/MembershipPage.tsx"],"sourcesContent":["/**\n * useRegistration Hook\n * Refactored to use shared usePaymentFlow hook\n */\n\nimport { useCallback, useState } from 'react';\n\nimport { usePaymentFlow } from '@/shared/hooks/usePaymentFlow';\nimport { API_ENDPOINTS } from '@/shared/services/api/endpoints';\nimport { useServices } from '@/shared/services/di';\n\nimport type { RegistrationFormData, RegistrationResponse } from '../types';\n\nexport function useRegistration() {\n  const { apiClient, notificationService } = useServices();\n  const [memberId, setMemberId] = useState<string | null>(null);\n  const [membershipNumber, setMembershipNumber] = useState<string | null>(null);\n\n  const paymentFlow = usePaymentFlow({\n    flowType: 'registration',\n    initiationEndpoint: API_ENDPOINTS.MEMBERS_REGISTER,\n    statusEndpoint: API_ENDPOINTS.PAYMENTS_STATUS,\n    messages: {\n      initiationSuccess: 'Registration successful!',\n      paymentCompleted: 'Payment completed! Your membership is now active.',\n      stkPushSent: 'STK push sent to your phone. Please complete the payment.',\n    },\n  });\n\n  const submitRegistration = useCallback(\n    async (data: RegistrationFormData) => {\n      try {\n        // Call API to register member\n        const response = await apiClient.post<RegistrationResponse>(\n          API_ENDPOINTS.MEMBERS_REGISTER,\n          data\n        );\n\n        const { member, checkoutRequestId, message } = response.data;\n\n        setMemberId(member.id);\n        setMembershipNumber(member.membershipNumber);\n\n        // Use shared payment flow for payment processing\n        const result = await paymentFlow.initiatePayment({\n          ...data,\n          memberId: member.id,\n        });\n\n        return {\n          success: result.success,\n          memberId: member.id,\n          membershipNumber: member.membershipNumber,\n          checkoutRequestId: checkoutRequestId ?? result.checkoutRequestId,\n          message,\n        };\n      } catch {\n        notificationService.error('Registration failed. Please try again.');\n        return { success: false };\n      }\n    },\n    [apiClient, notificationService, paymentFlow]\n  );\n\n  const resetRegistration = useCallback(() => {\n    setMemberId(null);\n    setMembershipNumber(null);\n    paymentFlow.resetPayment();\n  }, [paymentFlow]);\n\n  return {\n    // Registration-specific state\n    memberId,\n    membershipNumber,\n\n    // Payment flow state and actions (delegated to shared hook)\n    isSubmitting: paymentFlow.isSubmitting,\n    checkoutRequestId: paymentFlow.checkoutRequestId,\n    paymentStatus: paymentFlow.paymentStatus,\n\n    // Actions\n    submitRegistration,\n    checkPaymentStatus: paymentFlow.checkPaymentStatus,\n    resetRegistration,\n  };\n}\n\n// Re-export PaymentStatus for convenience\nexport { PaymentStatus } from '@/shared/types/payment';\n","import { memo } from 'react';\n\nimport { motion } from 'framer-motion';\n\nexport const MembershipHero = memo(function MembershipHero() {\n  return (\n    <section className=\"relative overflow-hidden bg-gradient-to-br from-wiria-blue-dark to-blue-900 py-20 text-white\">\n      <div className=\"absolute inset-0 opacity-10\">\n        <div className=\"absolute left-0 top-0 h-64 w-64 -translate-x-1/2 -translate-y-1/2 rounded-full bg-wiria-yellow blur-3xl\" />\n        <div className=\"absolute bottom-0 right-0 h-96 w-96 translate-x-1/2 translate-y-1/2 rounded-full bg-blue-400 blur-3xl\" />\n      </div>\n      <div className=\"container relative z-10 mx-auto px-4 text-center\">\n        <motion.h1\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          className=\"mb-4 text-4xl font-bold md:text-5xl\"\n        >\n          Become a Member\n        </motion.h1>\n        <motion.p\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ delay: 0.1 }}\n          className=\"mx-auto max-w-2xl text-xl text-gray-200\"\n        >\n          Join WIRIA CBO and be part of positive change in our community\n        </motion.p>\n      </div>\n    </section>\n  );\n});\n","import { memo } from 'react';\n\nimport { motion } from 'framer-motion';\nimport { Link } from 'react-router-dom';\n\nimport { Button } from '@/shared/components/ui/Button';\nimport { Card, CardBody } from '@/shared/components/ui/Card';\n\nexport const OfflineInfoCard = memo(function OfflineInfoCard() {\n  return (\n    <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }}>\n      <Card className=\"mb-8 overflow-hidden border-2 border-wiria-yellow bg-white shadow-xl\">\n        <div className=\"h-2 bg-gradient-to-r from-wiria-yellow to-amber-500\" />\n        <CardBody>\n          <div className=\"py-8 text-center\">\n            <div className=\"mb-4 text-6xl\">ðŸ‘‹</div>\n            <h2 className=\"mb-4 text-3xl font-bold text-wiria-blue-dark\">Membership Information</h2>\n            <p className=\"mx-auto mb-6 max-w-xl text-gray-700\">\n              Thank you for your interest in joining WIRIA CBO! Our online registration system is\n              currently being set up. Please check back soon or contact us directly to become a\n              member.\n            </p>\n            <div className=\"mx-auto mb-6 max-w-md rounded-xl bg-gray-50 p-6\">\n              <h3 className=\"mb-3 font-bold text-gray-900\">Membership Fees</h3>\n              <div className=\"space-y-2 text-sm text-gray-600\">\n                <div className=\"flex justify-between\">\n                  <span>Individual Registration:</span>\n                  <span className=\"font-semibold\">KES 500</span>\n                </div>\n                <div className=\"flex justify-between\">\n                  <span>Individual Subscription:</span>\n                  <span className=\"font-semibold\">KES 1,000</span>\n                </div>\n                <div className=\"flex justify-between\">\n                  <span>Group Registration (per member):</span>\n                  <span className=\"font-semibold\">KES 250</span>\n                </div>\n                <div className=\"flex justify-between\">\n                  <span>Group Subscription (per member):</span>\n                  <span className=\"font-semibold\">KES 500</span>\n                </div>\n              </div>\n            </div>\n            <Link to=\"/contact\">\n              <Button size=\"lg\" className=\"px-10\">\n                Contact Us to Register\n              </Button>\n            </Link>\n          </div>\n        </CardBody>\n      </Card>\n    </motion.div>\n  );\n});\n","import { memo } from 'react';\n\nimport { motion } from 'framer-motion';\nimport { Link } from 'react-router-dom';\n\nimport { Button } from '@/shared/components/ui/Button';\nimport { Card, CardBody } from '@/shared/components/ui/Card';\n\ninterface RegistrationSuccessProps {\n  membershipNumber: string | null;\n  onStartOver: () => void;\n}\n\nexport const RegistrationSuccess = memo(function RegistrationSuccess({\n  membershipNumber,\n  onStartOver,\n}: RegistrationSuccessProps) {\n  return (\n    <motion.div initial={{ scale: 0.9, opacity: 0 }} animate={{ scale: 1, opacity: 1 }}>\n      <Card className=\"mb-8 overflow-hidden border-2 border-green-500 bg-white shadow-xl shadow-green-100\">\n        <div className=\"h-2 bg-green-500\" />\n        <CardBody>\n          <div className=\"py-8 text-center\">\n            <motion.div\n              initial={{ scale: 0 }}\n              animate={{ scale: 1 }}\n              transition={{ type: 'spring', stiffness: 260, damping: 20 }}\n              className=\"mb-4 text-6xl\"\n            >\n              ðŸŽ‰\n            </motion.div>\n            <h2 className=\"mb-4 text-3xl font-bold text-green-800\">Welcome to WIRIA CBO!</h2>\n            <p className=\"mb-2 text-green-700\">Your membership has been successfully activated.</p>\n            <p className=\"mb-6 inline-block rounded-lg border border-green-100 bg-green-50 px-8 py-3 text-lg font-semibold text-green-800\">\n              Membership Number: <span className=\"ml-2 font-mono text-2xl\">{membershipNumber}</span>\n            </p>\n            <div className=\"flex flex-col justify-center gap-4 sm:flex-row\">\n              <Link to=\"/member-login\">\n                <Button size=\"lg\" className=\"px-10\">\n                  Login to Member Portal\n                </Button>\n              </Link>\n              <Button variant=\"outline\" onClick={onStartOver} size=\"lg\">\n                Register Another Member\n              </Button>\n            </div>\n          </div>\n        </CardBody>\n      </Card>\n    </motion.div>\n  );\n});\n","import { memo } from 'react';\n\nimport { motion } from 'framer-motion';\n\nimport { Card, CardBody } from '@/shared/components/ui/Card';\nimport { Spinner } from '@/shared/components/ui/Spinner';\n\nexport const PendingPaymentCard = memo(function PendingPaymentCard() {\n  return (\n    <motion.div initial={{ y: 20, opacity: 0 }} animate={{ y: 0, opacity: 1 }}>\n      <Card className=\"mb-8 border-2 border-blue-500 bg-white\">\n        <CardBody>\n          <div className=\"py-6 text-center\">\n            <Spinner size=\"lg\" className=\"mx-auto mb-4 border-blue-500\" />\n            <h3 className=\"mb-2 text-xl font-bold text-wiria-blue-dark\">Waiting for Payment</h3>\n            <p className=\"mb-4 text-gray-700\">\n              Please check your phone and complete the M-Pesa payment.\n            </p>\n            <div className=\"inline-block animate-pulse rounded-md bg-blue-50 p-3 text-sm text-blue-800\">\n              We're checking your payment status...\n            </div>\n          </div>\n        </CardBody>\n      </Card>\n    </motion.div>\n  );\n});\n","import { memo } from 'react';\n\ninterface MembershipTypeToggleProps {\n  value: 'INDIVIDUAL' | 'GROUP';\n  onChange: (value: 'INDIVIDUAL' | 'GROUP') => void;\n  isDisabled?: boolean;\n}\n\nexport const MembershipTypeToggle = memo(function MembershipTypeToggle({\n  value,\n  onChange,\n  isDisabled,\n}: MembershipTypeToggleProps) {\n  return (\n    <div className=\"flex w-fit rounded-xl bg-gray-100 p-1\">\n      <button\n        type=\"button\"\n        disabled={isDisabled}\n        onClick={() => onChange('INDIVIDUAL')}\n        className={`rounded-lg px-4 py-2 text-sm font-semibold transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-wiria-blue-dark/50 ${\n          value === 'INDIVIDUAL'\n            ? 'bg-white text-wiria-blue-dark shadow-sm'\n            : 'text-gray-500 hover:text-gray-700'\n        }`}\n      >\n        Individual\n      </button>\n      <button\n        type=\"button\"\n        disabled={isDisabled}\n        onClick={() => onChange('GROUP')}\n        className={`rounded-lg px-4 py-2 text-sm font-semibold transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-wiria-blue-dark/50 ${\n          value === 'GROUP'\n            ? 'bg-white text-wiria-blue-dark shadow-sm'\n            : 'text-gray-500 hover:text-gray-700'\n        }`}\n      >\n        Group\n      </button>\n    </div>\n  );\n});\n","import { memo } from 'react';\n\nimport { motion } from 'framer-motion';\n\nimport { FormField } from '@/shared/components/ui/form';\n\ninterface GroupRegistrationSectionProps {\n  isDisabled: boolean;\n}\n\nexport const GroupRegistrationSection = memo(function GroupRegistrationSection({\n  isDisabled,\n}: GroupRegistrationSectionProps) {\n  return (\n    <motion.div\n      key=\"group-fields\"\n      initial={{ height: 0, opacity: 0 }}\n      animate={{ height: 'auto', opacity: 1 }}\n      exit={{ height: 0, opacity: 0 }}\n      className=\"space-y-4 overflow-hidden border-b border-gray-100 pb-6\"\n    >\n      <div className=\"mb-4 flex items-center gap-3 rounded-xl bg-blue-50 p-4\">\n        <div className=\"rounded-lg bg-blue-100 p-2 text-blue-600\">\n          <svg className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n            <path\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              strokeWidth={2}\n              d=\"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z\"\n            />\n          </svg>\n        </div>\n        <p className=\"text-sm text-blue-800\">\n          Group registration allows for discounted collective renewals and centralized management.\n        </p>\n      </div>\n      <div className=\"grid grid-cols-1 gap-6 md:grid-cols-2\">\n        <FormField\n          name=\"groupName\"\n          label=\"Group Name\"\n          placeholder=\"e.g. Unity Youth Group\"\n          disabled={isDisabled}\n        />\n        <FormField\n          name=\"memberCount\"\n          type=\"number\"\n          label=\"Initial Member Count\"\n          disabled={isDisabled}\n        />\n      </div>\n    </motion.div>\n  );\n});\n","import { memo } from 'react';\n\nimport { FormField, FormSelectField } from '@/shared/components/ui/form';\n\ninterface PersonalInfoSectionProps {\n  isDisabled: boolean;\n  membershipType: 'INDIVIDUAL' | 'GROUP';\n}\n\nexport const PersonalInfoSection = memo(function PersonalInfoSection({\n  isDisabled,\n  membershipType,\n}: PersonalInfoSectionProps) {\n  return (\n    <div>\n      <h3 className=\"mb-6 flex items-center gap-2 text-lg font-bold text-gray-900\">\n        <span className=\"flex h-8 w-8 items-center justify-center rounded-full bg-wiria-blue-dark text-sm font-bold text-white\">\n          1\n        </span>\n        {membershipType === 'GROUP'\n          ? 'Primary Contact / Representative Information'\n          : 'Personal Information'}\n      </h3>\n      <div className=\"grid grid-cols-1 gap-6 md:grid-cols-2\">\n        <FormField name=\"firstName\" label=\"First Name\" disabled={isDisabled} />\n        <FormField name=\"lastName\" label=\"Last Name\" disabled={isDisabled} />\n        <FormField\n          name=\"dateOfBirth\"\n          type=\"date\"\n          label={membershipType === 'INDIVIDUAL' ? 'Date of Birth *' : 'Date of Birth'}\n          disabled={isDisabled}\n        />\n        <FormSelectField\n          name=\"gender\"\n          label={membershipType === 'INDIVIDUAL' ? 'Gender *' : 'Gender'}\n          disabled={isDisabled}\n          options={[\n            { value: 'MALE', label: 'Male' },\n            { value: 'FEMALE', label: 'Female' },\n            { value: 'OTHER', label: 'Other' },\n          ]}\n        />\n        <FormField\n          name=\"nationalId\"\n          label={\n            membershipType === 'GROUP'\n              ? 'Group Registration Number (if applicable)'\n              : 'National ID Number *'\n          }\n          disabled={isDisabled}\n        />\n      </div>\n    </div>\n  );\n});\n","import { memo } from 'react';\n\nimport { FormField } from '@/shared/components/ui/form';\n\ninterface ContactLocationSectionProps {\n  isDisabled: boolean;\n}\n\nexport const ContactLocationSection = memo(function ContactLocationSection({\n  isDisabled,\n}: ContactLocationSectionProps) {\n  return (\n    <div>\n      <h3 className=\"mb-6 flex items-center gap-2 text-lg font-bold text-gray-900\">\n        <span className=\"flex h-8 w-8 items-center justify-center rounded-full bg-wiria-blue-dark text-sm font-bold text-white\">\n          2\n        </span>\n        Contact & Location\n      </h3>\n      <div className=\"grid grid-cols-1 gap-6 md:grid-cols-2\">\n        <FormField name=\"email\" type=\"email\" label=\"Email Address\" disabled={isDisabled} />\n        <FormField\n          name=\"phoneNumber\"\n          label=\"Phone Number\"\n          placeholder=\"0712345678\"\n          description=\"Your M-Pesa registered number\"\n          disabled={isDisabled}\n        />\n        <FormField name=\"county\" label=\"County\" disabled={isDisabled} />\n        <FormField name=\"subCounty\" label=\"Sub-County\" disabled={isDisabled} />\n        <FormField name=\"ward\" label=\"Ward\" disabled={isDisabled} />\n        <FormField name=\"village\" label=\"Village\" disabled={isDisabled} />\n      </div>\n    </div>\n  );\n});\n","import { memo } from 'react';\n\nimport { motion } from 'framer-motion';\n\nimport { PaymentInstructions } from '@/features/donations/components/PaymentInstructions';\nimport { PaymentMethodToggle } from '@/features/donations/components/PaymentMethodToggle';\n\ninterface FeeBreakdown {\n  registration: { rate: number; count: number; subtotal: number };\n  subscription: { rate: number; count: number; subtotal: number };\n  total: number;\n}\n\ninterface FeeBreakdownSectionProps {\n  feeBreakdown: FeeBreakdown;\n  totalFee: number;\n  paymentMethod: 'STK_PUSH' | 'MANUAL';\n  onPaymentMethodChange: (method: 'STK_PUSH' | 'MANUAL') => void;\n  isDisabled: boolean;\n}\n\nexport const FeeBreakdownSection = memo(function FeeBreakdownSection({\n  feeBreakdown,\n  totalFee,\n  paymentMethod,\n  onPaymentMethodChange,\n  isDisabled,\n}: FeeBreakdownSectionProps) {\n  return (\n    <div className=\"rounded-2xl border border-gray-100 bg-gray-50 p-6\">\n      <h3 className=\"mb-6 flex items-center gap-2 text-lg font-bold text-gray-900\">\n        <svg\n          className=\"h-5 w-5 text-wiria-blue-dark\"\n          fill=\"none\"\n          viewBox=\"0 0 24 24\"\n          stroke=\"currentColor\"\n        >\n          <path\n            strokeLinecap=\"round\"\n            strokeLinejoin=\"round\"\n            strokeWidth={2}\n            d=\"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z\"\n          />\n        </svg>\n        Fee Breakdown\n      </h3>\n\n      <div className=\"mb-8 space-y-4\">\n        <div className=\"flex items-center justify-between border-b border-dashed border-gray-200 py-2\">\n          <div className=\"text-gray-600\">\n            <span className=\"font-medium text-gray-900\">Registration Fee</span>\n            <p className=\"text-xs text-gray-500\">\n              {feeBreakdown.registration.count}{' '}\n              {feeBreakdown.registration.count === 1 ? 'member' : 'members'} Ã— KES{' '}\n              {feeBreakdown.registration.rate.toLocaleString()}\n            </p>\n          </div>\n          <span className=\"font-semibold text-gray-900\">\n            KES {feeBreakdown.registration.subtotal.toLocaleString()}\n          </span>\n        </div>\n\n        <div className=\"flex items-center justify-between border-b border-dashed border-gray-200 py-2\">\n          <div className=\"text-gray-600\">\n            <span className=\"font-medium text-gray-900\">Subscription Fee</span>\n            <p className=\"text-xs text-gray-500\">\n              {feeBreakdown.subscription.count}{' '}\n              {feeBreakdown.subscription.count === 1 ? 'member' : 'members'} Ã— KES{' '}\n              {feeBreakdown.subscription.rate.toLocaleString()}\n            </p>\n          </div>\n          <span className=\"font-semibold text-gray-900\">\n            KES {feeBreakdown.subscription.subtotal.toLocaleString()}\n          </span>\n        </div>\n\n        <div className=\"flex items-center justify-between pt-2\">\n          <span className=\"text-lg font-bold text-gray-900\">Total Amount</span>\n          <motion.span\n            key={totalFee}\n            initial={{ scale: 1.1, color: '#1e40af' }}\n            animate={{ scale: 1, color: '#1e3a8a' }}\n            className=\"font-mono text-2xl font-bold text-wiria-blue-dark\"\n          >\n            KES {totalFee.toLocaleString()}\n          </motion.span>\n        </div>\n      </div>\n\n      <div className=\"mb-6\">\n        <PaymentMethodToggle\n          selected={paymentMethod}\n          onChange={onPaymentMethodChange}\n          disabled={isDisabled}\n        />\n      </div>\n\n      <PaymentInstructions\n        paymentMethod={paymentMethod}\n        amount={totalFee}\n        submitLabel=\"Complete Registration\"\n        accountNumber=\"MEMBERSHIP\"\n      />\n    </div>\n  );\n});\n","import { memo } from 'react';\n\nimport { useFormContext } from 'react-hook-form';\nimport { Link } from 'react-router-dom';\n\ninterface ConsentCheckboxesProps {\n  isDisabled: boolean;\n}\n\nexport const ConsentCheckboxes = memo(function ConsentCheckboxes({\n  isDisabled,\n}: ConsentCheckboxesProps) {\n  const {\n    register,\n    formState: { errors },\n  } = useFormContext();\n\n  return (\n    <div className=\"space-y-3 rounded-xl border border-gray-100 p-4\">\n      <div className=\"flex items-start gap-3\">\n        <input\n          type=\"checkbox\"\n          id=\"agreedToTerms\"\n          {...register('agreedToTerms')}\n          disabled={isDisabled}\n          className=\"mt-1 h-5 w-5 rounded border-gray-300 text-wiria-blue-dark focus:ring-wiria-blue-dark\"\n        />\n        <label htmlFor=\"agreedToTerms\" className=\"text-sm leading-tight text-gray-700\">\n          I agree to the{' '}\n          <Link to=\"/safeguarding\" className=\"font-semibold text-wiria-blue-dark hover:underline\">\n            terms and conditions\n          </Link>\n          <span className=\"text-red-500\">*</span>\n        </label>\n      </div>\n      {errors['agreedToTerms'] && (\n        <p className=\"pl-8 text-sm text-red-600\">{errors['agreedToTerms']?.message as string}</p>\n      )}\n\n      <div className=\"flex items-start gap-3\">\n        <input\n          type=\"checkbox\"\n          id=\"consentToDataProcessing\"\n          {...register('consentToDataProcessing')}\n          disabled={isDisabled}\n          className=\"mt-1 h-5 w-5 rounded border-gray-300 text-wiria-blue-dark focus:ring-wiria-blue-dark\"\n        />\n        <label htmlFor=\"consentToDataProcessing\" className=\"text-sm leading-tight text-gray-700\">\n          I consent to the processing of my personal data according to the privacy policy\n          <span className=\"text-red-500\">*</span>\n        </label>\n      </div>\n      {errors['consentToDataProcessing'] && (\n        <p className=\"pl-8 text-sm text-red-600\">\n          {errors['consentToDataProcessing']?.message as string}\n        </p>\n      )}\n    </div>\n  );\n});\n","import { useEffect } from 'react';\n\nimport { zodResolver } from '@hookform/resolvers/zod';\nimport { AnimatePresence } from 'framer-motion';\nimport { FormProvider, useForm } from 'react-hook-form';\nimport { Link, useNavigate } from 'react-router-dom';\n\nimport { useAuth } from '@/features/auth/context/useAuth';\nimport { usePaymentPoller } from '@/features/donations/hooks/usePaymentPoller';\nimport { useRegistration, PaymentStatus } from '@/features/membership/hooks/useRegistration';\nimport type { RegistrationFormSchema } from '@/features/membership/validation';\nimport { registrationSchema } from '@/features/membership/validation';\nimport { SEO } from '@/shared/components/Seo';\nimport { Button } from '@/shared/components/ui/Button';\nimport { Card, CardBody } from '@/shared/components/ui/Card';\nimport { useFeeCalculation } from '@/shared/hooks/useFeeCalculation';\nimport { useBackendStatus } from '@/shared/services/useBackendStatus';\nimport { UserRole } from '@/shared/types';\nimport { formatPhoneNumber } from '@/shared/utils/helpers';\n\nimport {\n  ConsentCheckboxes,\n  ContactLocationSection,\n  FeeBreakdownSection,\n  GroupRegistrationSection,\n  MembershipHero,\n  MembershipTypeToggle,\n  OfflineInfoCard,\n  PendingPaymentCard,\n  PersonalInfoSection,\n  RegistrationSuccess,\n} from './membership/components';\n\ninterface MembershipRegistrationLayoutProps {\n  isBackendConnected: boolean;\n  paymentStatus: PaymentStatus | null;\n  paymentMethod: RegistrationFormSchema['paymentMethod'];\n  membershipType: RegistrationFormSchema['membershipType'];\n  membershipNumber: string | null;\n  handleStartOver: () => void;\n  isFormDisabled: boolean;\n  feeBreakdown: ReturnType<typeof useFeeCalculation>;\n  totalFee: number;\n  isSubmitting: boolean;\n  onMembershipTypeChange: (value: RegistrationFormSchema['membershipType']) => void;\n  onPaymentMethodChange: (method: RegistrationFormSchema['paymentMethod']) => void;\n  onSubmitForm: (event: React.FormEvent<HTMLFormElement>) => void;\n}\n\nfunction MembershipRegistrationLayout({\n  isBackendConnected,\n  paymentStatus,\n  paymentMethod,\n  membershipType,\n  membershipNumber,\n  handleStartOver,\n  isFormDisabled,\n  feeBreakdown,\n  totalFee,\n  isSubmitting,\n  onMembershipTypeChange,\n  onPaymentMethodChange,\n  onSubmitForm,\n}: MembershipRegistrationLayoutProps) {\n  return (\n    <section className=\"py-16\">\n      <div className=\"container mx-auto px-4\">\n        <div className=\"mx-auto max-w-3xl\">\n          {!isBackendConnected && <OfflineInfoCard />}\n\n          {isBackendConnected && (\n            <>\n              {paymentStatus === PaymentStatus.COMPLETED && (\n                <RegistrationSuccess\n                  membershipNumber={membershipNumber}\n                  onStartOver={handleStartOver}\n                />\n              )}\n\n              {paymentStatus === PaymentStatus.PENDING && paymentMethod === 'STK_PUSH' && (\n                <PendingPaymentCard />\n              )}\n\n              {paymentStatus !== PaymentStatus.COMPLETED && (\n                <Card className=\"border-none shadow-2xl\">\n                  <CardBody className=\"p-8\">\n                    <div className=\"mb-8 flex flex-col justify-between gap-4 md:flex-row md:items-center\">\n                      <h2 className=\"text-2xl font-bold text-wiria-blue-dark\">\n                        Membership Registration\n                      </h2>\n\n                      <MembershipTypeToggle\n                        value={membershipType}\n                        onChange={onMembershipTypeChange}\n                        isDisabled={isFormDisabled}\n                      />\n                    </div>\n\n                    <form onSubmit={onSubmitForm} className=\"space-y-8\">\n                      <AnimatePresence mode=\"wait\">\n                        {membershipType === 'GROUP' && (\n                          <GroupRegistrationSection isDisabled={isFormDisabled} />\n                        )}\n                      </AnimatePresence>\n\n                      <PersonalInfoSection\n                        isDisabled={isFormDisabled}\n                        membershipType={membershipType}\n                      />\n\n                      <ContactLocationSection isDisabled={isFormDisabled} />\n\n                      <FeeBreakdownSection\n                        feeBreakdown={feeBreakdown}\n                        totalFee={totalFee}\n                        paymentMethod={paymentMethod}\n                        onPaymentMethodChange={onPaymentMethodChange}\n                        isDisabled={isFormDisabled}\n                      />\n\n                      <ConsentCheckboxes isDisabled={isFormDisabled} />\n\n                      <Button\n                        type=\"submit\"\n                        fullWidth\n                        size=\"lg\"\n                        isLoading={isSubmitting}\n                        disabled={paymentStatus === PaymentStatus.PENDING}\n                        className=\"h-14 text-lg shadow-lg transition-all hover:shadow-xl\"\n                      >\n                        {isSubmitting\n                          ? 'Processing...'\n                          : paymentStatus === PaymentStatus.PENDING\n                            ? 'Payment Pending...'\n                            : 'Complete Registration'}\n                      </Button>\n\n                      <p className=\"text-center text-sm text-gray-600\">\n                        Already a member?{' '}\n                        <Link\n                          to=\"/member-login\"\n                          className=\"font-bold text-wiria-blue-dark hover:underline\"\n                        >\n                          Login here\n                        </Link>\n                      </p>\n                    </form>\n                  </CardBody>\n                </Card>\n              )}\n            </>\n          )}\n        </div>\n      </div>\n    </section>\n  );\n}\n\nfunction MembershipPage() {\n  const { user, isAuthenticated } = useAuth();\n  const { isBackendConnected } = useBackendStatus();\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    if (isAuthenticated && user?.role === UserRole.MEMBER) {\n      navigate('/member-portal', { replace: true });\n    }\n  }, [isAuthenticated, user, navigate]);\n\n  const methods = useForm<RegistrationFormSchema>({\n    resolver: zodResolver(registrationSchema),\n    defaultValues: {\n      membershipType: 'INDIVIDUAL',\n      memberCount: 1,\n      firstName: '',\n      lastName: '',\n      email: '',\n      phoneNumber: '',\n      nationalId: '',\n      county: '',\n      subCounty: '',\n      ward: '',\n      village: '',\n      agreedToTerms: false,\n      consentToDataProcessing: false,\n      paymentMethod: 'STK_PUSH',\n      gender: undefined,\n    },\n  });\n\n  const { handleSubmit, watch, setValue } = methods;\n\n  const membershipType = watch('membershipType');\n  const memberCount = Number(watch('memberCount') ?? 1);\n\n  const feeBreakdown = useFeeCalculation({\n    membershipType,\n    memberCount,\n  });\n\n  const totalFee = feeBreakdown.total;\n\n  useEffect(() => {\n    setValue('membershipFee', totalFee);\n  }, [totalFee, setValue]);\n\n  const {\n    submitRegistration,\n    checkPaymentStatus,\n    resetRegistration,\n    isSubmitting,\n    memberId,\n    membershipNumber,\n    paymentStatus,\n  } = useRegistration();\n\n  const paymentMethod = watch('paymentMethod');\n\n  // Poll payment status for STK Push\n  usePaymentPoller({\n    donationId: memberId,\n    isActive: paymentStatus === PaymentStatus.PENDING && paymentMethod === 'STK_PUSH',\n    onStatusCheck: checkPaymentStatus,\n  });\n\n  const onSubmit = async (data: RegistrationFormSchema) => {\n    const formattedData = {\n      ...data,\n      phoneNumber: formatPhoneNumber(data.phoneNumber),\n    };\n    await submitRegistration(formattedData);\n  };\n\n  const handleStartOver = () => {\n    resetRegistration();\n    window.location.reload();\n  };\n\n  const isFormDisabled = isSubmitting || paymentStatus === PaymentStatus.PENDING;\n\n  return (\n    <FormProvider {...methods}>\n      <SEO\n        title=\"Become a Member\"\n        description=\"Join WIRIA CBO and become part of our mission. Individual and Group memberships available.\"\n        keywords=\"Join WIRIA, Membership, Registration, Community, CBO\"\n      />\n      <MembershipHero />\n      <MembershipRegistrationLayout\n        isBackendConnected={isBackendConnected}\n        paymentStatus={paymentStatus}\n        paymentMethod={paymentMethod}\n        membershipType={membershipType}\n        membershipNumber={membershipNumber}\n        handleStartOver={handleStartOver}\n        isFormDisabled={isFormDisabled}\n        feeBreakdown={feeBreakdown}\n        totalFee={totalFee}\n        isSubmitting={isSubmitting}\n        onMembershipTypeChange={(value) => setValue('membershipType', value)}\n        onPaymentMethodChange={(method) => setValue('paymentMethod', method)}\n        onSubmitForm={(event) => {\n          event.preventDefault();\n          void handleSubmit(onSubmit)(event);\n        }}\n      />\n    </FormProvider>\n  );\n}\n\nexport default MembershipPage;\n"],"names":["useRegistration","apiClient","notificationService","useServices","memberId","setMemberId","useState","membershipNumber","setMembershipNumber","paymentFlow","usePaymentFlow","API_ENDPOINTS","submitRegistration","useCallback","data","response","member","checkoutRequestId","message","result","resetRegistration","MembershipHero","memo","jsxs","jsx","motion","OfflineInfoCard","Card","CardBody","Link","Button","RegistrationSuccess","onStartOver","PendingPaymentCard","Spinner","MembershipTypeToggle","value","onChange","isDisabled","GroupRegistrationSection","FormField","PersonalInfoSection","membershipType","FormSelectField","ContactLocationSection","FeeBreakdownSection","feeBreakdown","totalFee","paymentMethod","onPaymentMethodChange","PaymentMethodToggle","PaymentInstructions","ConsentCheckboxes","register","errors","useFormContext","MembershipRegistrationLayout","isBackendConnected","paymentStatus","handleStartOver","isFormDisabled","isSubmitting","onMembershipTypeChange","onSubmitForm","Fragment","PaymentStatus","AnimatePresence","MembershipPage","user","isAuthenticated","useAuth","useBackendStatus","navigate","useNavigate","useEffect","UserRole","methods","useForm","zodResolver","registrationSchema","handleSubmit","watch","setValue","memberCount","useFeeCalculation","checkPaymentStatus","usePaymentPoller","onSubmit","formattedData","formatPhoneNumber","FormProvider","SEO","method","event"],"mappings":"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"}