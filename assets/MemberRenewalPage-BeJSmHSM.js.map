{"version":3,"file":"MemberRenewalPage-BeJSmHSM.js","sources":["../../src/features/membership/hooks/useRenewal.ts","../../src/pages/renewal/components.tsx","../../src/pages/MemberRenewalPage.tsx"],"sourcesContent":["/**\n * useRenewal Hook\n */\n\nimport { useState } from 'react';\nimport { apiClient } from '@/shared/services/api/client';\nimport { notificationService } from '@/shared/services/notification/notificationService';\nimport { API_ENDPOINTS } from '@/shared/services/api/endpoints';\n\nexport interface RenewalData {\n  paymentMethod: 'STK_PUSH' | 'MANUAL';\n  phoneNumber?: string;\n  transactionCode?: string;\n  memberCount?: number;\n  amount: number;\n}\n\nexport interface RenewalResponse {\n  success: boolean;\n  message: string;\n  checkoutRequestId?: string;\n  transactionId?: string;\n}\n\nexport function useRenewal() {\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [paymentStatus, setPaymentStatus] = useState<'PENDING' | 'SUCCESS' | 'FAILED' | null>(null);\n  const [transactionId, setTransactionId] = useState<string | null>(null);\n\n  const submitRenewal = async (data: RenewalData) => {\n    setIsSubmitting(true);\n    setPaymentStatus(null);\n    setTransactionId(null);\n\n    try {\n      const response = await apiClient.post<RenewalResponse>(API_ENDPOINTS.MEMBERS_RENEW, data);\n\n      const { checkoutRequestId, message } = response as RenewalResponse;\n\n      if (data.paymentMethod === 'STK_PUSH' && checkoutRequestId) {\n        setTransactionId(checkoutRequestId);\n        setPaymentStatus('PENDING');\n        notificationService.info('STK push sent to your phone. Please complete the payment.');\n      } else if (data.paymentMethod === 'MANUAL') {\n        setPaymentStatus('PENDING'); // Wait for admin verification\n        notificationService.success('Transaction submitted for verification.');\n      } else {\n        setPaymentStatus('SUCCESS');\n        notificationService.success(message || 'Renewal successful!');\n      }\n\n      return { success: true };\n    } catch (_error) {\n      notificationService.error('Renewal failed. Please try again.');\n      return { success: false };\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const checkPaymentStatus = async (tid: string) => {\n    try {\n      const response = await apiClient.get<{ data: { status: string } }>(\n        `${API_ENDPOINTS.PAYMENTS_STATUS}/${tid}`\n      );\n\n      const { status } = response.data;\n      if (status === 'COMPLETED') {\n        setPaymentStatus('SUCCESS');\n        return 'SUCCESS';\n      } else if (status === 'FAILED') {\n        setPaymentStatus('FAILED');\n        return 'FAILED';\n      }\n      return 'PENDING';\n    } catch (_error) {\n      return 'PENDING';\n    }\n  };\n\n  return {\n    submitRenewal,\n    checkPaymentStatus,\n    isSubmitting,\n    paymentStatus,\n    transactionId,\n  };\n}\n","/**\n * Renewal Components\n * Extracted from MemberRenewalPage for better modularity\n */\n\nimport { Card, CardBody } from '@/shared/components/ui/Card';\nimport { Button } from '@/shared/components/ui/Button';\nimport { motion } from 'framer-motion';\nimport { useNavigate } from 'react-router-dom';\n\ninterface RenewalSuccessProps {\n    onNavigate?: () => void;\n}\n\n/**\n * Success message displayed after successful renewal\n */\nexport function RenewalSuccess({ onNavigate }: RenewalSuccessProps) {\n    const navigate = useNavigate();\n\n    const handleNavigate = () => {\n        if (onNavigate) {\n            onNavigate();\n        } else {\n            navigate('/member-portal');\n        }\n    };\n\n    return (\n        <div className=\"mx-auto max-w-2xl py-12\">\n            <Card className=\"border-none bg-gradient-to-b from-white to-blue-50/30 p-12 text-center shadow-2xl\">\n                <CardBody>\n                    <div className=\"mx-auto mb-8 flex h-24 w-24 items-center justify-center rounded-full bg-green-100 shadow-inner\">\n                        <svg\n                            className=\"h-12 w-12 text-green-600\"\n                            fill=\"none\"\n                            viewBox=\"0 0 24 24\"\n                            stroke=\"currentColor\"\n                            aria-hidden=\"true\"\n                        >\n                            <path\n                                strokeLinecap=\"round\"\n                                strokeLinejoin=\"round\"\n                                strokeWidth={3}\n                                d=\"M5 13l4 4L19 7\"\n                            />\n                        </svg>\n                    </div>\n                    <h2 className=\"mb-4 text-3xl font-bold text-gray-900\">Renewal Complete!</h2>\n                    <p className=\"mb-10 text-lg leading-relaxed text-gray-600\">\n                        Thank you for renewing your WIRIA membership. Your account has been updated\n                        successfully.\n                    </p>\n                    <Button\n                        size=\"lg\"\n                        className=\"h-14 px-12 text-lg shadow-lg\"\n                        onClick={handleNavigate}\n                    >\n                        Return to Dashboard\n                    </Button>\n                </CardBody>\n            </Card>\n        </div>\n    );\n}\n\ninterface RenewalPendingProps {\n    paymentMethod: 'STK_PUSH' | 'MANUAL';\n    isSubmitting: boolean;\n    onRefresh: () => void;\n}\n\n/**\n * Pending payment status indicator\n */\nexport function RenewalPending({ paymentMethod, isSubmitting, onRefresh }: RenewalPendingProps) {\n    return (\n        <motion.div\n            key=\"pending\"\n            initial={{ opacity: 0, scale: 0.95 }}\n            animate={{ opacity: 1, scale: 1 }}\n            className=\"py-16 text-center\"\n        >\n            <Card className=\"mx-auto max-w-md border-none p-12 shadow-2xl\">\n                <CardBody>\n                    <div className=\"relative mb-10\">\n                        <div\n                            className=\"mx-auto h-24 w-24 animate-spin rounded-full border-4 border-blue-100 border-t-wiria-blue-dark\"\n                            role=\"progressbar\"\n                            aria-label=\"Processing payment\"\n                        />\n                        <div className=\"absolute inset-0 flex items-center justify-center font-bold text-wiria-blue-dark\">\n                            {paymentMethod === 'STK_PUSH' ? 'SMS' : 'Wait'}\n                        </div>\n                    </div>\n                    <h3 className=\"mb-4 text-2xl font-bold text-gray-900\">Processing Renewal</h3>\n                    <p className=\"mb-8 text-gray-600\">\n                        {paymentMethod === 'STK_PUSH'\n                            ? 'Please complete the payment on your phone by entering your M-Pesa PIN.'\n                            : 'We are verifying your transaction. This may take a few moments.'}\n                    </p>\n                    <Button\n                        variant=\"outline\"\n                        fullWidth\n                        size=\"lg\"\n                        onClick={onRefresh}\n                        disabled={isSubmitting}\n                    >\n                        Refresh Status\n                    </Button>\n                </CardBody>\n            </Card>\n        </motion.div>\n    );\n}\n\ninterface MembershipStatusCardProps {\n    membershipType: string;\n    expiresAt?: string;\n    daysUntilExpiry?: number | null;\n}\n\n/**\n * Card showing current membership status\n */\nexport function MembershipStatusCard({ membershipType, expiresAt, daysUntilExpiry }: MembershipStatusCardProps) {\n    return (\n        <Card className=\"overflow-hidden border-none shadow-md\">\n            <div className=\"h-1 bg-wiria-blue-dark\" aria-hidden=\"true\" />\n            <CardBody>\n                <h3 className=\"mb-4 text-sm font-bold uppercase tracking-wider text-gray-500\">\n                    Membership Status\n                </h3>\n                <dl className=\"space-y-4\">\n                    <div className=\"flex items-center justify-between\">\n                        <dt className=\"text-gray-600\">Member Type</dt>\n                        <dd className=\"rounded-full bg-blue-50 px-3 py-1 text-xs font-bold text-blue-700\">\n                            {membershipType || 'INDIVIDUAL'}\n                        </dd>\n                    </div>\n                    <div className=\"flex items-center justify-between\">\n                        <dt className=\"text-gray-600\">Expires On</dt>\n                        <dd className=\"font-bold text-gray-900\">\n                            {expiresAt ? new Date(expiresAt).toLocaleDateString() : '--'}\n                        </dd>\n                    </div>\n                    <div className=\"flex items-center justify-between\">\n                        <dt className=\"text-gray-600\">Days Remaining</dt>\n                        <dd\n                            className={`font-mono font-bold ${daysUntilExpiry != null && daysUntilExpiry <= 30 ? 'text-red-500' : 'text-green-600'\n                                }`}\n                        >\n                            {daysUntilExpiry ?? '--'}\n                        </dd>\n                    </div>\n                </dl>\n            </CardBody>\n        </Card>\n    );\n}\n\ninterface TotalAmountCardProps {\n    total: number;\n}\n\n/**\n * Card showing the total amount due\n */\nexport function TotalAmountCard({ total }: TotalAmountCardProps) {\n    return (\n        <div className=\"relative flex flex-col justify-center overflow-hidden rounded-2xl bg-gradient-to-br from-wiria-blue-dark to-blue-900 p-8 text-white shadow-xl\">\n            <div className=\"absolute right-0 top-0 h-32 w-32 -translate-x-1/2 -translate-y-1/2 rounded-full bg-white/5\" aria-hidden=\"true\" />\n            <p className=\"mb-2 text-sm font-bold uppercase tracking-widest text-blue-100\">\n                Total Amount Due\n            </p>\n            <p className=\"mb-2 text-5xl font-bold\" aria-live=\"polite\">\n                KES {total.toLocaleString()}\n            </p>\n            <p className=\"text-xs italic text-blue-200\">Renewal for the next 12 months</p>\n        </div>\n    );\n}\n","import { PortalLayout } from '@/features/membership/components/PortalLayout';\nimport { Card, CardBody } from '@/shared/components/ui/Card';\nimport { Button } from '@/shared/components/ui/Button';\nimport { FormField } from '@/shared/components/ui/form';\nimport { Input } from '@/shared/components/ui/Input';\nimport { PaymentMethodToggle } from '@/features/donations/components/PaymentMethodToggle';\nimport { PaymentInstructions } from '@/features/donations/components/PaymentInstructions';\nimport { useAuth } from '@/features/auth/context/AuthContext';\nimport { useMemberData } from '@/features/membership/hooks/useMemberData';\nimport { useRenewal } from '@/features/membership/hooks/useRenewal';\nimport { usePaymentPoller } from '@/features/donations/hooks/usePaymentPoller';\nimport { useEffect } from 'react';\nimport { formatPhoneNumber } from '@/shared/utils/helpers';\nimport { useRenewalFeeCalculation } from '@/shared/hooks/useFeeCalculation';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { useForm, FormProvider, Controller } from 'react-hook-form';\nimport { zodResolver } from '@hookform/resolvers/zod';\nimport { renewalSchema, RenewalFormSchema } from '@/features/membership/validation';\nimport {\n  RenewalSuccess,\n  RenewalPending,\n  MembershipStatusCard,\n  TotalAmountCard,\n} from './renewal/components';\n\nfunction MemberRenewalPage() {\n  useAuth();\n  const { profile, fetchProfile, daysUntilExpiry } = useMemberData();\n\n  const isGroup = profile?.membershipType === 'GROUP';\n\n  const methods = useForm<RenewalFormSchema>({\n    resolver: zodResolver(renewalSchema),\n    defaultValues: {\n      paymentMethod: 'STK_PUSH',\n      memberCount: 1,\n      phoneNumber: '',\n      transactionCode: '',\n      agreedToDataProtection: false,\n      agreedToCodeOfEthics: false,\n    },\n  });\n\n  const { handleSubmit, watch, setValue, formState: { errors } } = methods;\n\n  const paymentMethod = watch('paymentMethod');\n  const memberCount = watch('memberCount') || 1;\n  const agreedToDataProtection = watch('agreedToDataProtection');\n  const agreedToCodeOfEthics = watch('agreedToCodeOfEthics');\n  const transactionCode = watch('transactionCode');\n\n  useEffect(() => {\n    fetchProfile();\n  }, [fetchProfile]);\n\n  useEffect(() => {\n    if (profile) {\n      setValue('memberCount', profile.currentMemberCount || 1);\n      setValue('phoneNumber', profile.phone || '');\n    }\n  }, [profile, setValue]);\n\n  const { submitRenewal, checkPaymentStatus, isSubmitting, paymentStatus, transactionId } =\n    useRenewal();\n\n  usePaymentPoller({\n    donationId: transactionId,\n    isActive: !!transactionId && paymentStatus === 'PENDING',\n    onStatusCheck: checkPaymentStatus,\n  });\n\n  const maxCount = profile?.maxMemberCountReached || profile?.currentMemberCount || 0;\n\n  const feeBreakdown = useRenewalFeeCalculation({\n    membershipType: isGroup ? 'GROUP' : 'INDIVIDUAL',\n    memberCount,\n    maxCount,\n  });\n\n  const onSubmit = async (data: RenewalFormSchema) => {\n    await submitRenewal({\n      paymentMethod: data.paymentMethod,\n      phoneNumber: formatPhoneNumber(data.phoneNumber || ''),\n      transactionCode: data.paymentMethod === 'MANUAL' ? data.transactionCode : undefined,\n      memberCount: isGroup ? data.memberCount : undefined,\n      amount: feeBreakdown.total,\n    });\n  };\n\n  const isSubmitDisabled =\n    !agreedToDataProtection ||\n    !agreedToCodeOfEthics ||\n    (paymentMethod === 'MANUAL' && !transactionCode);\n\n  if (paymentStatus === 'SUCCESS') {\n    return (\n      <PortalLayout title=\"Renewal Successful\">\n        <RenewalSuccess />\n      </PortalLayout>\n    );\n  }\n\n  return (\n    <PortalLayout title=\"Renew Membership\">\n      <FormProvider {...methods}>\n        <div className=\"mx-auto max-w-4xl px-4 py-8\">\n          <AnimatePresence mode=\"wait\">\n            {paymentStatus === 'PENDING' ? (\n              <RenewalPending\n                paymentMethod={paymentMethod}\n                isSubmitting={isSubmitting}\n                onRefresh={() => window.location.reload()}\n              />\n            ) : (\n              <motion.div key=\"form\" initial={{ opacity: 0 }} animate={{ opacity: 1 }}>\n                <div className=\"mb-8 grid grid-cols-1 gap-6 md:grid-cols-2\">\n                  <MembershipStatusCard\n                    membershipType={profile?.membershipType || 'INDIVIDUAL'}\n                    expiresAt={profile?.membershipExpiresAt}\n                    daysUntilExpiry={daysUntilExpiry}\n                  />\n                  <TotalAmountCard total={feeBreakdown.total} />\n                </div>\n\n                <form onSubmit={handleSubmit(onSubmit)} className=\"space-y-8\">\n                  <AnimatePresence>\n                    {isGroup && (\n                      <motion.div\n                        initial={{ height: 0, opacity: 0 }}\n                        animate={{ height: 'auto', opacity: 1 }}\n                        className=\"mb-6 overflow-hidden\"\n                      >\n                        <Card className=\"border-blue-100 bg-blue-50/30\">\n                          <CardBody>\n                            <div className=\"flex flex-col justify-between gap-6 md:flex-row md:items-center\">\n                              <div>\n                                <h3 className=\"mb-1 text-lg font-bold text-blue-900\">\n                                  Group Member Count\n                                </h3>\n                                <p className=\"text-sm text-blue-700\">\n                                  Update your group size to include new members.\n                                </p>\n                              </div>\n                              <div className=\"flex items-center gap-4\">\n                                <div className=\"flex flex-col items-end text-right\">\n                                  <span className=\"text-xs font-bold uppercase text-gray-500\">\n                                    Last Recorded\n                                  </span>\n                                  <span className=\"font-mono text-xl font-bold text-gray-800\">\n                                    {maxCount}\n                                  </span>\n                                </div>\n                                <div className=\"h-10 w-px bg-blue-200\" />\n                                <div className=\"w-32 text-center\">\n                                  <Controller\n                                    name=\"memberCount\"\n                                    render={({ field }) => (\n                                      <Input\n                                        {...field}\n                                        type=\"number\"\n                                        className=\"h-12 text-center text-xl font-bold\"\n                                        min={1}\n                                      />\n                                    )}\n                                  />\n                                </div>\n                              </div>\n                            </div>\n                          </CardBody>\n                        </Card>\n                      </motion.div>\n                    )}\n                  </AnimatePresence>\n\n                  <div className=\"mb-8\">\n                    <Card className=\"border-2 border-gray-100 bg-gray-50\">\n                      <CardBody>\n                        <h3 className=\"mb-6 flex items-center gap-2 text-sm font-bold uppercase tracking-wider text-gray-900\">\n                          <svg\n                            className=\"h-4 w-4 text-wiria-blue-dark\"\n                            fill=\"none\"\n                            viewBox=\"0 0 24 24\"\n                            stroke=\"currentColor\"\n                          >\n                            <path\n                              strokeLinecap=\"round\"\n                              strokeLinejoin=\"round\"\n                              strokeWidth={2}\n                              d=\"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z\"\n                            />\n                          </svg>\n                          Fee Breakdown\n                        </h3>\n\n                        <div className=\"space-y-4\">\n                          <div className=\"flex items-center justify-between border-b border-dashed border-gray-200 py-2\">\n                            <div className=\"text-gray-600\">\n                              <span className=\"font-medium text-gray-900\">Subscription Renewal</span>\n                              <p className=\"text-xs text-gray-500\">\n                                {feeBreakdown.renewal.count}{' '}\n                                {feeBreakdown.renewal.count === 1 ? 'member' : 'members'} × KES{' '}\n                                {feeBreakdown.renewal.rate.toLocaleString()}\n                              </p>\n                            </div>\n                            <span className=\"font-semibold text-gray-900\">\n                              KES {feeBreakdown.renewal.subtotal.toLocaleString()}\n                            </span>\n                          </div>\n\n                          {feeBreakdown.newRegistration.count > 0 && (\n                            <div className=\"flex items-center justify-between border-b border-dashed border-gray-200 py-2\">\n                              <div className=\"text-gray-600\">\n                                <span className=\"font-medium text-blue-700\">\n                                  Incremental Registration\n                                </span>\n                                <p className=\"text-xs text-gray-500\">\n                                  {feeBreakdown.newRegistration.count} new{' '}\n                                  {feeBreakdown.newRegistration.count === 1 ? 'member' : 'members'} ×\n                                  KES {feeBreakdown.newRegistration.rate.toLocaleString()}\n                                </p>\n                              </div>\n                              <span className=\"font-bold text-blue-700\">\n                                KES {feeBreakdown.newRegistration.subtotal.toLocaleString()}\n                              </span>\n                            </div>\n                          )}\n\n                          <div className=\"flex items-center justify-between pt-2\">\n                            <span className=\"text-lg font-bold text-gray-900\">Total Due</span>\n                            <motion.span\n                              key={feeBreakdown.total}\n                              initial={{ scale: 1.1, color: '#1e40af' }}\n                              animate={{ scale: 1, color: '#1e3a8a' }}\n                              className=\"font-mono text-2xl font-bold text-wiria-blue-dark\"\n                            >\n                              KES {feeBreakdown.total.toLocaleString()}\n                            </motion.span>\n                          </div>\n                        </div>\n                      </CardBody>\n                    </Card>\n                  </div>\n\n                  <Card className=\"border-none shadow-lg\">\n                    <CardBody className=\"p-8\">\n                      <h2 className=\"mb-8 text-2xl font-bold text-wiria-blue-dark\">\n                        Payment Details\n                      </h2>\n\n                      <div className=\"mb-8 grid grid-cols-1 gap-8 md:grid-cols-2\">\n                        <div>\n                          <p className=\"mb-3 block text-sm font-bold text-gray-700\">\n                            Payment Method\n                          </p>\n                          <PaymentMethodToggle\n                            selected={paymentMethod}\n                            onChange={(val) => setValue('paymentMethod', val)}\n                            disabled={isSubmitting}\n                          />\n                        </div>\n\n                        <div>\n                          {paymentMethod === 'STK_PUSH' ? (\n                            <FormField\n                              name=\"phoneNumber\"\n                              label=\"M-Pesa Phone Number\"\n                              type=\"tel\"\n                              placeholder=\"254700000000\"\n                              description=\"You'll receive a prompt on your phone\"\n                              disabled={isSubmitting}\n                            />\n                          ) : (\n                            <FormField\n                              name=\"transactionCode\"\n                              label=\"Transaction Code\"\n                              placeholder=\"e.g. QWE123RTY\"\n                              description=\"Enter the code from the M-Pesa SMS\"\n                              disabled={isSubmitting}\n                            />\n                          )}\n                        </div>\n                      </div>\n\n                      <div className=\"mb-8 rounded-2xl bg-gray-50 p-6\">\n                        <PaymentInstructions\n                          paymentMethod={paymentMethod}\n                          amount={feeBreakdown.total}\n                          submitLabel=\"Complete Renewal\"\n                          accountNumber=\"MEMBERSHIP_RENEW\"\n                        />\n                      </div>\n\n                      <div className=\"mb-8 space-y-4\">\n                        <div className=\"flex items-start gap-3\">\n                          <input\n                            type=\"checkbox\"\n                            id=\"agreedToDataProtection\"\n                            {...methods.register('agreedToDataProtection')}\n                            className=\"mt-1 h-5 w-5 rounded border-gray-300 text-wiria-blue-dark focus:ring-wiria-blue-dark\"\n                            disabled={isSubmitting}\n                          />\n                          <label htmlFor=\"agreedToDataProtection\" className=\"text-sm leading-tight text-gray-700\">\n                            I consent to the processing of my personal data under the Data Protection Policy. *\n                          </label>\n                        </div>\n                        {errors.agreedToDataProtection && <p className=\"text-xs text-red-500 ml-8\">{errors.agreedToDataProtection.message}</p>}\n\n                        <div className=\"flex items-start gap-3\">\n                          <input\n                            type=\"checkbox\"\n                            id=\"agreedToCodeOfEthics\"\n                            {...methods.register('agreedToCodeOfEthics')}\n                            className=\"mt-1 h-5 w-5 rounded border-gray-300 text-wiria-blue-dark focus:ring-wiria-blue-dark\"\n                            disabled={isSubmitting}\n                          />\n                          <label htmlFor=\"agreedToCodeOfEthics\" className=\"text-sm leading-tight text-gray-700\">\n                            I agree to abide by the WIRIA Code of Ethics and Conduct. *\n                          </label>\n                        </div>\n                        {errors.agreedToCodeOfEthics && <p className=\"text-xs text-red-500 ml-8\">{errors.agreedToCodeOfEthics.message}</p>}\n                      </div>\n\n                      <Button\n                        type=\"submit\"\n                        fullWidth\n                        size=\"lg\"\n                        isLoading={isSubmitting}\n                        disabled={isSubmitDisabled}\n                        className=\"h-14 text-lg shadow-xl\"\n                      >\n                        Complete Renewal • KES {feeBreakdown.total.toLocaleString()}\n                      </Button>\n                    </CardBody>\n                  </Card>\n                </form>\n              </motion.div>\n            )}\n          </AnimatePresence>\n        </div>\n      </FormProvider>\n    </PortalLayout>\n  );\n}\n\nexport default MemberRenewalPage;\n"],"names":["useRenewal","isSubmitting","setIsSubmitting","useState","paymentStatus","setPaymentStatus","transactionId","setTransactionId","data","response","apiClient","API_ENDPOINTS","checkoutRequestId","message","notificationService","tid","status","RenewalSuccess","onNavigate","navigate","useNavigate","handleNavigate","jsx","Card","jsxs","CardBody","Button","RenewalPending","paymentMethod","onRefresh","motion","MembershipStatusCard","membershipType","expiresAt","daysUntilExpiry","TotalAmountCard","total","MemberRenewalPage","useAuth","profile","fetchProfile","useMemberData","isGroup","methods","useForm","zodResolver","renewalSchema","handleSubmit","watch","setValue","errors","memberCount","agreedToDataProtection","agreedToCodeOfEthics","transactionCode","useEffect","submitRenewal","checkPaymentStatus","usePaymentPoller","maxCount","feeBreakdown","useRenewalFeeCalculation","onSubmit","formatPhoneNumber","isSubmitDisabled","PortalLayout","FormProvider","AnimatePresence","Controller","field","Input","PaymentMethodToggle","val","FormField","PaymentInstructions"],"mappings":"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"}