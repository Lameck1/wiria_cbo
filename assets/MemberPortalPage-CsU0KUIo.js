import{j as e}from"./query-vendor-frBnvHSF.js";import{r as v,L as m}from"./react-vendor-BdaLayic.js";import{u as f,P as h}from"./useMemberData-P6dvgI-k.js";import{B as b}from"./Button-K8iFFe9S.js";import{C as n,a as c,b as g}from"./Card-DmlQfAyP.js";import{S as C}from"./Spinner-DvzCBoUM.js";import"./index-ICA0O2oL.js";import"./animation-vendor-CrU7SSpu.js";import"./endpoints-Cofiu-EW.js";import"./helpers-Brneqz2V.js";const M=({profile:s,statusText:t,statusTextColor:a,statusColor:r})=>{var i,l;return e.jsx(n,{children:e.jsxs(c,{children:[e.jsxs("div",{className:"mb-4 flex items-center gap-4",children:[e.jsxs("div",{className:"flex h-16 w-16 items-center justify-center rounded-full bg-wiria-blue-dark text-2xl font-bold text-white",children:[(i=s==null?void 0:s.firstName)==null?void 0:i[0],(l=s==null?void 0:s.lastName)==null?void 0:l[0]]}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-wiria-blue-dark",children:[s==null?void 0:s.firstName," ",s==null?void 0:s.lastName]}),e.jsx("p",{className:"text-sm text-gray-500",children:s==null?void 0:s.email})]})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Member ID:"}),e.jsx("span",{className:"font-semibold text-gray-800",children:(s==null?void 0:s.memberNumber)??"--"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Status:"}),e.jsx("span",{className:`rounded px-2 py-0.5 text-xs font-bold uppercase ${a} ${r}`,children:t})]})]}),e.jsx(m,{to:"/member-profile",children:e.jsx(b,{className:"mt-4 w-full",variant:"primary",children:"View Profile"})})]})})},S=({isExpired:s,daysUntilExpiry:t,joinedAt:a})=>e.jsx(n,{className:`bg-gradient-to-br from-wiria-blue-dark to-blue-900 text-white ${s?"ring-2 ring-red-500":""}`,children:e.jsxs(c,{children:[e.jsx("h3",{className:"mb-2 text-lg font-bold",children:"Membership"}),e.jsx("p",{className:"mb-4 text-sm text-blue-100",children:s?"Your membership has expired":t===null?"Checking status...":`Expires in ${t} days`}),e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"mb-1 flex justify-between text-xs",children:[e.jsx("span",{children:"Joined"}),e.jsx("span",{children:a?new Date(a).toLocaleDateString():"--"})]})}),e.jsx(m,{to:"/member-renewal",children:e.jsx(b,{className:"w-full bg-wiria-yellow font-bold text-white shadow-lg transition-all hover:scale-105",children:"Renew Membership"})})]})}),j=({title:s,value:t,subtitle:a,icon:r,iconBgColor:i,iconColor:l})=>e.jsx(n,{children:e.jsxs(c,{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"mb-1 text-sm text-gray-500",children:s}),e.jsx("p",{className:"text-2xl font-bold text-wiria-blue-dark",children:t}),e.jsx("p",{className:"text-xs text-gray-500",children:a})]}),e.jsx("div",{className:`flex h-12 w-12 items-center justify-center rounded-xl ${i} text-2xl ${l}`,children:r})]})}),k=({meetings:s})=>e.jsxs(n,{children:[e.jsx(g,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-xl font-bold text-wiria-blue-dark",children:"Upcoming Meetings"}),e.jsx(m,{to:"/member-meetings",className:"text-sm text-wiria-blue-dark hover:text-wiria-yellow",children:"View All â†’"})]})}),e.jsx(c,{children:e.jsx("div",{className:"space-y-3",children:s.length===0?e.jsx("p",{className:"text-sm italic text-gray-500",children:"No upcoming meetings"}):s.slice(0,3).map(t=>e.jsx("div",{className:"rounded-lg bg-gray-50 p-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-800",children:t.title}),e.jsxs("p",{className:"text-xs text-gray-500",children:[new Date(t.date).toLocaleDateString()," at ",t.time]})]}),e.jsx("span",{className:"rounded bg-blue-100 px-2 py-1 text-xs text-blue-800",children:t.type})]})},t.id))})})]}),L=({activity:s})=>e.jsxs(n,{children:[e.jsx(g,{children:e.jsx("h3",{className:"text-xl font-bold text-wiria-blue-dark",children:"Recent Activity"})}),e.jsx(c,{children:e.jsx("div",{className:"space-y-3",children:s.length===0?e.jsx("p",{className:"text-sm italic text-gray-500",children:"No recent activity"}):s.slice(0,5).map(t=>e.jsxs("div",{className:"flex items-start gap-3 text-sm",children:[e.jsx("div",{className:"mt-2 h-2 w-2 rounded-full bg-wiria-blue-dark"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-800",children:t.description}),e.jsx("p",{className:"text-xs text-gray-500",children:new Date(t.createdAt).toLocaleDateString()})]})]},t.id))})})]});function V(){const{profile:s,payments:t,meetings:a,activity:r,isLoading:i,totalPayments:l,upcomingMeetings:u,daysUntilExpiry:N,isExpired:d,isExpiringSoon:x,fetchAll:o}=f();if(v.useEffect(()=>{o()},[o]),i&&!s)return e.jsx(h,{title:"Member Portal",subtitle:"Loading your dashboard...",children:e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx(C,{size:"lg"})})});const y=d?"border-red-200 bg-red-50":x?"border-yellow-200 bg-yellow-50":"border-green-200 bg-green-50",p=d?"Expired":x?"Expiring Soon":(s==null?void 0:s.status)??"Active",w=d?"text-red-700":x?"text-yellow-700":"text-green-700";return e.jsxs(h,{title:"Welcome Back!",subtitle:"Here's what's happening with your membership",children:[e.jsxs("div",{className:"mb-8 grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-4",children:[e.jsx(M,{profile:s,statusText:p,statusTextColor:w,statusColor:y}),e.jsx(S,{isExpired:d,daysUntilExpiry:N,joinedAt:s==null?void 0:s.joinedAt}),e.jsx(j,{title:"Total Payments",value:`KES ${l.toLocaleString()}`,subtitle:`${t.length} transactions`,icon:"ðŸ’³",iconBgColor:"bg-green-100",iconColor:"text-green-600"}),e.jsx(j,{title:"Upcoming Meetings",value:u,subtitle:"This month",icon:"ðŸ“…",iconBgColor:"bg-blue-100",iconColor:"text-blue-600"})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[e.jsx(k,{meetings:a}),e.jsx(L,{activity:r})]})]})}export{V as default};
//# sourceMappingURL=MemberPortalPage-CsU0KUIo.js.map
