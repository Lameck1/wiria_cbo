{"version":3,"file":"SafeguardingManagementPage-uJ2eMDaD.js","sources":["../../src/features/admin/api/safeguarding.api.ts","../../src/pages/admin/SafeguardingManagementPage.tsx"],"sourcesContent":["/**\n * Safeguarding API Service\n * Handles safeguarding report management for admin\n */\n\nimport { apiClient } from '@/shared/services/api/client';\n\nexport interface SafeguardingReport {\n    id: string;\n    referenceNumber: string;\n    isAnonymous: boolean;\n    reporterName?: string;\n    reporterEmail?: string;\n    reporterPhone?: string;\n    incidentType: 'CHILD_PROTECTION' | 'SEXUAL_EXPLOITATION' | 'HARASSMENT' | 'DISCRIMINATION' | 'FRAUD' | 'OTHER';\n    incidentDate: string;\n    incidentLocation: string;\n    description: string;\n    personsInvolved?: string;\n    witnessInfo?: string;\n    evidenceUrl?: string;\n    priority: 'LOW' | 'MEDIUM' | 'HIGH' | 'CRITICAL';\n    status: 'PENDING' | 'UNDER_REVIEW' | 'INVESTIGATING' | 'RESOLVED' | 'CLOSED';\n    assignedTo?: string;\n    resolution?: string;\n    resolvedAt?: string;\n    createdAt: string;\n    updatedAt: string;\n}\n\nexport interface SafeguardingStatistics {\n    total: number;\n    pending: number;\n    underReview: number;\n    investigating: number;\n    resolved: number;\n    closed: number;\n    critical: number;\n    high: number;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nconst extractArray = (response: any): SafeguardingReport[] => {\n    if (Array.isArray(response)) return response;\n    if (response?.data && Array.isArray(response.data)) return response.data;\n    if (response?.reports && Array.isArray(response.reports)) return response.reports;\n    return [];\n};\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nconst extractData = (response: any) => {\n    if (response?.data) return response.data;\n    return response;\n};\n\nexport const getSafeguardingReports = async (params?: { status?: string; priority?: string }): Promise<SafeguardingReport[]> => {\n    try {\n        const searchParams = new URLSearchParams();\n        if (params?.status) searchParams.append('status', params.status);\n        if (params?.priority) searchParams.append('priority', params.priority);\n        const queryString = searchParams.toString() ? `?${searchParams.toString()}` : '';\n        const response = await apiClient.get(`/safeguarding${queryString}`);\n        return extractArray(response);\n    } catch (error) {\n        console.error('Failed to fetch safeguarding reports:', error);\n        return [];\n    }\n};\n\nexport const getSafeguardingReportById = async (id: string): Promise<SafeguardingReport | null> => {\n    try {\n        const response = await apiClient.get(`/safeguarding/${id}`);\n        return extractData(response);\n    } catch (error) {\n        console.error('Failed to fetch safeguarding report:', error);\n        return null;\n    }\n};\n\nexport const updateSafeguardingReport = async (id: string, data: Partial<SafeguardingReport>): Promise<boolean> => {\n    try {\n        await apiClient.patch(`/safeguarding/${id}`, data);\n        return true;\n    } catch (error) {\n        console.error('Failed to update safeguarding report:', error);\n        throw error;\n    }\n};\n\nexport const assignSafeguardingReport = async (id: string, assignedTo: string): Promise<boolean> => {\n    try {\n        await apiClient.post(`/safeguarding/${id}/assign`, { assignedTo });\n        return true;\n    } catch (error) {\n        console.error('Failed to assign safeguarding report:', error);\n        throw error;\n    }\n};\n\nexport const resolveSafeguardingReport = async (id: string, resolution: string): Promise<boolean> => {\n    try {\n        await apiClient.post(`/safeguarding/${id}/resolve`, { resolution });\n        return true;\n    } catch (error) {\n        console.error('Failed to resolve safeguarding report:', error);\n        throw error;\n    }\n};\n\nexport const getSafeguardingStatistics = async (): Promise<SafeguardingStatistics> => {\n    try {\n        const response = await apiClient.get('/safeguarding/statistics');\n        return extractData(response);\n    } catch (error) {\n        console.error('Failed to fetch safeguarding statistics:', error);\n        return {\n            total: 0,\n            pending: 0,\n            underReview: 0,\n            investigating: 0,\n            resolved: 0,\n            closed: 0,\n            critical: 0,\n            high: 0,\n        };\n    }\n};\n","/**\n * Safeguarding Reports Management Page\n * Admin view for managing safeguarding reports\n */\n\nimport { useCallback, useEffect, useState } from 'react';\nimport {\n    getSafeguardingReports,\n    updateSafeguardingReport,\n    resolveSafeguardingReport,\n    SafeguardingReport,\n} from '@/features/admin/api/safeguarding.api';\nimport { Button } from '@/shared/components/ui/Button';\nimport { notificationService } from '@/shared/services/notification/notificationService';\n\nconst STATUS_COLORS: Record<string, string> = {\n    PENDING: 'bg-yellow-100 text-yellow-700',\n    UNDER_REVIEW: 'bg-blue-100 text-blue-700',\n    INVESTIGATING: 'bg-orange-100 text-orange-700',\n    RESOLVED: 'bg-green-100 text-green-700',\n    CLOSED: 'bg-gray-100 text-gray-500',\n};\n\nconst PRIORITY_COLORS: Record<string, string> = {\n    CRITICAL: 'bg-red-600 text-white',\n    HIGH: 'bg-orange-500 text-white',\n    MEDIUM: 'bg-yellow-500 text-white',\n    LOW: 'bg-green-500 text-white',\n};\n\nconst INCIDENT_TYPES: Record<string, string> = {\n    CHILD_PROTECTION: 'Child Protection',\n    SEXUAL_EXPLOITATION: 'Sexual Exploitation',\n    HARASSMENT: 'Harassment',\n    DISCRIMINATION: 'Discrimination',\n    FRAUD: 'Fraud',\n    OTHER: 'Other',\n};\n\nexport default function SafeguardingManagementPage() {\n    const [reports, setReports] = useState<SafeguardingReport[]>([]);\n    const [isLoading, setIsLoading] = useState(true);\n    const [statusFilter, setStatusFilter] = useState<string>('');\n    const [priorityFilter, setPriorityFilter] = useState<string>('');\n    const [selectedReport, setSelectedReport] = useState<SafeguardingReport | null>(null);\n    const [showResolveModal, setShowResolveModal] = useState(false);\n    const [resolution, setResolution] = useState('');\n    const [isSubmitting, setIsSubmitting] = useState(false);\n\n    const loadData = useCallback(async () => {\n        setIsLoading(true);\n        try {\n            const params: { status?: string; priority?: string } = {};\n            if (statusFilter) params.status = statusFilter;\n            if (priorityFilter) params.priority = priorityFilter;\n            const data = await getSafeguardingReports(Object.keys(params).length ? params : undefined);\n            setReports(data);\n        } catch (error) {\n            console.error(error);\n            notificationService.error('Failed to load reports');\n        } finally {\n            setIsLoading(false);\n        }\n    }, [statusFilter, priorityFilter]);\n\n    useEffect(() => {\n        loadData();\n    }, [loadData]);\n\n    const handleStatusChange = async (id: string, newStatus: string) => {\n        try {\n            await updateSafeguardingReport(id, { status: newStatus as SafeguardingReport['status'] });\n            notificationService.success('Status updated');\n            loadData();\n        } catch (_error) {\n            notificationService.error('Failed to update status');\n        }\n    };\n\n    const handleResolve = async () => {\n        if (!selectedReport || !resolution.trim()) return;\n        setIsSubmitting(true);\n        try {\n            await resolveSafeguardingReport(selectedReport.id, resolution);\n            notificationService.success('Report resolved');\n            setShowResolveModal(false);\n            setResolution('');\n            setSelectedReport(null);\n            loadData();\n        } catch (_error) {\n            notificationService.error('Failed to resolve report');\n        } finally {\n            setIsSubmitting(false);\n        }\n    };\n\n    const formatDate = (date: string) => new Date(date).toLocaleDateString('en-KE', {\n        year: 'numeric',\n        month: 'short',\n        day: 'numeric',\n    });\n\n    const criticalCount = reports.filter(r => r.priority === 'CRITICAL' && r.status !== 'RESOLVED' && r.status !== 'CLOSED').length;\n    const openCount = reports.filter(r => r.status !== 'RESOLVED' && r.status !== 'CLOSED').length;\n\n    return (\n        <div>\n            <div className=\"mb-8\">\n                <h2 className=\"text-2xl font-bold text-wiria-blue-dark mb-2\">Safeguarding Reports</h2>\n                <p className=\"text-gray-600\">Manage and respond to safeguarding concerns.</p>\n                <div className=\"flex gap-3 mt-2\">\n                    {criticalCount > 0 && (\n                        <span className=\"inline-block bg-red-100 text-red-700 px-3 py-1 rounded-full text-sm font-bold\">\n                            {criticalCount} critical\n                        </span>\n                    )}\n                    {openCount > 0 && (\n                        <span className=\"inline-block bg-yellow-100 text-yellow-700 px-3 py-1 rounded-full text-sm font-bold\">\n                            {openCount} open case{openCount > 1 ? 's' : ''}\n                        </span>\n                    )}\n                </div>\n            </div>\n\n            {/* Filters */}\n            <div className=\"flex flex-wrap gap-4 mb-6\">\n                <div>\n                    <label htmlFor=\"status-filter\" className=\"sr-only\">\n                        Filter reports by status\n                    </label>\n                    <select\n                        id=\"status-filter\"\n                        value={statusFilter}\n                        onChange={(e) => setStatusFilter(e.target.value)}\n                        className=\"border rounded-lg px-4 py-2\"\n                    >\n                        <option value=\"\">All Statuses</option>\n                        <option value=\"PENDING\">Pending</option>\n                        <option value=\"UNDER_REVIEW\">Under Review</option>\n                        <option value=\"INVESTIGATING\">Investigating</option>\n                        <option value=\"RESOLVED\">Resolved</option>\n                        <option value=\"CLOSED\">Closed</option>\n                    </select>\n                </div>\n                <div>\n                    <label htmlFor=\"priority-filter\" className=\"sr-only\">\n                        Filter reports by priority\n                    </label>\n                    <select\n                        id=\"priority-filter\"\n                        value={priorityFilter}\n                        onChange={(e) => setPriorityFilter(e.target.value)}\n                        className=\"border rounded-lg px-4 py-2\"\n                    >\n                        <option value=\"\">All Priorities</option>\n                        <option value=\"CRITICAL\">Critical</option>\n                        <option value=\"HIGH\">High</option>\n                        <option value=\"MEDIUM\">Medium</option>\n                        <option value=\"LOW\">Low</option>\n                    </select>\n                </div>\n            </div>\n\n            {/* Reports Table */}\n            <div className=\"bg-white rounded-xl shadow overflow-hidden\">\n                {isLoading ? (\n                    <div className=\"p-8 text-center\">Loading reports...</div>\n                ) : reports.length === 0 ? (\n                    <div className=\"p-8 text-center text-gray-500\">No reports found.</div>\n                ) : (\n                    <table className=\"w-full text-left border-collapse\">\n                        <thead className=\"bg-gray-50 border-b\">\n                            <tr>\n                                <th className=\"px-6 py-4\">Reference</th>\n                                <th className=\"px-6 py-4\">Type</th>\n                                <th className=\"px-6 py-4\">Priority</th>\n                                <th className=\"px-6 py-4\">Status</th>\n                                <th className=\"px-6 py-4\">Date</th>\n                                <th className=\"px-6 py-4 text-right\">Actions</th>\n                            </tr>\n                        </thead>\n                        <tbody className=\"divide-y\">\n                            {reports.map((report) => (\n                                <tr key={report.id} className={`hover:bg-gray-50 ${report.priority === 'CRITICAL' ? 'bg-red-50' : ''}`}>\n                                    <td className=\"px-6 py-4 font-mono text-sm\">{report.referenceNumber}</td>\n                                    <td className=\"px-6 py-4 text-sm\">\n                                        {INCIDENT_TYPES[report.incidentType] || report.incidentType}\n                                    </td>\n                                    <td className=\"px-6 py-4\">\n                                        <span className={`px-2 py-1 rounded text-xs font-bold ${PRIORITY_COLORS[report.priority]}`}>\n                                            {report.priority}\n                                        </span>\n                                    </td>\n                                    <td className=\"px-6 py-4\">\n                                        <span className={`px-2 py-1 rounded-full text-xs font-bold ${STATUS_COLORS[report.status]}`}>\n                                            {report.status.replace('_', ' ')}\n                                        </span>\n                                    </td>\n                                    <td className=\"px-6 py-4 text-sm\">{formatDate(report.createdAt)}</td>\n                                    <td className=\"px-6 py-4 text-right\">\n                                        <button\n                                            onClick={() => setSelectedReport(report)}\n                                            className=\"text-wiria-blue-dark hover:underline text-sm font-bold mr-3\"\n                                        >\n                                            View\n                                        </button>\n                                        {report.status !== 'RESOLVED' && report.status !== 'CLOSED' && (\n                                            <button\n                                                onClick={() => { setSelectedReport(report); setShowResolveModal(true); }}\n                                                className=\"text-green-600 hover:underline text-sm font-bold\"\n                                            >\n                                                Resolve\n                                            </button>\n                                        )}\n                                    </td>\n                                </tr>\n                            ))}\n                        </tbody>\n                    </table>\n                )}\n            </div>\n\n            {/* View Report Modal */}\n            {selectedReport && !showResolveModal && (\n                <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60] p-4\">\n                    <div className=\"bg-white rounded-2xl shadow-2xl w-full max-w-3xl max-h-[90vh] flex flex-col\">\n                        <div className=\"p-6 border-b flex justify-between items-center\">\n                            <div>\n                                <h3 className=\"text-xl font-bold\">Report: {selectedReport.referenceNumber}</h3>\n                                <div className=\"flex gap-2 mt-1\">\n                                    <span className={`px-2 py-1 rounded text-xs font-bold ${PRIORITY_COLORS[selectedReport.priority]}`}>\n                                        {selectedReport.priority}\n                                    </span>\n                                    <span className={`px-2 py-1 rounded-full text-xs font-bold ${STATUS_COLORS[selectedReport.status]}`}>\n                                        {selectedReport.status.replace('_', ' ')}\n                                    </span>\n                                </div>\n                            </div>\n                            <button onClick={() => setSelectedReport(null)} className=\"text-gray-500 hover:text-gray-700\">âœ•</button>\n                        </div>\n                        <div className=\"p-6 overflow-y-auto flex-1 space-y-4\">\n                            <div className=\"grid grid-cols-2 gap-4\">\n                                <div>\n                                    <p className=\"text-xs text-gray-500 font-bold uppercase\">Incident Type</p>\n                                    <p className=\"font-semibold\">{INCIDENT_TYPES[selectedReport.incidentType]}</p>\n                                </div>\n                                <div>\n                                    <p className=\"text-xs text-gray-500 font-bold uppercase\">Incident Date</p>\n                                    <p>{formatDate(selectedReport.incidentDate)}</p>\n                                </div>\n                                <div>\n                                    <p className=\"text-xs text-gray-500 font-bold uppercase\">Location</p>\n                                    <p>{selectedReport.incidentLocation}</p>\n                                </div>\n                                <div>\n                                    <p className=\"text-xs text-gray-500 font-bold uppercase\">Reported</p>\n                                    <p>{formatDate(selectedReport.createdAt)}</p>\n                                </div>\n                                {!selectedReport.isAnonymous && (\n                                    <>\n                                        <div>\n                                            <p className=\"text-xs text-gray-500 font-bold uppercase\">Reporter Name</p>\n                                            <p>{selectedReport.reporterName}</p>\n                                        </div>\n                                        <div>\n                                            <p className=\"text-xs text-gray-500 font-bold uppercase\">Reporter Contact</p>\n                                            <p>{selectedReport.reporterEmail}</p>\n                                        </div>\n                                    </>\n                                )}\n                            </div>\n                            <div>\n                                <p className=\"text-xs text-gray-500 font-bold uppercase mb-1\">Description</p>\n                                <p className=\"bg-gray-50 p-4 rounded-lg whitespace-pre-wrap\">{selectedReport.description}</p>\n                            </div>\n                            {selectedReport.personsInvolved && (\n                                <div>\n                                    <p className=\"text-xs text-gray-500 font-bold uppercase mb-1\">Persons Involved</p>\n                                    <p className=\"bg-gray-50 p-4 rounded-lg\">{selectedReport.personsInvolved}</p>\n                                </div>\n                            )}\n                            {selectedReport.resolution && (\n                                <div>\n                                    <p className=\"text-xs text-green-600 font-bold uppercase mb-1\">Resolution</p>\n                                    <p className=\"bg-green-50 p-4 rounded-lg text-green-700\">{selectedReport.resolution}</p>\n                                </div>\n                            )}\n\n                            {/* Status Update */}\n                            {selectedReport.status !== 'RESOLVED' && selectedReport.status !== 'CLOSED' && (\n                                <div>\n                                    <p className=\"text-xs text-gray-500 font-bold uppercase mb-2\">Update Status</p>\n                                    <div className=\"flex gap-2\">\n                                        {['PENDING', 'UNDER_REVIEW', 'INVESTIGATING'].map((status) => (\n                                            <button\n                                                key={status}\n                                                onClick={() => handleStatusChange(selectedReport.id, status)}\n                                                className={`px-3 py-1 rounded text-sm font-bold ${selectedReport.status === status ? STATUS_COLORS[status] : 'bg-gray-100 text-gray-600'}`}\n                                            >\n                                                {status.replace('_', ' ')}\n                                            </button>\n                                        ))}\n                                    </div>\n                                </div>\n                            )}\n                        </div>\n                        <div className=\"p-6 border-t flex gap-3\">\n                            {selectedReport.status !== 'RESOLVED' && selectedReport.status !== 'CLOSED' && (\n                                <Button onClick={() => setShowResolveModal(true)}>Mark as Resolved</Button>\n                            )}\n                            <Button variant=\"secondary\" onClick={() => setSelectedReport(null)}>Close</Button>\n                        </div>\n                    </div>\n                </div>\n            )}\n\n            {/* Resolve Modal */}\n            {showResolveModal && selectedReport && (\n                <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[70] p-4\">\n                    <div className=\"bg-white rounded-2xl shadow-2xl w-full max-w-lg\">\n                        <div className=\"p-6 border-b\">\n                            <h3 className=\"text-xl font-bold\">Resolve Report</h3>\n                            <p className=\"text-sm text-gray-500\">Report: {selectedReport.referenceNumber}</p>\n                        </div>\n                        <div className=\"p-6\">\n                            <label className=\"block text-sm font-bold mb-2\">Resolution Details *</label>\n                            <textarea\n                                value={resolution}\n                                onChange={(e) => setResolution(e.target.value)}\n                                className=\"w-full border rounded-lg p-3 h-40\"\n                                placeholder=\"Describe how this issue was resolved...\"\n                                required\n                            />\n                        </div>\n                        <div className=\"p-6 border-t flex gap-3\">\n                            <Button onClick={handleResolve} disabled={isSubmitting || !resolution.trim()}>\n                                {isSubmitting ? 'Saving...' : 'Confirm Resolution'}\n                            </Button>\n                            <Button variant=\"secondary\" onClick={() => { setShowResolveModal(false); setResolution(''); }}>\n                                Cancel\n                            </Button>\n                        </div>\n                    </div>\n                </div>\n            )}\n        </div>\n    );\n}\n"],"names":["extractArray","response","getSafeguardingReports","params","searchParams","queryString","apiClient","error","updateSafeguardingReport","id","data","resolveSafeguardingReport","resolution","STATUS_COLORS","PRIORITY_COLORS","INCIDENT_TYPES","SafeguardingManagementPage","reports","setReports","useState","isLoading","setIsLoading","statusFilter","setStatusFilter","priorityFilter","setPriorityFilter","selectedReport","setSelectedReport","showResolveModal","setShowResolveModal","setResolution","isSubmitting","setIsSubmitting","loadData","useCallback","notificationService","useEffect","handleStatusChange","newStatus","handleResolve","formatDate","date","criticalCount","r","openCount","jsxs","jsx","e","report","Fragment","status","Button"],"mappings":"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"}