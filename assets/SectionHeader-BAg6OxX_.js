import{j as e}from"./query-vendor-CM55eWOT.js";import{r as h}from"./react-vendor-CXp26_Hx.js";import{M as S}from"./Modal-BGjbfc1U.js";import{c as j,a as C,C as F,o as A,l as v,s as o,F as u,b as I,d as E,e as P}from"./index-Ck6qqv4n.js";import{F as w}from"./FormSelectField-WLZr2QZ1.js";import{m as g}from"./animation-vendor-Bcu85ETC.js";function q({label:r,error:t,className:s,id:i,ref:n,...l}){const a=h.useId(),c=i??a;return e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:c,ref:n,className:j("h-4 w-4 rounded border-gray-300 text-wiria-yellow focus:ring-wiria-yellow","disabled:cursor-not-allowed disabled:opacity-50",t&&"border-red-500",s),...l}),e.jsxs("label",{htmlFor:c,className:j("text-sm font-medium text-gray-700",l.disabled&&"opacity-50"),children:[r,l.required&&e.jsx("span",{className:"ml-1 text-red-500",children:"*"})]})]}),t&&e.jsx("p",{className:"text-xs text-red-600",children:t})]})}function M({name:r,label:t,className:s="",disabled:i=!1,required:n=!1}){var d;const{control:l,formState:{errors:a}}=C(),c=(d=a[r])==null?void 0:d.message;return e.jsx("div",{className:s,children:e.jsx(F,{name:r,control:l,render:({field:{value:m,...x}})=>e.jsx(q,{...x,checked:!!m,label:t,disabled:i,required:n,error:c})})})}const D=[{value:"certificate",label:"Certificate"},{value:"diploma",label:"Diploma"},{value:"bachelors",label:"Bachelor's Degree"},{value:"masters",label:"Master's Degree"},{value:"phd",label:"PhD/Doctorate"},{value:"other",label:"Other"}],R=[{value:"0-1",label:"Less than 1 year"},{value:"1-3",label:"1-3 years"},{value:"3-5",label:"3-5 years"},{value:"5-10",label:"5-10 years"},{value:"10+",label:"10+ years"}],T=A({fullName:o().min(3,"Full name must be at least 3 characters"),email:o().email("Invalid email address"),phone:o().min(10,"Invalid phone number"),location:o().min(2,"Location is required"),education:o().min(1,"Please select your education level"),fieldOfStudy:o().min(2,"Field of study is required"),experience:o().min(1,"Please select your years of experience"),motivation:o().min(100,"Motivation must be at least 100 characters"),skills:o().optional(),cvLink:o().url("Invalid CV link URL"),coverLetterLink:o().url("Invalid cover letter link URL").optional().or(v("")),consent:v(!0,{errorMap:()=>({message:"You must consent to proceed"})})});function B({title:r}){return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"rounded-r-lg border-l-4 border-blue-500 bg-blue-50 p-4",children:e.jsxs("p",{className:"text-sm text-gray-700",children:[e.jsx("strong",{children:"ℹ️ Note:"})," Fill out the form below to apply for ",e.jsx("strong",{children:r}),". All fields marked with * are required."]})}),e.jsxs("section",{className:"space-y-4",children:[e.jsx("h4",{className:"text-lg font-bold text-wiria-blue-dark",children:"Personal Information"}),e.jsx(u,{label:"Full Name",name:"fullName",required:!0,placeholder:"Enter your full name"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsx(u,{label:"Email Address",name:"email",type:"email",required:!0,placeholder:"you@example.com"}),e.jsx(u,{label:"Phone Number",name:"phone",type:"tel",required:!0,placeholder:"0712345678"})]}),e.jsx(u,{label:"Location/County",name:"location",required:!0,placeholder:"e.g., Homa Bay, Nairobi"})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsx("h4",{className:"text-lg font-bold text-wiria-blue-dark",children:"Professional Background"}),e.jsx(w,{label:"Highest Education Level",name:"education",options:D,required:!0}),e.jsx(u,{label:"Field of Study",name:"fieldOfStudy",required:!0,placeholder:"e.g., Public Health, Business Administration"}),e.jsx(w,{label:"Years of Relevant Experience",name:"experience",options:R,required:!0}),e.jsx(I,{label:"Why are you interested in this position? (Min 100 chars)",name:"motivation",required:!0,placeholder:"Tell us about your background, skills, and why you are a good fit...",rows:5}),e.jsx(u,{label:"Relevant Skills (comma-separated)",name:"skills",placeholder:"e.g., Project Management, Data Analysis"})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsx("h4",{className:"text-lg font-bold text-wiria-blue-dark",children:"Supporting Documents"}),e.jsx(u,{label:"CV/Resume (Link)",name:"cvLink",type:"url",required:!0,placeholder:"https://drive.google.com/..."}),e.jsx(u,{label:"Cover Letter (Link)",name:"coverLetterLink",type:"url",placeholder:"https://drive.google.com/..."})]}),e.jsx("section",{className:"space-y-4",children:e.jsx(M,{name:"consent",required:!0,label:"I consent to WIRIA CBO processing my personal data for recruitment purposes in accordance with Kenya Data Protection Act 2019. *"})})]})}function O(){const[r,t]=h.useState("idle"),[s,i]=h.useState(null),n=h.useCallback(async(l,a,c)=>{t("submitting"),i(null);const d=l.fullName.trim().split(/\s+/),m=d[0]||"",x=d.length>1?d.slice(1).join(" "):"Applicant",b={type:a,firstName:m,lastName:x,email:l.email,phone:l.phone.replace(/\s+/g,""),coverLetter:l.motivation,resumeUrl:l.cvLink||null,additionalDocs:l.coverLetterLink?[l.coverLetterLink]:[],...a==="CAREER"?{careerId:c}:{opportunityId:c}};try{await E.post("/applications",b),t("success")}catch(p){console.error("Application submission error:",p),i(p instanceof Error?p.message:"Failed to submit application"),t("error")}},[]);return{status:r,error:s,submitApplication:n,reset:()=>{t("idle"),i(null)}}}function V({title:r,email:t,onClose:s}){return e.jsxs("div",{className:"py-8 text-center",children:[e.jsx("div",{className:"mx-auto mb-6 flex h-20 w-20 items-center justify-center rounded-full bg-green-100",children:e.jsx("svg",{className:"h-10 w-10 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsx("h3",{className:"mb-2 text-2xl font-bold text-gray-800",children:"Application Submitted!"}),e.jsxs("p",{className:"mx-auto mb-6 max-w-md text-gray-600",children:["Thank you for applying for ",e.jsx("strong",{children:r}),". We'll review your application and get back to you soon."]}),e.jsxs("p",{className:"mb-8 text-sm text-gray-500",children:["A confirmation email has been sent to ",e.jsx("strong",{children:t})]}),e.jsx("button",{onClick:s,className:"rounded-full bg-wiria-blue-dark px-8 py-3 font-semibold text-white transition-all hover:bg-wiria-yellow hover:text-wiria-blue-dark",children:"Done"})]})}function W({error:r,onRetry:t,onClose:s}){return e.jsxs("div",{className:"py-8 text-center",children:[e.jsx("div",{className:"mx-auto mb-6 flex h-20 w-20 items-center justify-center rounded-full bg-red-100",children:e.jsx("svg",{className:"h-10 w-10 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("h3",{className:"mb-2 text-2xl font-bold text-gray-800",children:"Something went wrong"}),e.jsx("p",{className:"mb-8 text-gray-600",children:r||"Failed to submit your application. Please try again."}),e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsx("button",{onClick:s,className:"rounded-full border border-gray-300 px-6 py-2.5 font-medium text-gray-700 transition-colors hover:bg-gray-100",children:"Cancel"}),e.jsx("button",{onClick:t,className:"rounded-full bg-wiria-blue-dark px-8 py-2.5 font-semibold text-white transition-all hover:bg-wiria-yellow hover:text-wiria-blue-dark",children:"Try Again"})]})]})}function K({isOpen:r,onClose:t,onBack:s,title:i,itemId:n,type:l}){const{status:a,error:c,submitApplication:d,reset:m}=O(),[x,b]=h.useState("");if(!r)return null;const p=async f=>{b(f.email),await d(f,l,n)},N=a==="success",k=a==="error",y=a==="submitting",L=a==="idle";return e.jsxs(S,{isOpen:r,onClose:t,size:"2xl",noPadding:!0,children:[e.jsxs("div",{className:"relative flex-shrink-0 bg-gradient-to-r from-wiria-blue-dark to-blue-700 p-6 text-white",children:[e.jsx("button",{onClick:t,className:"absolute right-6 top-6 flex h-10 w-10 items-center justify-center rounded-full bg-white/10 text-white transition-colors hover:bg-white/20",children:e.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"Apply for Position"}),e.jsx("p",{className:"mt-1 text-sm text-white/80",children:i})]})]}),e.jsxs("div",{className:"p-6",children:[N&&e.jsx(V,{title:i,email:x,onClose:t}),k&&e.jsx(W,{error:c||"",onRetry:m,onClose:t}),(L||y)&&e.jsx(P,{schema:T,onSubmit:p,children:()=>e.jsxs(e.Fragment,{children:[e.jsx(B,{title:i}),e.jsxs("div",{className:"mt-8 flex gap-4 border-t pt-6",children:[e.jsx("button",{type:"button",onClick:s,className:"flex-1 rounded-full bg-gray-200 px-6 py-3 font-bold text-gray-700 transition-colors hover:bg-gray-300",children:"Back to Details"}),e.jsx("button",{type:"submit",disabled:y,className:"flex-1 rounded-full bg-wiria-blue-dark px-6 py-3 font-bold text-white transition-colors hover:bg-wiria-yellow hover:text-wiria-blue-dark disabled:opacity-50",children:y?"Submitting...":"Submit Application"})]})]})})]})]})}function X({title:r,subtitle:t,badge:s,centered:i=!0,className:n=""}){const l=i?"text-center":"text-left",a=i?"mx-auto":"";return e.jsxs("div",{className:`mb-12 ${l} ${n}`,children:[s&&e.jsx(g.span,{initial:{opacity:0,y:-10},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"mb-4 inline-block rounded-full bg-wiria-yellow/20 px-4 py-1.5 text-sm font-medium text-wiria-blue-dark",children:s}),e.jsx(g.h2,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"mb-4 text-3xl font-bold text-wiria-blue-dark md:text-4xl",children:r}),e.jsx("div",{className:`mb-6 h-1 w-24 rounded-full bg-gradient-to-r from-wiria-yellow to-wiria-green-light ${a}`}),t&&e.jsx(g.p,{initial:{opacity:0,y:10},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"mx-auto max-w-3xl text-lg text-gray-600",children:t})]})}export{K as A,X as S};
//# sourceMappingURL=SectionHeader-BAg6OxX_.js.map
