{"version":3,"file":"useMemberData-BdepG6Fx.js","sources":["../../src/features/membership/components/PortalNavigation.tsx","../../src/features/membership/components/PortalLayout.tsx","../../src/features/membership/api/memberAdapter.ts","../../src/features/membership/hooks/queries/useMemberQueries.ts","../../src/features/membership/hooks/useMemberData.ts"],"sourcesContent":["/**\n * Portal Navigation Component\n * Horizontal tabs for member portal pages\n */\n\nimport { NavLink } from 'react-router-dom';\n\nconst NAV_ITEMS = [\n  { to: '/member-portal', label: 'Dashboard', icon: 'üè†', exact: true },\n  { to: '/member-profile', label: 'Profile', icon: 'üë§' },\n  { to: '/member-renewal', label: 'Renewal', icon: 'üîÑ' },\n  { to: '/member-payments', label: 'Payments', icon: 'üí≥' },\n  { to: '/member-meetings', label: 'Meetings', icon: 'üìÖ' },\n];\n\nexport function PortalNavigation() {\n  return (\n    <nav className=\"mb-6 overflow-x-auto rounded-xl bg-white shadow-md\">\n      <div className=\"flex\">\n        {NAV_ITEMS.map((item) => (\n          <NavLink\n            key={item.to}\n            to={item.to}\n            end={item.exact}\n            className={({ isActive }) =>\n              `flex items-center gap-2 whitespace-nowrap border-b-2 px-5 py-4 text-sm font-semibold transition-colors ${\n                isActive\n                  ? 'border-wiria-blue-dark bg-wiria-blue-dark/5 text-wiria-blue-dark'\n                  : 'border-transparent text-gray-600 hover:bg-gray-50 hover:text-wiria-blue-dark'\n              }`\n            }\n          >\n            <span>{item.icon}</span>\n            <span>{item.label}</span>\n          </NavLink>\n        ))}\n      </div>\n    </nav>\n  );\n}\n","/**\n * Portal Layout Component\n * Shared layout for all member portal pages\n */\n\nimport { ReactNode } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { useAuth } from '@/features/auth/context/AuthContext';\nimport { PortalNavigation } from './PortalNavigation';\n\ninterface PortalLayoutProps {\n  children: ReactNode;\n  title: string;\n  subtitle?: string;\n  showNavigation?: boolean;\n}\n\nexport function PortalLayout({\n  children,\n  title,\n  subtitle,\n  showNavigation = true,\n}: PortalLayoutProps) {\n  const { user, logout } = useAuth();\n  const navigate = useNavigate();\n\n  const handleLogout = async () => {\n    await logout();\n    navigate('/member-login');\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      {/* Portal Header */}\n      <header className=\"sticky top-0 z-50 bg-white shadow-md\">\n        <nav className=\"container mx-auto flex items-center justify-between px-4 py-4 lg:px-6\">\n          <Link to=\"/member-portal\" className=\"flex items-center gap-2\">\n            <img\n              src={`${import.meta.env.BASE_URL}images/Wiria_CBO_Logo_NEW_IV.png`}\n              alt=\"WIRIA CBO\"\n              className=\"h-10\"\n            />\n            <span className=\"hidden text-xl font-bold text-wiria-blue-dark sm:block\">\n              WIRIA CBO\n            </span>\n          </Link>\n          <div className=\"flex items-center space-x-4\">\n            <Link\n              to=\"/\"\n              className=\"text-sm font-semibold text-wiria-blue-dark transition-colors hover:text-wiria-yellow\"\n            >\n              üè† Home\n            </Link>\n            {user && (\n              <span className=\"hidden text-sm font-semibold text-gray-700 md:block\">\n                {user.firstName} {user.lastName}\n              </span>\n            )}\n            <button\n              onClick={handleLogout}\n              className=\"rounded-lg bg-gray-200 px-4 py-2 text-sm font-bold text-gray-700 transition-all hover:bg-gray-300\"\n            >\n              Logout\n            </button>\n          </div>\n        </nav>\n      </header>\n\n      <main className=\"py-8\">\n        <div className=\"container mx-auto px-4\">\n          {/* Page Header */}\n          <div className=\"mb-6\">\n            <h1 className=\"mb-1 text-3xl font-bold text-wiria-blue-dark\">{title}</h1>\n            {subtitle && <p className=\"text-gray-600\">{subtitle}</p>}\n          </div>\n\n          {/* Portal Navigation */}\n          {showNavigation && <PortalNavigation />}\n\n          {/* Page Content */}\n          {children}\n        </div>\n      </main>\n\n      {/* Portal Footer */}\n      <footer className=\"mt-12 bg-wiria-blue-dark py-8 text-white\">\n        <div className=\"container mx-auto px-4 text-center\">\n          <p>&copy; 2025 WIRIA Community Based Organization. Confidential Member Portal.</p>\n        </div>\n      </footer>\n    </div>\n  );\n}\n","import type { MemberProfile, Payment, Meeting, Activity } from '../hooks/useMemberData';\n\n/**\n * API Response Types\n * These interfaces model the raw backend response structure.\n * The adapter normalizes these into the frontend types.\n */\n\n/** Raw profile data from API - may have different nesting structures */\ninterface ApiMemberProfileData {\n    id?: string;\n    memberNumber?: string;\n    firstName?: string;\n    lastName?: string;\n    email?: string;\n    phone?: string;\n    nationalId?: string;\n    occupation?: string;\n    address?: string;\n    county?: string;\n    subcounty?: string;\n    ward?: string;\n    interests?: string[];\n    skills?: string[];\n    status?: string;\n    membershipType?: string;\n    groupName?: string;\n    currentMemberCount?: number;\n    maxMemberCountReached?: number;\n    joinDate?: string;\n    joinedAt?: string;\n    expiryDate?: string;\n    membershipExpiresAt?: string;\n    createdAt?: string;\n    props?: ApiMemberProfileData;\n}\n\n/** Raw payment data from API */\ninterface ApiPaymentData {\n    id?: string;\n    amount?: number | string;\n    type?: string;\n    status?: string;\n    method?: string;\n    mpesaReceiptNumber?: string;\n    createdAt?: string;\n}\n\n/** Raw meeting data from API */\ninterface ApiMeetingData {\n    id?: string;\n    title?: string;\n    description?: string;\n    date?: string;\n    time?: string;\n    location?: string;\n    type?: string;\n    status?: string;\n    isRsvpd?: boolean;\n    attendeesCount?: number;\n}\n\n/** Raw activity data from API */\ninterface ApiActivityData {\n    id?: string;\n    type?: string;\n    description?: string;\n    timestamp?: string;\n    createdAt?: string;\n}\n\n/** Response wrapper types */\ntype ApiPaymentsResponse = ApiPaymentData[] | { payments: ApiPaymentData[] };\ntype ApiMeetingsResponse = ApiMeetingData[] | { data: ApiMeetingData[] };\ntype ApiActivityResponse = ApiActivityData[] | { data: ApiActivityData[] };\n\n/**\n * Member Adapter\n * Normalizes inconsistent backend responses into standard frontend structures.\n */\nexport const memberAdapter = {\n    /**\n     * Normalizes profile data, handling variations in nesting and field names.\n     */\n    profile(apiData: ApiMemberProfileData): MemberProfile {\n        if (!apiData) {\n            throw new Error('Member adapter error: No profile data provided');\n        }\n\n        const source = apiData.props || apiData;\n\n        return {\n            id: apiData.id || source.id || '',\n            memberNumber: apiData.memberNumber || source.memberNumber || '',\n            firstName: source.firstName || '',\n            lastName: source.lastName || '',\n            email: source.email || '',\n            phone: source.phone || '',\n            nationalId: source.nationalId,\n            occupation: source.occupation,\n            address: source.address,\n            county: source.county,\n            subcounty: source.subcounty,\n            ward: source.ward,\n            interests: source.interests || [],\n            skills: source.skills || [],\n            status: (apiData.status || source.status || 'PENDING') as MemberProfile['status'],\n            membershipType: (apiData.membershipType || source.membershipType) as MemberProfile['membershipType'],\n            groupName: apiData.groupName || source.groupName,\n            currentMemberCount: apiData.currentMemberCount || source.currentMemberCount,\n            maxMemberCountReached: apiData.maxMemberCountReached || source.maxMemberCountReached,\n            joinedAt: apiData.joinDate || apiData.joinedAt || source.joinDate || source.joinedAt || '',\n            membershipExpiresAt: apiData.expiryDate || apiData.membershipExpiresAt || source.expiryDate || source.membershipExpiresAt,\n            createdAt: apiData.createdAt || source.createdAt || '',\n        };\n    },\n\n    /**\n     * Normalizes payment data.\n     */\n    payments(apiData: ApiPaymentsResponse): Payment[] {\n        const list: ApiPaymentData[] = Array.isArray(apiData)\n            ? apiData\n            : (apiData as { payments: ApiPaymentData[] })?.payments || [];\n\n        return list.map((p) => ({\n            id: p.id || '',\n            amount: Number(p.amount) || 0,\n            type: (p.type || 'DONATION') as Payment['type'],\n            status: (p.status || 'PENDING') as Payment['status'],\n            method: (p.method || 'MANUAL') as Payment['method'],\n            mpesaReceiptNumber: p.mpesaReceiptNumber,\n            createdAt: p.createdAt || '',\n        }));\n    },\n\n    /**\n     * Normalizes meeting data.\n     */\n    meetings(apiData: ApiMeetingsResponse): Meeting[] {\n        const list: ApiMeetingData[] = Array.isArray(apiData)\n            ? apiData\n            : (apiData as { data: ApiMeetingData[] })?.data || [];\n\n        return list.map((m) => ({\n            id: m.id || '',\n            title: m.title || '',\n            description: m.description,\n            date: m.date || '',\n            time: m.time || '',\n            location: m.location || '',\n            type: (m.type || 'AGM') as Meeting['type'],\n            status: (m.status || 'UPCOMING') as Meeting['status'],\n            isRsvpd: m.isRsvpd,\n            attendeesCount: m.attendeesCount,\n        }));\n    },\n\n    /**\n     * Normalizes activity data.\n     */\n    activity(apiData: ApiActivityResponse): Activity[] {\n        const list: ApiActivityData[] = Array.isArray(apiData)\n            ? apiData\n            : (apiData as { data: ApiActivityData[] })?.data || [];\n\n        return list.map((item) => ({\n            id: item.id || '',\n            type: item.type || '',\n            description: item.description || '',\n            createdAt: item.timestamp || item.createdAt || '',\n        }));\n    }\n};\n","import { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { apiClient } from '@/shared/services/api/client';\nimport { API_ENDPOINTS } from '@/shared/services/api/endpoints';\nimport { memberAdapter } from '../../api/memberAdapter';\nimport type { MemberProfile, Document } from '../useMemberData';\n\n/**\n * API Response Types\n * These match the structure returned by the backend.\n */\ninterface ApiProfileResponse {\n    data: {\n        id?: string;\n        memberNumber?: string;\n        firstName?: string;\n        lastName?: string;\n        email?: string;\n        phone?: string;\n        status?: string;\n        membershipType?: string;\n        props?: Record<string, unknown>;\n        [key: string]: unknown;\n    };\n}\n\ninterface ApiPaymentsResponse {\n    data: Array<{\n        id?: string;\n        amount?: number | string;\n        type?: string;\n        status?: string;\n        method?: string;\n        mpesaReceiptNumber?: string;\n        createdAt?: string;\n    }> | { payments: Array<Record<string, unknown>> };\n}\n\ninterface ApiMeetingsResponse {\n    data: Array<{\n        id?: string;\n        title?: string;\n        description?: string;\n        date?: string;\n        time?: string;\n        location?: string;\n        type?: string;\n        status?: string;\n        isRsvpd?: boolean;\n        attendeesCount?: number;\n    }> | { data: Array<Record<string, unknown>> };\n}\n\ninterface ApiDocumentsResponse {\n    data: {\n        documents?: Array<{\n            id?: string;\n            name?: string;\n            type?: string;\n            url?: string;\n            createdAt?: string;\n        }>;\n    };\n}\n\ninterface ApiActivityResponse {\n    data: Array<{\n        id?: string;\n        type?: string;\n        description?: string;\n        timestamp?: string;\n        createdAt?: string;\n    }> | { data: Array<Record<string, unknown>> };\n}\n\nexport const MEMBER_KEYS = {\n    all: ['member'] as const,\n    profile: () => [...MEMBER_KEYS.all, 'profile'] as const,\n    payments: () => [...MEMBER_KEYS.all, 'payments'] as const,\n    meetings: (type: 'joined' | 'available') => [...MEMBER_KEYS.all, 'meetings', type] as const,\n    documents: () => [...MEMBER_KEYS.all, 'documents'] as const,\n    activity: () => [...MEMBER_KEYS.all, 'activity'] as const,\n};\n\nexport function useMemberProfileQuery() {\n    return useQuery({\n        queryKey: MEMBER_KEYS.profile(),\n        queryFn: async () => {\n            const response = await apiClient.get<ApiProfileResponse>(API_ENDPOINTS.MEMBERS_ME);\n            return memberAdapter.profile(response.data);\n        },\n        staleTime: 1000 * 60 * 5, // 5 minutes\n    });\n}\n\nexport function useUpdateMemberProfileMutation() {\n    const queryClient = useQueryClient();\n\n    return useMutation({\n        mutationFn: async (data: Partial<MemberProfile>) => {\n            const response = await apiClient.put<ApiProfileResponse>(API_ENDPOINTS.MEMBERS_ME, data);\n            return memberAdapter.profile(response.data);\n        },\n        onSuccess: (updatedProfile) => {\n            queryClient.setQueryData(MEMBER_KEYS.profile(), updatedProfile);\n        },\n    });\n}\n\nexport function useMemberPaymentsQuery() {\n    return useQuery({\n        queryKey: MEMBER_KEYS.payments(),\n        queryFn: async () => {\n            const response = await apiClient.get<ApiPaymentsResponse>(API_ENDPOINTS.MEMBERS_PAYMENTS);\n            return memberAdapter.payments(response.data);\n        },\n        staleTime: 1000 * 60 * 5,\n    });\n}\n\nexport function useMemberMeetingsQuery() {\n    return useQuery({\n        queryKey: MEMBER_KEYS.meetings('joined'),\n        queryFn: async () => {\n            const response = await apiClient.get<ApiMeetingsResponse>(API_ENDPOINTS.MEMBERS_MEETINGS);\n            return memberAdapter.meetings(response.data);\n        },\n        staleTime: 1000 * 60 * 5,\n    });\n}\n\nexport function useAvailableMeetingsQuery() {\n    return useQuery({\n        queryKey: MEMBER_KEYS.meetings('available'),\n        queryFn: async () => {\n            const response = await apiClient.get<ApiMeetingsResponse>(API_ENDPOINTS.MEMBERS_MEETINGS_AVAILABLE);\n            return memberAdapter.meetings(response.data);\n        },\n        staleTime: 1000 * 60 * 5,\n    });\n}\n\nexport function useMemberDocumentsQuery() {\n    return useQuery({\n        queryKey: MEMBER_KEYS.documents(),\n        queryFn: async () => {\n            const response = await apiClient.get<ApiDocumentsResponse>(API_ENDPOINTS.MEMBERS_DOCUMENTS);\n            // Backend returns { data: { documents: [] } }\n            const docs = response.data?.documents || [];\n            return docs.map((d): Document => ({\n                id: d.id || '',\n                name: d.name || '',\n                type: d.type || '',\n                url: d.url || '',\n                createdAt: d.createdAt || '',\n            }));\n        },\n        staleTime: 1000 * 60 * 10,\n    });\n}\n\nexport function useMemberActivityQuery() {\n    return useQuery({\n        queryKey: MEMBER_KEYS.activity(),\n        queryFn: async () => {\n            const response = await apiClient.get<ApiActivityResponse>(API_ENDPOINTS.MEMBERS_ACTIVITY);\n            return memberAdapter.activity(response.data);\n        },\n        staleTime: 1000 * 60 * 2,\n    });\n}\n\nexport function useRsvpMutation() {\n    const queryClient = useQueryClient();\n\n    return useMutation({\n        mutationFn: async (meetingId: string) => {\n            const endpoint = API_ENDPOINTS.MEMBERS_MEETINGS_RSVP.replace(':id', meetingId);\n            return apiClient.post(endpoint, {});\n        },\n        onSuccess: () => {\n            queryClient.invalidateQueries({ queryKey: MEMBER_KEYS.meetings('joined') });\n            queryClient.invalidateQueries({ queryKey: MEMBER_KEYS.meetings('available') });\n        },\n    });\n}\n\nexport function useCancelRsvpMutation() {\n    const queryClient = useQueryClient();\n\n    return useMutation({\n        mutationFn: async (meetingId: string) => {\n            const endpoint = API_ENDPOINTS.MEMBERS_MEETINGS_RSVP.replace(':id', meetingId);\n            return apiClient.delete(endpoint);\n        },\n        onSuccess: () => {\n            queryClient.invalidateQueries({ queryKey: MEMBER_KEYS.meetings('joined') });\n            queryClient.invalidateQueries({ queryKey: MEMBER_KEYS.meetings('available') });\n        },\n    });\n}\n","/**\n * Member Data Hook\n * Aggregates granular TanStack Query hooks for better caching and reactivity.\n */\n\nimport { useMemo } from 'react';\nimport {\n  useMemberProfileQuery,\n  useUpdateMemberProfileMutation,\n  useMemberPaymentsQuery,\n  useMemberMeetingsQuery,\n  useAvailableMeetingsQuery,\n  useMemberDocumentsQuery,\n  useMemberActivityQuery,\n  useRsvpMutation,\n  useCancelRsvpMutation\n} from './queries/useMemberQueries';\n\n// Types\nexport interface MemberProfile {\n  id: string;\n  memberNumber: string;\n  firstName: string;\n  lastName: string;\n  email: string;\n  phone: string;\n  nationalId?: string;\n  occupation?: string;\n  address?: string;\n  county?: string;\n  subcounty?: string;\n  ward?: string;\n  interests?: string[];\n  skills?: string[];\n  status: 'PENDING' | 'ACTIVE' | 'SUSPENDED' | 'EXPIRED';\n  membershipType?: 'INDIVIDUAL' | 'GROUP';\n  groupName?: string;\n  currentMemberCount?: number;\n  maxMemberCountReached?: number;\n  membershipExpiresAt?: string;\n  joinedAt: string;\n  createdAt: string;\n}\n\nexport interface Payment {\n  id: string;\n  amount: number;\n  type: 'REGISTRATION' | 'RENEWAL' | 'DONATION';\n  status: 'PENDING' | 'COMPLETED' | 'FAILED';\n  method: 'STK_PUSH' | 'MANUAL';\n  mpesaReceiptNumber?: string;\n  createdAt: string;\n}\n\nexport interface Meeting {\n  id: string;\n  title: string;\n  description?: string;\n  date: string;\n  time: string;\n  location: string;\n  type: 'AGM' | 'SPECIAL' | 'COMMITTEE' | 'TRAINING';\n  status: 'UPCOMING' | 'ONGOING' | 'COMPLETED' | 'CANCELLED';\n  isRsvpd?: boolean;\n  attendeesCount?: number;\n  capacity?: number | null;\n}\n\nexport interface Document {\n  id: string;\n  name: string;\n  type: string;\n  url: string;\n  createdAt: string;\n}\n\nexport interface Activity {\n  id: string;\n  type: string;\n  description: string;\n  createdAt: string;\n  timestamp?: string;\n}\n\n/**\n * useMemberData Hook (Refactored)\n * Recommended: Use the granular hooks directly in components for better performance.\n */\nexport function useMemberData() {\n  const profileQuery = useMemberProfileQuery();\n  const updateProfileMutation = useUpdateMemberProfileMutation();\n  const paymentsQuery = useMemberPaymentsQuery();\n  const meetingsQuery = useMemberMeetingsQuery();\n  const availableMeetingsQuery = useAvailableMeetingsQuery();\n  const documentsQuery = useMemberDocumentsQuery();\n  const activityQuery = useMemberActivityQuery();\n  const rsvpMutation = useRsvpMutation();\n  const cancelRsvpMutation = useCancelRsvpMutation();\n\n  // Aggregate loading and error states\n  const isLoading =\n    profileQuery.isLoading ||\n    paymentsQuery.isLoading ||\n    meetingsQuery.isLoading ||\n    documentsQuery.isLoading ||\n    activityQuery.isLoading;\n\n  const error =\n    (profileQuery.error as Error)?.message ||\n    (paymentsQuery.error as Error)?.message ||\n    null;\n\n  // Computed values\n  const totalPayments = useMemo(() =>\n    (paymentsQuery.data || [])\n      .filter((p: Payment) => p.status === 'COMPLETED')\n      .reduce((sum: number, p: Payment) => sum + p.amount, 0),\n    [paymentsQuery.data]\n  );\n\n  const pendingPayments = useMemo(() =>\n    (paymentsQuery.data || []).filter((p: Payment) => p.status === 'PENDING').length,\n    [paymentsQuery.data]\n  );\n\n  const upcomingMeetings = useMemo(() =>\n    (meetingsQuery.data || []).filter((m: Meeting) => m.status === 'UPCOMING').length,\n    [meetingsQuery.data]\n  );\n\n  const daysUntilExpiry = useMemo(() => {\n    const expiry = profileQuery.data?.membershipExpiresAt;\n    if (!expiry) return null;\n    return Math.ceil((new Date(expiry).getTime() - Date.now()) / (1000 * 60 * 60 * 24));\n  }, [profileQuery.data?.membershipExpiresAt]);\n\n  const isExpired = daysUntilExpiry !== null && daysUntilExpiry <= 0;\n  const isExpiringSoon = daysUntilExpiry !== null && daysUntilExpiry > 0 && daysUntilExpiry <= 30;\n\n  return {\n    profile: profileQuery.data || null,\n    payments: paymentsQuery.data || [],\n    meetings: meetingsQuery.data || [],\n    availableMeetings: availableMeetingsQuery.data || [],\n    documents: documentsQuery.data || [],\n    activity: activityQuery.data || [],\n    isLoading,\n    error,\n    fetchProfile: profileQuery.refetch,\n    updateProfile: updateProfileMutation.mutateAsync,\n    fetchPayments: paymentsQuery.refetch,\n    fetchMeetings: meetingsQuery.refetch,\n    fetchAvailableMeetings: availableMeetingsQuery.refetch,\n    rsvpToMeeting: rsvpMutation.mutateAsync,\n    cancelRsvp: cancelRsvpMutation.mutateAsync,\n    fetchDocuments: documentsQuery.refetch,\n    fetchActivity: activityQuery.refetch,\n    fetchAll: async () => {\n      await Promise.all([\n        profileQuery.refetch(),\n        paymentsQuery.refetch(),\n        meetingsQuery.refetch(),\n        documentsQuery.refetch(),\n        activityQuery.refetch(),\n      ]);\n    },\n    totalPayments,\n    pendingPayments,\n    upcomingMeetings,\n    daysUntilExpiry,\n    isExpired,\n    isExpiringSoon,\n  };\n}\n"],"names":["NAV_ITEMS","PortalNavigation","jsx","item","jsxs","NavLink","isActive","PortalLayout","children","title","subtitle","showNavigation","user","logout","useAuth","navigate","useNavigate","handleLogout","Link","memberAdapter","apiData","source","p","m","MEMBER_KEYS","type","useMemberProfileQuery","useQuery","response","apiClient","API_ENDPOINTS","useUpdateMemberProfileMutation","queryClient","useQueryClient","useMutation","data","updatedProfile","useMemberPaymentsQuery","useMemberMeetingsQuery","useAvailableMeetingsQuery","useMemberDocumentsQuery","_a","d","useMemberActivityQuery","useRsvpMutation","meetingId","endpoint","useCancelRsvpMutation","useMemberData","profileQuery","updateProfileMutation","paymentsQuery","meetingsQuery","availableMeetingsQuery","documentsQuery","activityQuery","rsvpMutation","cancelRsvpMutation","isLoading","error","_b","totalPayments","useMemo","sum","pendingPayments","upcomingMeetings","daysUntilExpiry","expiry","_c","isExpired","isExpiringSoon"],"mappings":"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"}