import{a as d,j as e}from"./query-vendor-DeB3i2OK.js";import{a as v,b as y,F as N,u as w,C as j}from"./types-BhtRVJps.js";import{u as k,P as p}from"./useMemberData-DiEyG-YL.js";import{p as C}from"./validation-CTHXs4dF.js";import{B as m}from"./Button-jhyg_cfE.js";import{C as P,a as S}from"./Card-v3mmPc0d.js";import{F as t}from"./FormField-CY_glc5T.js";import{S as F}from"./Spinner-DGXkvh-k.js";import{n as h}from"./index-YnLEVKPI.js";import"./react-vendor-D3fc32Hw.js";import"./endpoints-Cofiu-EW.js";import"./validators-Bs4kFX5e.js";import"./helpers-C-aBis0i.js";import"./Input-BK6NcICT.js";import"./animation-vendor-JsFu8W7l.js";function r({label:s,value:l}){return e.jsxs("div",{className:"rounded-xl border border-gray-100/50 bg-gray-50/50 p-4",children:[e.jsx("p",{className:"mb-1 text-xs font-bold uppercase tracking-wider text-gray-500",children:s}),e.jsx("p",{className:"text-lg font-semibold text-gray-800",children:Array.isArray(l)?l.join(", "):l??"--"})]})}function E({profile:s,onEdit:l}){return e.jsxs("div",{id:"profile-view",children:[e.jsxs("div",{className:"mb-8 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-wiria-blue-dark",children:"Profile Information"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Your personal and contact details"})]}),e.jsx(m,{onClick:l,variant:"outline",children:"Edit Profile"})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsx(r,{label:"Full Name",value:`${s?.firstName} ${s?.lastName}`}),e.jsx(r,{label:"Email Address",value:s?.email}),e.jsx(r,{label:"Phone Number",value:s?.phone}),e.jsx(r,{label:"National ID",value:s?.nationalId}),e.jsx(r,{label:"Occupation",value:s?.occupation}),e.jsx(r,{label:"Address",value:s?.address}),e.jsx(r,{label:"County",value:s?.county}),e.jsx(r,{label:"Sub-County",value:s?.subcounty}),e.jsx(r,{label:"Ward",value:s?.ward}),e.jsx("div",{className:"md:col-span-2",children:e.jsx(r,{label:"Interests",value:s?.interests})}),e.jsx("div",{className:"md:col-span-2",children:e.jsx(r,{label:"Skills",value:s?.skills})})]})]})}function A({isSaving:s,onSubmit:l,onCancel:o}){const{handleSubmit:c}=w();return e.jsxs("form",{onSubmit:a=>{c(l)(a)},className:"space-y-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-wiria-blue-dark",children:"Edit Member Profile"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Keep your information up to date"})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsx(t,{label:"First Name",name:"firstName",required:!0}),e.jsx(t,{label:"Last Name",name:"lastName",required:!0}),e.jsx(t,{label:"Phone",name:"phone",type:"tel",placeholder:"e.g. 0712345678"}),e.jsx(t,{label:"Occupation",name:"occupation"}),e.jsx("div",{className:"md:col-span-2",children:e.jsx(t,{label:"Address",name:"address"})}),e.jsx(t,{label:"County",name:"county"}),e.jsx(t,{label:"Sub-County",name:"subcounty"}),e.jsx(t,{label:"Ward",name:"ward"}),e.jsx("div",{className:"md:col-span-2",children:e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{htmlFor:"interests",className:"text-sm font-semibold text-wiria-blue-dark",children:"Interests"}),e.jsx(j,{name:"interests",render:({field:a})=>e.jsx("input",{...a,id:"interests",value:Array.isArray(a.value)?a.value.join(", "):"",onChange:i=>a.onChange(i.target.value.split(",").map(n=>n.trim())),className:"block w-full rounded-lg border border-gray-300 bg-white p-3 text-wiria-blue-dark outline-none transition-all focus:border-wiria-blue-dark focus:ring-1 focus:ring-wiria-blue-dark"})}),e.jsx("p",{className:"text-xs text-gray-400",children:"Comma separated list of interests"})]})}),e.jsx("div",{className:"md:col-span-2",children:e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{htmlFor:"skills",className:"text-sm font-semibold text-wiria-blue-dark",children:"Skills"}),e.jsx(j,{name:"skills",render:({field:a})=>e.jsx("input",{...a,id:"skills",value:Array.isArray(a.value)?a.value.join(", "):"",onChange:i=>a.onChange(i.target.value.split(",").map(n=>n.trim())),className:"block w-full rounded-lg border border-gray-300 bg-white p-3 text-wiria-blue-dark outline-none transition-all focus:border-wiria-blue-dark focus:ring-1 focus:ring-wiria-blue-dark"})}),e.jsx("p",{className:"text-xs text-gray-400",children:"Comma separated list of skills"})]})})]}),e.jsxs("div",{className:"flex gap-4 border-t pt-4",children:[e.jsx(m,{type:"submit",className:"h-12 flex-1",isLoading:s,children:"Save Changes"}),e.jsx(m,{type:"button",className:"h-12 flex-1",variant:"outline",onClick:o,disabled:s,children:"Cancel"})]})]})}function H(){const{profile:s,isLoading:l,fetchProfile:o,updateProfile:c}=k(),[a,i]=d.useState(!1),[n,u]=d.useState(!1),x=v({resolver:y(C)}),{reset:b}=x;d.useEffect(()=>{o()},[o]),d.useEffect(()=>{s&&b({firstName:s.firstName,lastName:s.lastName,phone:s.phone,occupation:s.occupation,address:s.address,county:s.county,subcounty:s.subcounty,ward:s.ward,interests:s.interests,skills:s.skills})},[s,b]);const f=async g=>{u(!0);try{await c(g),h.success("Profile updated successfully"),i(!1)}catch{h.error("Failed to update profile")}finally{u(!1)}};return l&&!s?e.jsx(p,{title:"Member Profile",children:e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx(F,{size:"lg"})})}):e.jsx(p,{title:"Member Profile",subtitle:"View and manage your profile information",children:e.jsx("div",{className:"max-w-4xl",children:e.jsxs(P,{className:"overflow-hidden border-none shadow-xl",children:[e.jsx("div",{className:"h-2 w-full bg-gradient-to-r from-wiria-blue-dark via-wiria-yellow to-wiria-green-light"}),e.jsx(S,{className:"p-8",children:e.jsxs(N,{...x,children:[!a&&s&&e.jsx(E,{profile:s,onEdit:()=>i(!0)}),a&&e.jsx(A,{isSaving:n,onSubmit:f,onCancel:()=>i(!1)})]})})]})})})}export{H as default};
//# sourceMappingURL=MemberProfilePage-DVIw8CRR.js.map
