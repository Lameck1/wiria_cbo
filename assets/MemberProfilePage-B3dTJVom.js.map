{"version":3,"file":"MemberProfilePage-B3dTJVom.js","sources":["../../src/pages/MemberProfilePage.tsx"],"sourcesContent":["import { useEffect, useState } from 'react';\n\nimport { zodResolver } from '@hookform/resolvers/zod';\nimport { Controller, FormProvider, useForm, useFormContext } from 'react-hook-form';\n\nimport { PortalLayout } from '@/features/membership/components/PortalLayout';\nimport { useMemberData } from '@/features/membership/hooks/useMemberData';\nimport type { ProfileFormSchema } from '@/features/membership/validation';\nimport { profileSchema } from '@/features/membership/validation';\nimport { Button } from '@/shared/components/ui/Button';\nimport { Card, CardBody } from '@/shared/components/ui/Card';\nimport { FormField } from '@/shared/components/ui/form';\nimport { Spinner } from '@/shared/components/ui/Spinner';\nimport { notificationService } from '@/shared/services/notification/notificationService';\n\ninterface ProfileFieldProps {\n  label: string;\n  value?: string | string[];\n}\n\nfunction ProfileField({ label, value }: ProfileFieldProps) {\n  return (\n    <div className=\"rounded-xl border border-gray-100/50 bg-gray-50/50 p-4\">\n      <p className=\"mb-1 text-xs font-bold uppercase tracking-wider text-gray-500\">{label}</p>\n      <p className=\"text-lg font-semibold text-gray-800\">\n        {Array.isArray(value) ? value.join(', ') : (value ?? '--')}\n      </p>\n    </div>\n  );\n}\n\ntype MemberProfile = ReturnType<typeof useMemberData>['profile'];\n\ninterface MemberProfileViewProps {\n  profile: MemberProfile;\n  onEdit: () => void;\n}\n\nfunction MemberProfileView({ profile, onEdit }: MemberProfileViewProps) {\n  return (\n    <div id=\"profile-view\">\n      <div className=\"mb-8 flex items-center justify-between\">\n        <div>\n          <h2 className=\"text-2xl font-bold text-wiria-blue-dark\">Profile Information</h2>\n          <p className=\"text-sm text-gray-500\">Your personal and contact details</p>\n        </div>\n        <Button onClick={onEdit} variant=\"outline\">\n          Edit Profile\n        </Button>\n      </div>\n\n      <div className=\"grid grid-cols-1 gap-6 md:grid-cols-2\">\n        <ProfileField label=\"Full Name\" value={`${profile?.firstName} ${profile?.lastName}`} />\n        <ProfileField label=\"Email Address\" value={profile?.email} />\n        <ProfileField label=\"Phone Number\" value={profile?.phone} />\n        <ProfileField label=\"National ID\" value={profile?.nationalId} />\n        <ProfileField label=\"Occupation\" value={profile?.occupation} />\n        <ProfileField label=\"Address\" value={profile?.address} />\n        <ProfileField label=\"County\" value={profile?.county} />\n        <ProfileField label=\"Sub-County\" value={profile?.subcounty} />\n        <ProfileField label=\"Ward\" value={profile?.ward} />\n        <div className=\"md:col-span-2\">\n          <ProfileField label=\"Interests\" value={profile?.interests} />\n        </div>\n        <div className=\"md:col-span-2\">\n          <ProfileField label=\"Skills\" value={profile?.skills} />\n        </div>\n      </div>\n    </div>\n  );\n}\n\ninterface MemberProfileEditFormProps {\n  isSaving: boolean;\n  onSubmit: (data: ProfileFormSchema) => Promise<void>;\n  onCancel: () => void;\n}\n\nfunction MemberProfileEditForm({ isSaving, onSubmit, onCancel }: MemberProfileEditFormProps) {\n  const { handleSubmit } = useFormContext<ProfileFormSchema>();\n\n  return (\n    <form\n      onSubmit={(event) => {\n        void handleSubmit(onSubmit)(event);\n      }}\n      className=\"space-y-8\"\n    >\n      <div className=\"mb-8\">\n        <h2 className=\"text-2xl font-bold text-wiria-blue-dark\">Edit Member Profile</h2>\n        <p className=\"text-sm text-gray-500\">Keep your information up to date</p>\n      </div>\n\n      <div className=\"grid grid-cols-1 gap-6 md:grid-cols-2\">\n        <FormField label=\"First Name\" name=\"firstName\" required />\n        <FormField label=\"Last Name\" name=\"lastName\" required />\n        <FormField label=\"Phone\" name=\"phone\" type=\"tel\" placeholder=\"e.g. 0712345678\" />\n        <FormField label=\"Occupation\" name=\"occupation\" />\n        <div className=\"md:col-span-2\">\n          <FormField label=\"Address\" name=\"address\" />\n        </div>\n        <FormField label=\"County\" name=\"county\" />\n        <FormField label=\"Sub-County\" name=\"subcounty\" />\n        <FormField label=\"Ward\" name=\"ward\" />\n        <div className=\"md:col-span-2\">\n          <div className=\"space-y-1.5\">\n            <label htmlFor=\"interests\" className=\"text-sm font-semibold text-wiria-blue-dark\">\n              Interests\n            </label>\n            <Controller\n              name=\"interests\"\n              render={({ field }) => (\n                <input\n                  {...field}\n                  id=\"interests\"\n                  value={Array.isArray(field.value) ? field.value.join(', ') : ''}\n                  onChange={(event) =>\n                    field.onChange(\n                      event.target.value.split(',').map((valueItem) => valueItem.trim())\n                    )\n                  }\n                  className=\"block w-full rounded-lg border border-gray-300 bg-white p-3 text-wiria-blue-dark outline-none transition-all focus:border-wiria-blue-dark focus:ring-1 focus:ring-wiria-blue-dark\"\n                />\n              )}\n            />\n            <p className=\"text-xs text-gray-400\">Comma separated list of interests</p>\n          </div>\n        </div>\n        <div className=\"md:col-span-2\">\n          <div className=\"space-y-1.5\">\n            <label htmlFor=\"skills\" className=\"text-sm font-semibold text-wiria-blue-dark\">\n              Skills\n            </label>\n            <Controller\n              name=\"skills\"\n              render={({ field }) => (\n                <input\n                  {...field}\n                  id=\"skills\"\n                  value={Array.isArray(field.value) ? field.value.join(', ') : ''}\n                  onChange={(event) =>\n                    field.onChange(\n                      event.target.value.split(',').map((valueItem) => valueItem.trim())\n                    )\n                  }\n                  className=\"block w-full rounded-lg border border-gray-300 bg-white p-3 text-wiria-blue-dark outline-none transition-all focus:border-wiria-blue-dark focus:ring-1 focus:ring-wiria-blue-dark\"\n                />\n              )}\n            />\n            <p className=\"text-xs text-gray-400\">Comma separated list of skills</p>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"flex gap-4 border-t pt-4\">\n        <Button type=\"submit\" className=\"h-12 flex-1\" isLoading={isSaving}>\n          Save Changes\n        </Button>\n        <Button\n          type=\"button\"\n          className=\"h-12 flex-1\"\n          variant=\"outline\"\n          onClick={onCancel}\n          disabled={isSaving}\n        >\n          Cancel\n        </Button>\n      </div>\n    </form>\n  );\n}\n\nfunction MemberProfilePage() {\n  const { profile, isLoading, fetchProfile, updateProfile } = useMemberData();\n  const [isEditing, setIsEditing] = useState(false);\n  const [isSaving, setIsSaving] = useState(false);\n\n  const methods = useForm<ProfileFormSchema>({\n    resolver: zodResolver(profileSchema),\n  });\n\n  const { reset } = methods;\n\n  useEffect(() => {\n    void fetchProfile();\n  }, [fetchProfile]);\n\n  useEffect(() => {\n    if (profile) {\n      reset({\n        firstName: profile.firstName,\n        lastName: profile.lastName,\n        phone: profile.phone,\n        occupation: profile.occupation,\n        address: profile.address,\n        county: profile.county,\n        subcounty: profile.subcounty,\n        ward: profile.ward,\n        interests: profile.interests,\n        skills: profile.skills,\n      });\n    }\n  }, [profile, reset]);\n\n  const onSubmit = async (data: ProfileFormSchema) => {\n    setIsSaving(true);\n    try {\n      await updateProfile(data);\n      notificationService.success('Profile updated successfully');\n      setIsEditing(false);\n    } catch {\n      notificationService.error('Failed to update profile');\n    } finally {\n      setIsSaving(false);\n    }\n  };\n\n  if (isLoading && !profile) {\n    return (\n      <PortalLayout title=\"Member Profile\">\n        <div className=\"flex items-center justify-center py-20\">\n          <Spinner size=\"lg\" />\n        </div>\n      </PortalLayout>\n    );\n  }\n  return (\n    <PortalLayout title=\"Member Profile\" subtitle=\"View and manage your profile information\">\n      <div className=\"max-w-4xl\">\n        <Card className=\"overflow-hidden border-none shadow-xl\">\n          <div className=\"h-2 w-full bg-gradient-to-r from-wiria-blue-dark via-wiria-yellow to-wiria-green-light\" />\n\n          <CardBody className=\"p-8\">\n            <FormProvider {...methods}>\n              {!isEditing && profile && (\n                <MemberProfileView profile={profile} onEdit={() => setIsEditing(true)} />\n              )}\n              {isEditing && (\n                <MemberProfileEditForm\n                  isSaving={isSaving}\n                  onSubmit={onSubmit}\n                  onCancel={() => setIsEditing(false)}\n                />\n              )}\n            </FormProvider>\n          </CardBody>\n        </Card>\n      </div>\n    </PortalLayout>\n  );\n}\n\nexport default MemberProfilePage;\n"],"names":["ProfileField","label","value","jsxs","jsx","MemberProfileView","profile","onEdit","Button","MemberProfileEditForm","isSaving","onSubmit","onCancel","handleSubmit","useFormContext","event","FormField","Controller","field","valueItem","MemberProfilePage","isLoading","fetchProfile","updateProfile","useMemberData","isEditing","setIsEditing","useState","setIsSaving","methods","useForm","zodResolver","profileSchema","reset","useEffect","data","notificationService","PortalLayout","Spinner","Card","CardBody","FormProvider"],"mappings":"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"}