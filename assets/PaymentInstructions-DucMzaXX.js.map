{"version":3,"file":"PaymentInstructions-DucMzaXX.js","sources":["../../src/features/donations/hooks/usePaymentPoller.ts","../../src/features/donations/components/PaymentMethodToggle.tsx","../../src/features/donations/components/PaymentInstructions.tsx"],"sourcesContent":["/**\n * Payment Status Poller Hook\n * Polls payment status at regular intervals\n */\n\nimport { useEffect, useRef } from 'react';\n\ninterface UsePaymentPollerProps {\n    donationId: string | null;\n    isActive: boolean;\n    onStatusCheck: (donationId: string) => Promise<string>;\n    interval?: number;\n}\n\nexport function usePaymentPoller({\n    donationId,\n    isActive,\n    onStatusCheck,\n    interval = 5000, // 5 seconds\n}: UsePaymentPollerProps) {\n    const intervalRef = useRef<NodeJS.Timeout | null>(null);\n\n    useEffect(() => {\n        if (!isActive || !donationId) {\n            if (intervalRef.current) {\n                clearInterval(intervalRef.current);\n                intervalRef.current = null;\n            }\n            return;\n        }\n\n        // Initial check\n        const checkStatus = async () => {\n            const status = await onStatusCheck(donationId);\n\n            // Stop polling if payment is complete or failed\n            if (status === 'COMPLETED' || status === 'FAILED') {\n                if (intervalRef.current) {\n                    clearInterval(intervalRef.current);\n                    intervalRef.current = null;\n                }\n            }\n        };\n\n        checkStatus();\n\n        // Set up polling interval\n        intervalRef.current = setInterval(checkStatus, interval);\n\n        // Cleanup on unmount\n        return () => {\n            if (intervalRef.current) {\n                clearInterval(intervalRef.current);\n                intervalRef.current = null;\n            }\n        };\n    }, [donationId, isActive, onStatusCheck, interval]);\n}\n","/**\n * Payment Method Selector Component\n */\n\nimport { motion } from 'framer-motion';\n\ninterface PaymentMethodToggleProps {\n    selected: 'STK_PUSH' | 'MANUAL';\n    onChange: (method: 'STK_PUSH' | 'MANUAL') => void;\n    disabled?: boolean;\n}\n\nexport function PaymentMethodToggle({ selected, onChange, disabled }: PaymentMethodToggleProps) {\n    return (\n        <div>\n            <label className=\"block text-sm font-semibold text-wiria-blue-dark mb-4\">\n                Payment Method <span className=\"text-red-500\">*</span>\n            </label>\n            <div className=\"grid grid-cols-2 gap-4\">\n                <motion.button\n                    type=\"button\"\n                    whileHover={{ y: -2 }}\n                    whileTap={{ scale: 0.98 }}\n                    onClick={() => onChange('STK_PUSH')}\n                    disabled={disabled}\n                    className={`\n                        relative p-5 rounded-2xl border-2 text-center transition-all duration-200\n                        ${selected === 'STK_PUSH'\n                            ? 'border-wiria-yellow bg-wiria-yellow/5 shadow-lg shadow-wiria-yellow/10 ring-2 ring-wiria-yellow/20'\n                            : 'border-gray-100 bg-white hover:border-wiria-yellow/30 hover:bg-gray-50 shadow-sm'\n                        }\n                        disabled:opacity-50 disabled:cursor-not-allowed\n                    `}\n                >\n                    <div className=\"text-4xl mb-3\">üì±</div>\n                    <div className=\"font-bold text-wiria-blue-dark\">M-Pesa STK Push</div>\n                    <div className=\"text-xs font-medium text-gray-500 mt-1\">Instant & Secure</div>\n\n                    {selected === 'STK_PUSH' && (\n                        <motion.div\n                            layoutId=\"activePayment\"\n                            className=\"absolute -top-2 -right-2 bg-wiria-yellow text-white w-6 h-6 rounded-full flex items-center justify-center text-xs shadow-md border-2 border-white\"\n                            initial={{ scale: 0 }}\n                            animate={{ scale: 1 }}\n                        >\n                            ‚úì\n                        </motion.div>\n                    )}\n                </motion.button>\n\n                <motion.button\n                    type=\"button\"\n                    whileHover={{ y: -2 }}\n                    whileTap={{ scale: 0.98 }}\n                    onClick={() => onChange('MANUAL')}\n                    disabled={disabled}\n                    className={`\n                        relative p-5 rounded-2xl border-2 text-center transition-all duration-200\n                        ${selected === 'MANUAL'\n                            ? 'border-wiria-yellow bg-wiria-yellow/5 shadow-lg shadow-wiria-yellow/10 ring-2 ring-wiria-yellow/20'\n                            : 'border-gray-100 bg-white hover:border-wiria-yellow/30 hover:bg-gray-50 shadow-sm'\n                        }\n                        disabled:opacity-50 disabled:cursor-not-allowed\n                    `}\n                >\n                    <div className=\"text-4xl mb-3\">üè¶</div>\n                    <div className=\"font-bold text-wiria-blue-dark\">Manual Paybill</div>\n                    <div className=\"text-xs font-medium text-gray-500 mt-1\">Direct Bank/M-Pesa</div>\n\n                    {selected === 'MANUAL' && (\n                        <motion.div\n                            layoutId=\"activePayment\"\n                            className=\"absolute -top-2 -right-2 bg-wiria-yellow text-white w-6 h-6 rounded-full flex items-center justify-center text-xs shadow-md border-2 border-white\"\n                            initial={{ scale: 0 }}\n                            animate={{ scale: 1 }}\n                        >\n                            ‚úì\n                        </motion.div>\n                    )}\n                </motion.button>\n            </div>\n        </div>\n    );\n}\n","/**\n * Payment Instructions Component\n */\n\nimport { Card, CardBody } from '@/shared/components/ui/Card';\n\ninterface PaymentInstructionsProps {\n    paymentMethod: 'STK_PUSH' | 'MANUAL';\n    amount: number;\n    submitLabel?: string;\n    accountNumber?: string;\n}\n\nexport function PaymentInstructions({\n    paymentMethod,\n    amount,\n    submitLabel = 'Submit Donation',\n    accountNumber = 'DONATION'\n}: PaymentInstructionsProps) {\n    if (paymentMethod === 'STK_PUSH') {\n        return (\n            <Card className=\"bg-blue-50 border-2 border-blue-200\">\n                <CardBody>\n                    <h3 className=\"font-semibold text-wiria-blue-dark mb-3 flex items-center gap-2\">\n                        <span className=\"text-2xl\">üì±</span>\n                        M-Pesa STK Push Instructions\n                    </h3>\n                    <ol className=\"space-y-2 text-sm text-gray-700\">\n                        <li className=\"flex items-start gap-2\">\n                            <span className=\"font-semibold text-wiria-blue-dark\">1.</span>\n                            <span>Enter your M-Pesa registered phone number</span>\n                        </li>\n                        <li className=\"flex items-start gap-2\">\n                            <span className=\"font-semibold text-wiria-blue-dark\">2.</span>\n                            <span>Click \"{submitLabel}\"</span>\n                        </li>\n                        <li className=\"flex items-start gap-2\">\n                            <span className=\"font-semibold text-wiria-blue-dark\">3.</span>\n                            <span>Check your phone for an M-Pesa prompt</span>\n                        </li>\n                        <li className=\"flex items-start gap-2\">\n                            <span className=\"font-semibold text-wiria-blue-dark\">4.</span>\n                            <span>Enter your M-Pesa PIN to complete the payment</span>\n                        </li>\n                    </ol>\n                </CardBody>\n            </Card>\n        );\n    }\n\n    return (\n        <Card className=\"bg-green-50 border-2 border-green-200\">\n            <CardBody>\n                <h3 className=\"font-semibold text-wiria-blue-dark mb-3 flex items-center gap-2\">\n                    <span className=\"text-2xl\">üè¶</span>\n                    Manual Paybill Instructions\n                </h3>\n                <div className=\"space-y-3 text-sm\">\n                    <div className=\"bg-white rounded-lg p-3 border border-green-200\">\n                        <p className=\"text-gray-600 mb-2\">Pay via M-Pesa Paybill:</p>\n                        <div className=\"grid grid-cols-2 gap-2\">\n                            <div>\n                                <span className=\"text-xs text-gray-500\">Business Number:</span>\n                                <p className=\"font-bold text-lg text-wiria-blue-dark\">123456</p>\n                            </div>\n                            <div>\n                                <span className=\"text-xs text-gray-500\">Account Number:</span>\n                                <p className=\"font-bold text-lg text-wiria-blue-dark\">{accountNumber}</p>\n                            </div>\n                        </div>\n                    </div>\n                    <ol className=\"space-y-2 text-gray-700\">\n                        <li className=\"flex items-start gap-2\">\n                            <span className=\"font-semibold text-wiria-blue-dark\">1.</span>\n                            <span>Go to M-Pesa menu on your phone</span>\n                        </li>\n                        <li className=\"flex items-start gap-2\">\n                            <span className=\"font-semibold text-wiria-blue-dark\">2.</span>\n                            <span>Select \"Lipa na M-Pesa\" then \"Paybill\"</span>\n                        </li>\n                        <li className=\"flex items-start gap-2\">\n                            <span className=\"font-semibold text-wiria-blue-dark\">3.</span>\n                            <span>Enter Business Number: <strong>123456</strong></span>\n                        </li>\n                        <li className=\"flex items-start gap-2\">\n                            <span className=\"font-semibold text-wiria-blue-dark\">4.</span>\n                            <span>Enter Account Number: <strong>{accountNumber}</strong></span>\n                        </li>\n                        <li className=\"flex items-start gap-2\">\n                            <span className=\"font-semibold text-wiria-blue-dark\">5.</span>\n                            <span>Enter Amount: <strong>KES {amount.toLocaleString()}</strong></span>\n                        </li>\n                        <li className=\"flex items-start gap-2\">\n                            <span className=\"font-semibold text-wiria-blue-dark\">6.</span>\n                            <span>Enter your M-Pesa PIN and confirm</span>\n                        </li>\n                    </ol>\n                    <p className=\"text-xs text-gray-600 italic mt-3\">\n                        After payment, you'll receive an M-Pesa confirmation SMS. Your payment will be\n                        processed within 24 hours.\n                    </p>\n                </div>\n            </CardBody>\n        </Card>\n    );\n}\n"],"names":["usePaymentPoller","donationId","isActive","onStatusCheck","interval","intervalRef","useRef","useEffect","checkStatus","status","PaymentMethodToggle","selected","onChange","disabled","jsxs","jsx","motion","PaymentInstructions","paymentMethod","amount","submitLabel","accountNumber","Card","CardBody"],"mappings":"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"}