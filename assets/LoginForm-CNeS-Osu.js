import{a as g,j as e}from"./query-vendor-DeB3i2OK.js";import{u as j,L as p}from"./react-vendor-D3fc32Hw.js";import{B as L}from"./Button-DJTJFzQ2.js";import{F as b}from"./Form-DBW_jRlA.js";import{F as h}from"./FormField-BmXHN9h6.js";import{u as y,n as x,U as l,R as m,A as N}from"./index-8OXY4Dao.js";import{o as E,s as f}from"./types-BhtRVJps.js";function v(s=!1){const[c,a]=g.useState(!1),[d,r]=g.useState(null),{login:i}=y(),o=j();return{handleLogin:async w=>{a(!0),r(null);try{const n=await i(w,s);x.success("Login successful!");const t=n.role;t===l.MEMBER?o(m.MEMBER_PORTAL,{replace:!0}):[l.SUPER_ADMIN,l.ADMIN,l.STAFF].includes(t)?o(m.ADMIN,{replace:!0}):o(m.HOME,{replace:!0})}catch(n){const t=n instanceof N?n.message||"Invalid credentials":"Login failed. Please try again.";r(t),x.error(t)}finally{a(!1)}},isLoading:c,error:d}}const F=E({identifier:f().min(3,"Username, email or phone is required"),password:f().min(6,"Password must be at least 6 characters")});function T({isMember:s=!1,title:c,subtitle:a}){const{handleLogin:d,isLoading:r,error:i}=v(s),o=async u=>{await d(u)};return e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"mb-8 text-center",children:[e.jsx("h1",{className:"mb-2 text-3xl font-bold text-wiria-blue-dark",children:c??(s?"Member Login":"Staff Login")}),a&&e.jsx("p",{className:"text-gray-600",children:a})]}),e.jsx(b,{schema:F,defaultValues:{identifier:"",password:""},onSubmit:o,className:"rounded-lg bg-white p-8 shadow-lg",children:()=>e.jsxs(e.Fragment,{children:[e.jsx(h,{name:"identifier",label:s?"Email or Phone":"Username or Email",placeholder:s?"your@email.com or 0712345678":"username",disabled:r}),e.jsx(h,{name:"password",label:"Password",type:"password",placeholder:"Enter your password",disabled:r}),i&&e.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 p-3",children:e.jsx("p",{className:"text-sm text-red-800",children:i})}),e.jsx(L,{type:"submit",fullWidth:!0,isLoading:r,children:r?"Logging in...":"Login"}),e.jsxs("div",{className:"space-y-2 text-center text-sm",children:[e.jsx(p,{to:"/reset-password",className:"block text-wiria-blue-dark transition-colors hover:text-wiria-yellow",children:"Forgot password?"}),s&&e.jsxs("p",{className:"text-gray-600",children:["Not a member?"," ",e.jsx(p,{to:"/membership",className:"text-wiria-yellow hover:underline",children:"Register here"})]})]})]})})]})}export{T as L};
//# sourceMappingURL=LoginForm-CNeS-Osu.js.map
