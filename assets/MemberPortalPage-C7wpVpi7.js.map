{"version":3,"file":"MemberPortalPage-C7wpVpi7.js","sources":["../../src/pages/MemberPortalPage.tsx"],"sourcesContent":["/**\n * Member Portal Page (Dashboard)\n * Main dashboard for logged-in members\n */\n\nimport { useEffect } from 'react';\n\nimport { Link } from 'react-router-dom';\n\nimport { PortalLayout } from '@/features/membership/components/PortalLayout';\nimport {\n  useMemberData,\n  type MemberProfile,\n  type Meeting,\n  type Activity,\n} from '@/features/membership/hooks/useMemberData';\nimport { Button } from '@/shared/components/ui/Button';\nimport { Card, CardBody, CardHeader } from '@/shared/components/ui/Card';\nimport { Spinner } from '@/shared/components/ui/Spinner';\n\n// --- Sub-components ---\n\ninterface MemberProfileCardProps {\n  profile: MemberProfile | null;\n  statusText: string;\n  statusTextColor: string;\n  statusColor: string;\n}\n\nconst MemberProfileCard = ({\n  profile,\n  statusText,\n  statusTextColor,\n  statusColor,\n}: MemberProfileCardProps) => (\n  <Card>\n    <CardBody>\n      <div className=\"mb-4 flex items-center gap-4\">\n        <div className=\"flex h-16 w-16 items-center justify-center rounded-full bg-wiria-blue-dark text-2xl font-bold text-white\">\n          {profile?.firstName?.[0]}\n          {profile?.lastName?.[0]}\n        </div>\n        <div>\n          <h2 className=\"text-xl font-bold text-wiria-blue-dark\">\n            {profile?.firstName} {profile?.lastName}\n          </h2>\n          <p className=\"text-sm text-gray-500\">{profile?.email}</p>\n        </div>\n      </div>\n      <div className=\"space-y-2 text-sm\">\n        <div className=\"flex justify-between\">\n          <span className=\"text-gray-500\">Member ID:</span>\n          <span className=\"font-semibold text-gray-800\">{profile?.memberNumber ?? '--'}</span>\n        </div>\n        <div className=\"flex items-center justify-between\">\n          <span className=\"text-gray-500\">Status:</span>\n          <span\n            className={`rounded px-2 py-0.5 text-xs font-bold uppercase ${statusTextColor} ${statusColor}`}\n          >\n            {statusText}\n          </span>\n        </div>\n      </div>\n      <Link to=\"/member-profile\">\n        <Button className=\"mt-4 w-full\" variant=\"primary\">\n          View Profile\n        </Button>\n      </Link>\n    </CardBody>\n  </Card>\n);\n\ninterface MembershipStatusCardProps {\n  isExpired: boolean;\n  daysUntilExpiry: number | null;\n  joinedAt?: string;\n}\n\nconst MembershipStatusCard = ({\n  isExpired,\n  daysUntilExpiry,\n  joinedAt,\n}: MembershipStatusCardProps) => (\n  <Card\n    className={`bg-gradient-to-br from-wiria-blue-dark to-blue-900 text-white ${isExpired ? 'ring-2 ring-red-500' : ''}`}\n  >\n    <CardBody>\n      <h3 className=\"mb-2 text-lg font-bold\">Membership</h3>\n      <p className=\"mb-4 text-sm text-blue-100\">\n        {isExpired\n          ? 'Your membership has expired'\n          : daysUntilExpiry === null\n            ? 'Checking status...'\n            : `Expires in ${daysUntilExpiry} days`}\n      </p>\n      <div className=\"mb-4\">\n        <div className=\"mb-1 flex justify-between text-xs\">\n          <span>Joined</span>\n          <span>{joinedAt ? new Date(joinedAt).toLocaleDateString() : '--'}</span>\n        </div>\n      </div>\n      <Link to=\"/member-renewal\">\n        <Button className=\"w-full bg-wiria-yellow font-bold text-white shadow-lg transition-all hover:scale-105\">\n          Renew Membership\n        </Button>\n      </Link>\n    </CardBody>\n  </Card>\n);\n\ninterface DashboardStatCardProps {\n  title: string;\n  value: string | number;\n  subtitle: string;\n  icon: React.ReactNode;\n  iconBgColor: string;\n  iconColor: string;\n}\n\nconst DashboardStatCard = ({\n  title,\n  value,\n  subtitle,\n  icon,\n  iconBgColor,\n  iconColor,\n}: DashboardStatCardProps) => (\n  <Card>\n    <CardBody className=\"flex items-center justify-between\">\n      <div>\n        <p className=\"mb-1 text-sm text-gray-500\">{title}</p>\n        <p className=\"text-2xl font-bold text-wiria-blue-dark\">{value}</p>\n        <p className=\"text-xs text-gray-500\">{subtitle}</p>\n      </div>\n      <div\n        className={`flex h-12 w-12 items-center justify-center rounded-xl ${iconBgColor} text-2xl ${iconColor}`}\n      >\n        {icon}\n      </div>\n    </CardBody>\n  </Card>\n);\n\ninterface UpcomingMeetingsListProps {\n  meetings: Meeting[];\n}\n\nconst UpcomingMeetingsList = ({ meetings }: UpcomingMeetingsListProps) => (\n  <Card>\n    <CardHeader>\n      <div className=\"flex items-center justify-between\">\n        <h3 className=\"text-xl font-bold text-wiria-blue-dark\">Upcoming Meetings</h3>\n        <Link\n          to=\"/member-meetings\"\n          className=\"text-sm text-wiria-blue-dark hover:text-wiria-yellow\"\n        >\n          View All â†’\n        </Link>\n      </div>\n    </CardHeader>\n    <CardBody>\n      <div className=\"space-y-3\">\n        {meetings.length === 0 ? (\n          <p className=\"text-sm italic text-gray-500\">No upcoming meetings</p>\n        ) : (\n          meetings.slice(0, 3).map((meeting) => (\n            <div key={meeting.id} className=\"rounded-lg bg-gray-50 p-3\">\n              <div className=\"flex items-start justify-between\">\n                <div>\n                  <p className=\"font-semibold text-gray-800\">{meeting.title}</p>\n                  <p className=\"text-xs text-gray-500\">\n                    {new Date(meeting.date).toLocaleDateString()} at {meeting.time}\n                  </p>\n                </div>\n                <span className=\"rounded bg-blue-100 px-2 py-1 text-xs text-blue-800\">\n                  {meeting.type}\n                </span>\n              </div>\n            </div>\n          ))\n        )}\n      </div>\n    </CardBody>\n  </Card>\n);\n\ninterface RecentActivityListProps {\n  activity: Activity[];\n}\n\nconst RecentActivityList = ({ activity }: RecentActivityListProps) => (\n  <Card>\n    <CardHeader>\n      <h3 className=\"text-xl font-bold text-wiria-blue-dark\">Recent Activity</h3>\n    </CardHeader>\n    <CardBody>\n      <div className=\"space-y-3\">\n        {activity.length === 0 ? (\n          <p className=\"text-sm italic text-gray-500\">No recent activity</p>\n        ) : (\n          activity.slice(0, 5).map((item) => (\n            <div key={item.id} className=\"flex items-start gap-3 text-sm\">\n              <div className=\"mt-2 h-2 w-2 rounded-full bg-wiria-blue-dark\" />\n              <div>\n                <p className=\"text-gray-800\">{item.description}</p>\n                <p className=\"text-xs text-gray-500\">\n                  {new Date(item.createdAt).toLocaleDateString()}\n                </p>\n              </div>\n            </div>\n          ))\n        )}\n      </div>\n    </CardBody>\n  </Card>\n);\n\n// --- Main Component ---\n\nfunction MemberPortalPage() {\n  const {\n    profile,\n    payments,\n    meetings,\n    activity,\n    isLoading,\n    totalPayments,\n    upcomingMeetings,\n    daysUntilExpiry,\n    isExpired,\n    isExpiringSoon,\n    fetchAll,\n  } = useMemberData();\n\n  useEffect(() => {\n    void fetchAll();\n  }, [fetchAll]);\n\n  if (isLoading && !profile) {\n    return (\n      <PortalLayout title=\"Member Portal\" subtitle=\"Loading your dashboard...\">\n        <div className=\"flex items-center justify-center py-20\">\n          <Spinner size=\"lg\" />\n        </div>\n      </PortalLayout>\n    );\n  }\n\n  const statusColor = isExpired\n    ? 'border-red-200 bg-red-50'\n    : isExpiringSoon\n      ? 'border-yellow-200 bg-yellow-50'\n      : 'border-green-200 bg-green-50';\n\n  const statusText = isExpired\n    ? 'Expired'\n    : isExpiringSoon\n      ? 'Expiring Soon'\n      : (profile?.status ?? 'Active');\n  const statusTextColor = isExpired\n    ? 'text-red-700'\n    : isExpiringSoon\n      ? 'text-yellow-700'\n      : 'text-green-700';\n\n  return (\n    <PortalLayout title=\"Welcome Back!\" subtitle=\"Here's what's happening with your membership\">\n      {/* Stats Cards */}\n      <div className=\"mb-8 grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-4\">\n        <MemberProfileCard\n          profile={profile}\n          statusText={statusText}\n          statusTextColor={statusTextColor}\n          statusColor={statusColor}\n        />\n\n        <MembershipStatusCard\n          isExpired={isExpired}\n          daysUntilExpiry={daysUntilExpiry}\n          joinedAt={profile?.joinedAt}\n        />\n\n        <DashboardStatCard\n          title=\"Total Payments\"\n          value={`KES ${totalPayments.toLocaleString()}`}\n          subtitle={`${payments.length} transactions`}\n          icon=\"ðŸ’³\"\n          iconBgColor=\"bg-green-100\"\n          iconColor=\"text-green-600\"\n        />\n\n        <DashboardStatCard\n          title=\"Upcoming Meetings\"\n          value={upcomingMeetings}\n          subtitle=\"This month\"\n          icon=\"ðŸ“…\"\n          iconBgColor=\"bg-blue-100\"\n          iconColor=\"text-blue-600\"\n        />\n      </div>\n\n      {/* Two Column Layout */}\n      <div className=\"grid grid-cols-1 gap-6 lg:grid-cols-2\">\n        <UpcomingMeetingsList meetings={meetings} />\n        <RecentActivityList activity={activity} />\n      </div>\n    </PortalLayout>\n  );\n}\n\nexport default MemberPortalPage;\n"],"names":["MemberProfileCard","profile","statusText","statusTextColor","statusColor","jsx","Card","jsxs","CardBody","Link","Button","MembershipStatusCard","isExpired","daysUntilExpiry","joinedAt","DashboardStatCard","title","value","subtitle","icon","iconBgColor","iconColor","UpcomingMeetingsList","meetings","CardHeader","meeting","RecentActivityList","activity","item","MemberPortalPage","payments","isLoading","totalPayments","upcomingMeetings","isExpiringSoon","fetchAll","useMemberData","useEffect","PortalLayout","Spinner"],"mappings":"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"}