import{b as o,s as l,S as u}from"./index-8OXY4Dao.js";const y=async()=>o.get("/resources"),E=async e=>o.post("/resources",e),z=async(e,t)=>o.patch(`/resources/${e}`,t),A=async e=>o.delete(`/resources/${e}`);function d(e){if(e.size>10485760){const r=(e.size/1048576).toFixed(2);throw new Error(`File size exceeds 10MB limit. Your file is ${r}MB. Please choose a smaller file.`)}}function f(){const e=l.get(u.AUTH_TOKEN);if(!e)throw new Error("Authentication required. Please log in to upload files.");return e}function h(e,t){const r=new FormData;return r.append("file",e),r.append("folder",t),r}function m(){const e="http://localhost:5001/api";return`${e.length>0?e:"http://localhost:5001/api"}/uploads`}async function g(e){const t=await e.json().catch(()=>null);return e.status===413||t?.error?.message?.includes("too large")?"File is too large. Maximum size is 10MB. Please compress your file or choose a smaller one.":e.status===401?"Authentication failed. Please log in again.":e.status===403?"You do not have permission to upload files.":t?.error?.message??`Upload failed (${e.status}). Please try again.`}function p(e){return e.name==="TypeError"&&(e.message?.includes("fetch")??!1)}const F=async(e,t="resources")=>{d(e);const r=f(),n=h(e,t),i=m();try{const s=await fetch(i,{method:"POST",headers:{Authorization:`Bearer ${r}`},body:n});if(!s.ok){const c=await g(s);throw new Error(c)}return{data:await s.json()}}catch(s){const a=s;throw(a.message?.includes("10MB")??!1)||(a.message?.includes("Authentication")??!1)||(a.message?.includes("permission")??!1)?s:p(a)?new Error("Network error. Please check your connection and try again."):new Error(a.message??"File upload failed. Please try again.")}};export{z as a,E as c,A as d,y as g,F as u};
//# sourceMappingURL=resources.api-CBqAPuLl.js.map
