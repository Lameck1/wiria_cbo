{"version":3,"file":"usePartners-C_SLlfdv.js","sources":["../../src/features/home/hooks/usePartners.ts"],"sourcesContent":["/**\n * Custom hook to fetch partners from API\n * Falls back to static data when backend is unavailable\n */\n\nimport { useQuery } from '@tanstack/react-query';\n\nimport { staticPartners } from '@/shared/data/static';\nimport { useBackendStatus } from '@/shared/services/useBackendStatus';\n\nexport interface Partner {\n  id: string;\n  name: string;\n  logoUrl: string;\n  websiteUrl?: string;\n  type?: string;\n  description?: string;\n}\n\ninterface PartnersResponse {\n  data: {\n    data: Partner[];\n  };\n}\n\nasync function fetchPartners(): Promise<Partner[]> {\n  const response = await fetch('/api/partners');\n\n  if (!response.ok) {\n    throw new Error('Failed to fetch partners');\n  }\n\n  const data = (await response.json()) as PartnersResponse;\n  return data.data?.data || data.data || [];\n}\n\nexport function usePartners() {\n  const { isBackendConnected, isChecking } = useBackendStatus();\n\n  return useQuery({\n    queryKey: ['partners', isBackendConnected],\n    queryFn: () => {\n      // Use static data when backend is offline\n      if (!isBackendConnected) {\n        return Promise.resolve(staticPartners);\n      }\n      return fetchPartners();\n    },\n    staleTime: 5 * 60 * 1000, // 5 minutes\n    enabled: !isChecking, // Wait until backend status is determined\n  });\n}\n"],"names":["fetchPartners","response","data","usePartners","isBackendConnected","isChecking","useBackendStatus","useQuery","staticPartners"],"mappings":"kIAyBA,eAAeA,GAAoC,CACjD,MAAMC,EAAW,MAAM,MAAM,eAAe,EAE5C,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAM,0BAA0B,EAG5C,MAAMC,EAAQ,MAAMD,EAAS,KAAA,EAC7B,OAAOC,EAAK,MAAM,MAAQA,EAAK,MAAQ,CAAA,CACzC,CAEO,SAASC,GAAc,CAC5B,KAAM,CAAE,mBAAAC,EAAoB,WAAAC,CAAA,EAAeC,EAAA,EAE3C,OAAOC,EAAS,CACd,SAAU,CAAC,WAAYH,CAAkB,EACzC,QAAS,IAEFA,EAGEJ,EAAA,EAFE,QAAQ,QAAQQ,CAAc,EAIzC,UAAW,IAAS,IACpB,QAAS,CAACH,CAAA,CACX,CACH"}