{"version":3,"file":"useMemberData-DiEyG-YL.js","sources":["../../src/features/membership/components/PortalNavigation.tsx","../../src/features/membership/components/PortalLayout.tsx","../../src/features/membership/api/memberAdapter.ts","../../src/features/membership/hooks/queries/useMemberQueries.ts","../../src/features/membership/hooks/useMemberData.ts"],"sourcesContent":["/**\n * Portal Navigation Component\n * Horizontal tabs for member portal pages\n */\n\nimport { NavLink } from 'react-router-dom';\n\nconst NAV_ITEMS = [\n  { to: '/member-portal', label: 'Dashboard', icon: 'üè†', exact: true },\n  { to: '/member-profile', label: 'Profile', icon: 'üë§' },\n  { to: '/member-renewal', label: 'Renewal', icon: 'üîÑ' },\n  { to: '/member-payments', label: 'Payments', icon: 'üí≥' },\n  { to: '/member-meetings', label: 'Meetings', icon: 'üìÖ' },\n];\n\nexport function PortalNavigation() {\n  return (\n    <nav className=\"mb-6 overflow-x-auto rounded-xl bg-white shadow-md\" aria-label=\"Member Portal Navigation\">\n      <div className=\"flex\">\n        {NAV_ITEMS.map((item) => (\n          <NavLink\n            key={item.to}\n            to={item.to}\n            end={item.exact}\n            className={({ isActive }) =>\n              `flex items-center gap-2 whitespace-nowrap border-b-2 px-5 py-4 text-sm font-semibold transition-colors ${\n                isActive\n                  ? 'border-wiria-blue-dark bg-wiria-blue-dark/5 text-wiria-blue-dark'\n                  : 'border-transparent text-gray-600 hover:bg-gray-50 hover:text-wiria-blue-dark'\n              }`\n            }\n          >\n            <span>{item.icon}</span>\n            <span>{item.label}</span>\n          </NavLink>\n        ))}\n      </div>\n    </nav>\n  );\n}\n","/**\n * Portal Layout Component\n * Shared layout for all member portal pages\n */\n\nimport type { ReactNode } from 'react';\n\nimport { Link, useNavigate } from 'react-router-dom';\n\nimport { useAuth } from '@/features/auth/context/useAuth';\n\nimport { PortalNavigation } from './PortalNavigation';\n\ninterface PortalLayoutProps {\n  children: ReactNode;\n  title: string;\n  subtitle?: string;\n  showNavigation?: boolean;\n}\n\nexport function PortalLayout({\n  children,\n  title,\n  subtitle,\n  showNavigation = true,\n}: PortalLayoutProps) {\n  const { user, logout } = useAuth();\n  const navigate = useNavigate();\n\n  const handleLogout = async () => {\n    await logout();\n    navigate('/member-login');\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      {/* Portal Header */}\n      <header className=\"sticky top-0 z-50 bg-white shadow-md\">\n        <nav className=\"container mx-auto flex items-center justify-between px-4 py-4 lg:px-6\">\n          <Link to=\"/member-portal\" className=\"flex items-center gap-2\">\n            <img\n              src={`${import.meta.env.BASE_URL}images/Wiria_CBO_Logo_NEW_IV.png`}\n              alt=\"WIRIA CBO\"\n              className=\"h-10\"\n            />\n            <span className=\"hidden text-xl font-bold text-wiria-blue-dark sm:block\">\n              WIRIA CBO\n            </span>\n          </Link>\n          <div className=\"flex items-center space-x-4\">\n            <Link\n              to=\"/\"\n              className=\"text-sm font-semibold text-wiria-blue-dark transition-colors hover:text-wiria-yellow\"\n            >\n              üè† Home\n            </Link>\n            {user && (\n              <span className=\"hidden text-sm font-semibold text-gray-700 md:block\">\n                {user.firstName} {user.lastName}\n              </span>\n            )}\n            <button\n              onClick={() => {\n                void handleLogout();\n              }}\n              className=\"rounded-lg bg-gray-200 px-4 py-2 text-sm font-bold text-gray-700 transition-all hover:bg-gray-300\"\n            >\n              Logout\n            </button>\n          </div>\n        </nav>\n      </header>\n\n      <main className=\"py-8\">\n        <div className=\"container mx-auto px-4\">\n          {/* Page Header */}\n          <div className=\"mb-6\">\n            <h1 className=\"mb-1 text-3xl font-bold text-wiria-blue-dark\">{title}</h1>\n            {subtitle && <p className=\"text-gray-600\">{subtitle}</p>}\n          </div>\n\n          {/* Portal Navigation */}\n          {showNavigation && <PortalNavigation />}\n\n          {/* Page Content */}\n          {children}\n        </div>\n      </main>\n\n      {/* Portal Footer */}\n      <footer className=\"mt-12 bg-wiria-blue-dark py-8 text-white\">\n        <div className=\"container mx-auto px-4 text-center\">\n          <p>&copy; 2025 WIRIA Community Based Organization. Confidential Member Portal.</p>\n        </div>\n      </footer>\n    </div>\n  );\n}\n","import type { Activity, Meeting, MemberProfile, Payment } from '../hooks/useMemberData';\n\n/**\n * API Response Types\n * These interfaces model the raw backend response structure.\n * The adapter normalizes these into the frontend types.\n */\n\n/** Raw profile data from API - may have different nesting structures */\ninterface ApiMemberProfileData {\n  id?: string;\n  memberNumber?: string;\n  firstName?: string;\n  lastName?: string;\n  email?: string;\n  phone?: string;\n  nationalId?: string;\n  occupation?: string;\n  address?: string;\n  county?: string;\n  subcounty?: string;\n  ward?: string;\n  interests?: string[];\n  skills?: string[];\n  status?: string;\n  membershipType?: string;\n  groupName?: string;\n  currentMemberCount?: number;\n  maxMemberCountReached?: number;\n  joinDate?: string;\n  joinedAt?: string;\n  expiryDate?: string;\n  membershipExpiresAt?: string;\n  createdAt?: string;\n  props?: ApiMemberProfileData;\n}\n\n/** Raw payment data from API */\ninterface ApiPaymentData {\n  id?: string;\n  amount?: number | string;\n  type?: string;\n  status?: string;\n  method?: string;\n  mpesaReceiptNumber?: string;\n  createdAt?: string;\n}\n\n/** Raw meeting data from API */\ninterface ApiMeetingData {\n  id?: string;\n  title?: string;\n  description?: string;\n  date?: string;\n  time?: string;\n  location?: string;\n  type?: string;\n  status?: string;\n  isRsvpd?: boolean;\n  attendeesCount?: number;\n}\n\n/** Raw activity data from API */\ninterface ApiActivityData {\n  id?: string;\n  type?: string;\n  description?: string;\n  timestamp?: string;\n  createdAt?: string;\n}\n\n/** Response wrapper types */\ntype ApiPaymentsResponse = ApiPaymentData[] | { payments: ApiPaymentData[] };\ntype ApiMeetingsResponse = ApiMeetingData[] | { data: ApiMeetingData[] };\ntype ApiActivityResponse = ApiActivityData[] | { data: ApiActivityData[] };\n\n/**\n * Generic Array Extraction Utilities\n * Handles different array wrapping patterns from the backend.\n */\n\n/**\n * Extracts array from API response that may be:\n * - Direct array: [item1, item2]\n * - Wrapped in property: { payments: [...] } or { data: [...] }\n */\nfunction extractArray<T>(\n  apiData: T[] | Record<string, T[]>,\n  propertyNames: string[]\n): T[] {\n  if (Array.isArray(apiData)) {\n    return apiData;\n  }\n\n  // Try each property name until we find an array\n  for (const property of propertyNames) {\n    const value = (apiData as Record<string, unknown>)[property];\n    if (Array.isArray(value)) {\n      return value as T[];\n    }\n  }\n\n  return [];\n}\n\n/**\n * Individual Item Transformation Functions\n * Each function transforms a single API item to frontend format.\n */\n\nfunction transformPayment(p: ApiPaymentData): Payment {\n  return {\n    id: p.id ?? '',\n    amount: Number(p.amount) ?? 0,\n    type: (p.type ?? 'DONATION') as Payment['type'],\n    status: (p.status ?? 'PENDING') as Payment['status'],\n    method: (p.method ?? 'MANUAL') as Payment['method'],\n    mpesaReceiptNumber: p.mpesaReceiptNumber,\n    createdAt: p.createdAt ?? '',\n  };\n}\n\nfunction transformMeeting(m: ApiMeetingData): Meeting {\n  return {\n    id: m.id ?? '',\n    title: m.title ?? '',\n    description: m.description,\n    date: m.date ?? '',\n    time: m.time ?? '',\n    location: m.location ?? '',\n    type: (m.type ?? 'AGM') as Meeting['type'],\n    status: (m.status ?? 'UPCOMING') as Meeting['status'],\n    isRsvpd: m.isRsvpd,\n    attendeesCount: m.attendeesCount,\n  };\n}\n\nfunction transformActivity(item: ApiActivityData): Activity {\n  return {\n    id: item.id ?? '',\n    type: item.type ?? '',\n    description: item.description ?? '',\n    createdAt: item.timestamp ?? item.createdAt ?? '',\n  };\n}\n\n/**\n * Member Adapter\n * Normalizes inconsistent backend responses into standard frontend structures.\n */\nexport const memberAdapter = {\n  /**\n   * Normalizes profile data, handling variations in nesting and field names.\n   */\n  profile(apiData: ApiMemberProfileData): MemberProfile {\n    if (!apiData) {\n      throw new Error('Member adapter error: No profile data provided');\n    }\n    const source = apiData.props ?? apiData;\n    return {\n      ...mapIdentityFields(apiData, source),\n      ...mapContactAndLocation(source),\n      ...mapAttributes(source),\n      ...mapMembershipFields(apiData, source),\n      ...mapDates(apiData, source),\n    };\n  },\n\n  /**\n   * Normalizes payment data.\n   * Handles both direct arrays and { payments: [] } wrappers.\n   */\n  payments(apiData: ApiPaymentsResponse): Payment[] {\n    const list = extractArray<ApiPaymentData>(apiData, ['payments']);\n    return list.map((payment) => transformPayment(payment));\n  },\n\n  /**\n   * Normalizes meeting data.\n   * Handles both direct arrays and { data: [] } wrappers.\n   */\n  meetings(apiData: ApiMeetingsResponse): Meeting[] {\n    const list = extractArray<ApiMeetingData>(apiData, ['data']);\n    return list.map((meeting) => transformMeeting(meeting));\n  },\n\n  /**\n   * Normalizes activity data.\n   * Handles both direct arrays and { data: [] } wrappers.\n   */\n  activity(apiData: ApiActivityResponse): Activity[] {\n    const list = extractArray<ApiActivityData>(apiData, ['data']);\n    return list.map((activity) => transformActivity(activity));\n  },\n};\n\nfunction mapIdentityFields(apiData: ApiMemberProfileData, source: ApiMemberProfileData) {\n  return {\n    id: apiData.id ?? source.id ?? '',\n    memberNumber: apiData.memberNumber ?? source.memberNumber ?? '',\n    firstName: source.firstName ?? '',\n    lastName: source.lastName ?? '',\n  };\n}\n\nfunction mapContactAndLocation(source: ApiMemberProfileData) {\n  return {\n    email: source.email ?? '',\n    phone: source.phone ?? '',\n    nationalId: source.nationalId,\n    occupation: source.occupation,\n    address: source.address,\n    county: source.county,\n    subcounty: source.subcounty,\n    ward: source.ward,\n  };\n}\n\nfunction mapAttributes(source: ApiMemberProfileData) {\n  return {\n    interests: source.interests ?? [],\n    skills: source.skills ?? [],\n  };\n}\n\nfunction mapMembershipFields(apiData: ApiMemberProfileData, source: ApiMemberProfileData) {\n  return {\n    status: (apiData.status ?? source.status ?? 'PENDING') as MemberProfile['status'],\n    membershipType: (apiData.membershipType ??\n      source.membershipType) as MemberProfile['membershipType'],\n    groupName: apiData.groupName ?? source.groupName,\n    currentMemberCount: apiData.currentMemberCount ?? source.currentMemberCount,\n    maxMemberCountReached: apiData.maxMemberCountReached ?? source.maxMemberCountReached,\n  };\n}\n\nfunction mapDates(apiData: ApiMemberProfileData, source: ApiMemberProfileData) {\n  return {\n    joinedAt: apiData.joinDate ?? apiData.joinedAt ?? source.joinDate ?? source.joinedAt ?? '',\n    membershipExpiresAt:\n      apiData.expiryDate ??\n      apiData.membershipExpiresAt ??\n      source.expiryDate ??\n      source.membershipExpiresAt,\n    createdAt: apiData.createdAt ?? source.createdAt ?? '',\n  };\n}\n","import { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\n\nimport { apiClient } from '@/shared/services/api/client';\nimport { API_ENDPOINTS } from '@/shared/services/api/endpoints';\n\nimport { memberAdapter } from '../../api/memberAdapter';\n\nimport type { MemberProfile, Document } from '../useMemberData';\n\n/**\n * API Response Types\n * These match the structure returned by the backend.\n */\ninterface ApiProfileResponse {\n  data: {\n    id?: string;\n    memberNumber?: string;\n    firstName?: string;\n    lastName?: string;\n    email?: string;\n    phone?: string;\n    status?: string;\n    membershipType?: string;\n    props?: Record<string, unknown>;\n    [key: string]: unknown;\n  };\n}\n\ninterface ApiPaymentsResponse {\n  data:\n    | {\n        id?: string;\n        amount?: number | string;\n        type?: string;\n        status?: string;\n        method?: string;\n        mpesaReceiptNumber?: string;\n        createdAt?: string;\n      }[]\n    | { payments: Record<string, unknown>[] };\n}\n\ninterface ApiMeetingsResponse {\n  data:\n    | {\n        id?: string;\n        title?: string;\n        description?: string;\n        date?: string;\n        time?: string;\n        location?: string;\n        type?: string;\n        status?: string;\n        isRsvpd?: boolean;\n        attendeesCount?: number;\n      }[]\n    | { data: Record<string, unknown>[] };\n}\n\ninterface ApiDocumentsResponse {\n  data: {\n    documents?: {\n      id?: string;\n      name?: string;\n      type?: string;\n      url?: string;\n      createdAt?: string;\n    }[];\n  };\n}\n\ninterface ApiActivityResponse {\n  data:\n    | {\n        id?: string;\n        type?: string;\n        description?: string;\n        timestamp?: string;\n        createdAt?: string;\n      }[]\n    | { data: Record<string, unknown>[] };\n}\n\nconst MEMBER_KEYS = {\n  all: ['member'] as const,\n  profile: () => [...MEMBER_KEYS.all, 'profile'] as const,\n  payments: () => [...MEMBER_KEYS.all, 'payments'] as const,\n  meetings: (type: 'joined' | 'available') => [...MEMBER_KEYS.all, 'meetings', type] as const,\n  documents: () => [...MEMBER_KEYS.all, 'documents'] as const,\n  activity: () => [...MEMBER_KEYS.all, 'activity'] as const,\n};\n\nexport function useMemberProfileQuery() {\n  return useQuery({\n    queryKey: MEMBER_KEYS.profile(),\n    queryFn: async () => {\n      const response = await apiClient.get<ApiProfileResponse>(API_ENDPOINTS.MEMBERS_ME);\n      return memberAdapter.profile(response.data);\n    },\n    staleTime: 1000 * 60 * 5, // 5 minutes\n  });\n}\n\nexport function useUpdateMemberProfileMutation() {\n  const queryClient = useQueryClient();\n\n  return useMutation({\n    mutationFn: async (data: Partial<MemberProfile>) => {\n      const response = await apiClient.put<ApiProfileResponse>(API_ENDPOINTS.MEMBERS_ME, data);\n      return memberAdapter.profile(response.data);\n    },\n    onSuccess: (updatedProfile) => {\n      queryClient.setQueryData(MEMBER_KEYS.profile(), updatedProfile);\n    },\n  });\n}\n\nexport function useMemberPaymentsQuery() {\n  return useQuery({\n    queryKey: MEMBER_KEYS.payments(),\n    queryFn: async () => {\n      const response = await apiClient.get<ApiPaymentsResponse>(API_ENDPOINTS.MEMBERS_PAYMENTS);\n      return memberAdapter.payments(response.data);\n    },\n    staleTime: 1000 * 60 * 5,\n  });\n}\n\nexport function useMemberMeetingsQuery() {\n  return useQuery({\n    queryKey: MEMBER_KEYS.meetings('joined'),\n    queryFn: async () => {\n      const response = await apiClient.get<ApiMeetingsResponse>(API_ENDPOINTS.MEMBERS_MEETINGS);\n      return memberAdapter.meetings(response.data);\n    },\n    staleTime: 1000 * 60 * 5,\n  });\n}\n\nexport function useAvailableMeetingsQuery() {\n  return useQuery({\n    queryKey: MEMBER_KEYS.meetings('available'),\n    queryFn: async () => {\n      const response = await apiClient.get<ApiMeetingsResponse>(\n        API_ENDPOINTS.MEMBERS_MEETINGS_AVAILABLE\n      );\n      return memberAdapter.meetings(response.data);\n    },\n    staleTime: 1000 * 60 * 5,\n  });\n}\n\nexport function useMemberDocumentsQuery() {\n  return useQuery({\n    queryKey: MEMBER_KEYS.documents(),\n    queryFn: async () => {\n      const response = await apiClient.get<ApiDocumentsResponse>(API_ENDPOINTS.MEMBERS_DOCUMENTS);\n      // Backend returns { data: { documents: [] } }\n      const documents = response.data?.documents ?? [];\n      return documents.map(\n        (document): Document => ({\n          id: document.id ?? '',\n          name: document.name ?? '',\n          type: document.type ?? '',\n          url: document.url ?? '',\n          createdAt: document.createdAt ?? '',\n        })\n      );\n    },\n    staleTime: 1000 * 60 * 10,\n  });\n}\n\nexport function useMemberActivityQuery() {\n  return useQuery({\n    queryKey: MEMBER_KEYS.activity(),\n    queryFn: async () => {\n      const response = await apiClient.get<ApiActivityResponse>(API_ENDPOINTS.MEMBERS_ACTIVITY);\n      return memberAdapter.activity(response.data);\n    },\n    staleTime: 1000 * 60 * 2,\n  });\n}\n\nexport function useRsvpMutation() {\n  const queryClient = useQueryClient();\n\n  return useMutation({\n    mutationFn: async (meetingId: string) => {\n      const endpoint = API_ENDPOINTS.MEMBERS_MEETINGS_RSVP.replace(':id', meetingId);\n      return apiClient.post(endpoint, {});\n    },\n    onSuccess: () => {\n      void queryClient.invalidateQueries({ queryKey: MEMBER_KEYS.meetings('joined') });\n      void queryClient.invalidateQueries({ queryKey: MEMBER_KEYS.meetings('available') });\n    },\n  });\n}\n\nexport function useCancelRsvpMutation() {\n  const queryClient = useQueryClient();\n\n  return useMutation({\n    mutationFn: async (meetingId: string) => {\n      const endpoint = API_ENDPOINTS.MEMBERS_MEETINGS_RSVP.replace(':id', meetingId);\n      return apiClient.delete(endpoint);\n    },\n    onSuccess: () => {\n      void queryClient.invalidateQueries({ queryKey: MEMBER_KEYS.meetings('joined') });\n      void queryClient.invalidateQueries({ queryKey: MEMBER_KEYS.meetings('available') });\n    },\n  });\n}\n","/**\n * Member Data Hook\n * Aggregates granular TanStack Query hooks for better caching and reactivity.\n */\n\nimport { useMemo } from 'react';\n\nimport {\n  useMemberProfileQuery,\n  useUpdateMemberProfileMutation,\n  useMemberPaymentsQuery,\n  useMemberMeetingsQuery,\n  useAvailableMeetingsQuery,\n  useMemberDocumentsQuery,\n  useMemberActivityQuery,\n  useRsvpMutation,\n  useCancelRsvpMutation,\n} from './queries/useMemberQueries';\n\n// Types\nexport interface MemberProfile {\n  id: string;\n  memberNumber: string;\n  firstName: string;\n  lastName: string;\n  email: string;\n  phone: string;\n  nationalId?: string;\n  occupation?: string;\n  address?: string;\n  county?: string;\n  subcounty?: string;\n  ward?: string;\n  interests?: string[];\n  skills?: string[];\n  status: 'PENDING' | 'ACTIVE' | 'SUSPENDED' | 'EXPIRED';\n  membershipType?: 'INDIVIDUAL' | 'GROUP';\n  groupName?: string;\n  currentMemberCount?: number;\n  maxMemberCountReached?: number;\n  membershipExpiresAt?: string;\n  joinedAt: string;\n  createdAt: string;\n}\n\nexport interface Payment {\n  id: string;\n  amount: number;\n  type: 'REGISTRATION' | 'RENEWAL' | 'DONATION';\n  status: 'PENDING' | 'COMPLETED' | 'FAILED';\n  method: 'STK_PUSH' | 'MANUAL';\n  mpesaReceiptNumber?: string;\n  createdAt: string;\n}\n\nexport interface Meeting {\n  id: string;\n  title: string;\n  description?: string;\n  date: string;\n  time: string;\n  location: string;\n  type: 'AGM' | 'SPECIAL' | 'COMMITTEE' | 'TRAINING';\n  status: 'UPCOMING' | 'ONGOING' | 'COMPLETED' | 'CANCELLED';\n  isRsvpd?: boolean;\n  attendeesCount?: number;\n  capacity?: number | null;\n}\n\nexport interface Document {\n  id: string;\n  name: string;\n  type: string;\n  url: string;\n  createdAt: string;\n}\n\nexport interface Activity {\n  id: string;\n  type: string;\n  description: string;\n  createdAt: string;\n  timestamp?: string;\n}\n\nfunction useMemberComputedValues(\n  profileQuery: ReturnType<typeof useMemberProfileQuery>,\n  paymentsQuery: ReturnType<typeof useMemberPaymentsQuery>,\n  meetingsQuery: ReturnType<typeof useMemberMeetingsQuery>\n) {\n  const totalPayments = useMemo(\n    () =>\n      (paymentsQuery.data ?? [])\n        .filter((payment: Payment) => payment.status === 'COMPLETED')\n        .reduce((sum: number, payment: Payment) => sum + payment.amount, 0),\n    [paymentsQuery.data]\n  );\n\n  const pendingPayments = useMemo(\n    () =>\n      (paymentsQuery.data ?? []).filter((payment: Payment) => payment.status === 'PENDING').length,\n    [paymentsQuery.data]\n  );\n\n  const upcomingMeetings = useMemo(\n    () =>\n      (meetingsQuery.data ?? []).filter((meeting: Meeting) => meeting.status === 'UPCOMING').length,\n    [meetingsQuery.data]\n  );\n\n  const daysUntilExpiry = useMemo(() => {\n    const expiry = profileQuery.data?.membershipExpiresAt;\n    if (!expiry) return null;\n    return Math.ceil((new Date(expiry).getTime() - Date.now()) / (1000 * 60 * 60 * 24));\n  }, [profileQuery.data?.membershipExpiresAt]);\n\n  const isExpired = daysUntilExpiry !== null && daysUntilExpiry <= 0;\n  const isExpiringSoon = daysUntilExpiry !== null && daysUntilExpiry > 0 && daysUntilExpiry <= 30;\n\n  return {\n    totalPayments,\n    pendingPayments,\n    upcomingMeetings,\n    daysUntilExpiry,\n    isExpired,\n    isExpiringSoon,\n  };\n}\n\n/**\n * useMemberData Hook (Refactored)\n * Recommended: Use the granular hooks directly in components for better performance.\n */\nexport function useMemberData() {\n  const profileQuery = useMemberProfileQuery();\n  const updateProfileMutation = useUpdateMemberProfileMutation();\n  const paymentsQuery = useMemberPaymentsQuery();\n  const meetingsQuery = useMemberMeetingsQuery();\n  const availableMeetingsQuery = useAvailableMeetingsQuery();\n  const documentsQuery = useMemberDocumentsQuery();\n  const activityQuery = useMemberActivityQuery();\n  const rsvpMutation = useRsvpMutation();\n  const cancelRsvpMutation = useCancelRsvpMutation();\n\n  const {\n    totalPayments,\n    pendingPayments,\n    upcomingMeetings,\n    daysUntilExpiry,\n    isExpired,\n    isExpiringSoon,\n  } = useMemberComputedValues(profileQuery, paymentsQuery, meetingsQuery);\n\n  const isLoading =\n    profileQuery.isLoading ||\n    paymentsQuery.isLoading ||\n    meetingsQuery.isLoading ||\n    documentsQuery.isLoading ||\n    activityQuery.isLoading;\n\n  const error = profileQuery.error?.message ?? paymentsQuery.error?.message ?? null;\n\n  return {\n    profile: profileQuery.data ?? null,\n    payments: paymentsQuery.data ?? [],\n    meetings: meetingsQuery.data ?? [],\n    availableMeetings: availableMeetingsQuery.data ?? [],\n    documents: documentsQuery.data ?? [],\n    activity: activityQuery.data ?? [],\n    isLoading,\n    error,\n    fetchProfile: profileQuery.refetch,\n    updateProfile: updateProfileMutation.mutateAsync,\n    fetchPayments: paymentsQuery.refetch,\n    fetchMeetings: meetingsQuery.refetch,\n    fetchAvailableMeetings: availableMeetingsQuery.refetch,\n    rsvpToMeeting: rsvpMutation.mutateAsync,\n    cancelRsvp: cancelRsvpMutation.mutateAsync,\n    fetchDocuments: documentsQuery.refetch,\n    fetchActivity: activityQuery.refetch,\n    fetchAll: async () => {\n      await Promise.all([\n        profileQuery.refetch(),\n        paymentsQuery.refetch(),\n        meetingsQuery.refetch(),\n        documentsQuery.refetch(),\n        activityQuery.refetch(),\n      ]);\n    },\n    totalPayments,\n    pendingPayments,\n    upcomingMeetings,\n    daysUntilExpiry,\n    isExpired,\n    isExpiringSoon,\n  };\n}\n"],"names":["NAV_ITEMS","PortalNavigation","jsx","item","jsxs","NavLink","isActive","PortalLayout","children","title","subtitle","showNavigation","user","logout","useAuth","navigate","useNavigate","handleLogout","Link","extractArray","apiData","propertyNames","property","value","transformPayment","p","transformMeeting","m","transformActivity","memberAdapter","source","mapIdentityFields","mapContactAndLocation","mapAttributes","mapMembershipFields","mapDates","payment","meeting","activity","MEMBER_KEYS","type","useMemberProfileQuery","useQuery","response","apiClient","API_ENDPOINTS","useUpdateMemberProfileMutation","queryClient","useQueryClient","useMutation","data","updatedProfile","useMemberPaymentsQuery","useMemberMeetingsQuery","useAvailableMeetingsQuery","useMemberDocumentsQuery","document","useMemberActivityQuery","useRsvpMutation","meetingId","endpoint","useCancelRsvpMutation","useMemberComputedValues","profileQuery","paymentsQuery","meetingsQuery","totalPayments","useMemo","sum","pendingPayments","upcomingMeetings","daysUntilExpiry","expiry","isExpired","isExpiringSoon","useMemberData","updateProfileMutation","availableMeetingsQuery","documentsQuery","activityQuery","rsvpMutation","cancelRsvpMutation","isLoading","error"],"mappings":"mOAOA,MAAMA,EAAY,CAChB,CAAE,GAAI,iBAAkB,MAAO,YAAa,KAAM,KAAM,MAAO,EAAA,EAC/D,CAAE,GAAI,kBAAmB,MAAO,UAAW,KAAM,IAAA,EACjD,CAAE,GAAI,kBAAmB,MAAO,UAAW,KAAM,IAAA,EACjD,CAAE,GAAI,mBAAoB,MAAO,WAAY,KAAM,IAAA,EACnD,CAAE,GAAI,mBAAoB,MAAO,WAAY,KAAM,IAAA,CACrD,EAEO,SAASC,GAAmB,CACjC,OACEC,EAAAA,IAAC,MAAA,CAAI,UAAU,qDAAqD,aAAW,2BAC7E,SAAAA,EAAAA,IAAC,MAAA,CAAI,UAAU,OACZ,SAAAF,EAAU,IAAKG,GACdC,EAAAA,KAACC,EAAA,CAEC,GAAIF,EAAK,GACT,IAAKA,EAAK,MACV,UAAW,CAAC,CAAE,SAAAG,KACZ,0GACEA,EACI,mEACA,8EACN,GAGF,SAAA,CAAAJ,EAAAA,IAAC,OAAA,CAAM,WAAK,IAAA,CAAK,EACjBA,EAAAA,IAAC,OAAA,CAAM,SAAAC,EAAK,KAAA,CAAM,CAAA,CAAA,EAZbA,EAAK,EAAA,CAcb,EACH,CAAA,CACF,CAEJ,CCnBO,SAASI,GAAa,CAC3B,SAAAC,EACA,MAAAC,EACA,SAAAC,EACA,eAAAC,EAAiB,EACnB,EAAsB,CACpB,KAAM,CAAE,KAAAC,EAAM,OAAAC,CAAA,EAAWC,EAAA,EACnBC,EAAWC,EAAA,EAEXC,EAAe,SAAY,CAC/B,MAAMJ,EAAA,EACNE,EAAS,eAAe,CAC1B,EAEA,OACEX,EAAAA,KAAC,MAAA,CAAI,UAAU,0BAEb,SAAA,CAAAF,EAAAA,IAAC,UAAO,UAAU,uCAChB,SAAAE,EAAAA,KAAC,MAAA,CAAI,UAAU,wEACb,SAAA,QAACc,EAAA,CAAK,GAAG,iBAAiB,UAAU,0BAClC,SAAA,CAAAhB,EAAAA,IAAC,MAAA,CACC,IAAK,oCACL,IAAI,YACJ,UAAU,MAAA,CAAA,QAEX,OAAA,CAAK,UAAU,yDAAyD,SAAA,YAEzE,CAAA,EACF,EACAE,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAF,EAAAA,IAACgB,EAAA,CACC,GAAG,IACH,UAAU,uFACX,SAAA,SAAA,CAAA,EAGAN,GACCR,EAAAA,KAAC,OAAA,CAAK,UAAU,sDACb,SAAA,CAAAQ,EAAK,UAAU,IAAEA,EAAK,QAAA,EACzB,EAEFV,EAAAA,IAAC,SAAA,CACC,QAAS,IAAM,CACRe,EAAA,CACP,EACA,UAAU,oGACX,SAAA,QAAA,CAAA,CAED,EACF,CAAA,CAAA,CACF,CAAA,CACF,QAEC,OAAA,CAAK,UAAU,OACd,SAAAb,EAAAA,KAAC,MAAA,CAAI,UAAU,yBAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,OACb,SAAA,OAAC,KAAA,CAAG,UAAU,+CAAgD,SAAAK,EAAM,EACnEC,SAAa,IAAA,CAAE,UAAU,gBAAiB,SAAAA,EAAS,CAAA,EACtD,EAGCC,SAAmBV,EAAA,EAAiB,EAGpCO,CAAA,CAAA,CACH,CAAA,CACF,EAGAN,EAAAA,IAAC,SAAA,CAAO,UAAU,2CAChB,SAAAA,EAAAA,IAAC,MAAA,CAAI,UAAU,qCACb,SAAAA,EAAAA,IAAC,IAAA,CAAE,SAAA,yEAA2E,CAAA,CAChF,CAAA,CACF,CAAA,EACF,CAEJ,CCXA,SAASiB,EACPC,EACAC,EACK,CACL,GAAI,MAAM,QAAQD,CAAO,EACvB,OAAOA,EAIT,UAAWE,KAAYD,EAAe,CACpC,MAAME,EAASH,EAAoCE,CAAQ,EAC3D,GAAI,MAAM,QAAQC,CAAK,EACrB,OAAOA,CAEX,CAEA,MAAO,CAAA,CACT,CAOA,SAASC,EAAiBC,EAA4B,CACpD,MAAO,CACL,GAAIA,EAAE,IAAM,GACZ,OAAQ,OAAOA,EAAE,MAAM,GAAK,EAC5B,KAAOA,EAAE,MAAQ,WACjB,OAASA,EAAE,QAAU,UACrB,OAASA,EAAE,QAAU,SACrB,mBAAoBA,EAAE,mBACtB,UAAWA,EAAE,WAAa,EAAA,CAE9B,CAEA,SAASC,EAAiBC,EAA4B,CACpD,MAAO,CACL,GAAIA,EAAE,IAAM,GACZ,MAAOA,EAAE,OAAS,GAClB,YAAaA,EAAE,YACf,KAAMA,EAAE,MAAQ,GAChB,KAAMA,EAAE,MAAQ,GAChB,SAAUA,EAAE,UAAY,GACxB,KAAOA,EAAE,MAAQ,MACjB,OAASA,EAAE,QAAU,WACrB,QAASA,EAAE,QACX,eAAgBA,EAAE,cAAA,CAEtB,CAEA,SAASC,EAAkBzB,EAAiC,CAC1D,MAAO,CACL,GAAIA,EAAK,IAAM,GACf,KAAMA,EAAK,MAAQ,GACnB,YAAaA,EAAK,aAAe,GACjC,UAAWA,EAAK,WAAaA,EAAK,WAAa,EAAA,CAEnD,CAMO,MAAM0B,EAAgB,CAI3B,QAAQT,EAA8C,CACpD,GAAI,CAACA,EACH,MAAM,IAAI,MAAM,gDAAgD,EAElE,MAAMU,EAASV,EAAQ,OAASA,EAChC,MAAO,CACL,GAAGW,EAAkBX,EAASU,CAAM,EACpC,GAAGE,EAAsBF,CAAM,EAC/B,GAAGG,EAAcH,CAAM,EACvB,GAAGI,EAAoBd,EAASU,CAAM,EACtC,GAAGK,EAASf,EAASU,CAAM,CAAA,CAE/B,EAMA,SAASV,EAAyC,CAEhD,OADaD,EAA6BC,EAAS,CAAC,UAAU,CAAC,EACnD,IAAKgB,GAAYZ,EAAiBY,CAAO,CAAC,CACxD,EAMA,SAAShB,EAAyC,CAEhD,OADaD,EAA6BC,EAAS,CAAC,MAAM,CAAC,EAC/C,IAAKiB,GAAYX,EAAiBW,CAAO,CAAC,CACxD,EAMA,SAASjB,EAA0C,CAEjD,OADaD,EAA8BC,EAAS,CAAC,MAAM,CAAC,EAChD,IAAKkB,GAAaV,EAAkBU,CAAQ,CAAC,CAC3D,CACF,EAEA,SAASP,EAAkBX,EAA+BU,EAA8B,CACtF,MAAO,CACL,GAAIV,EAAQ,IAAMU,EAAO,IAAM,GAC/B,aAAcV,EAAQ,cAAgBU,EAAO,cAAgB,GAC7D,UAAWA,EAAO,WAAa,GAC/B,SAAUA,EAAO,UAAY,EAAA,CAEjC,CAEA,SAASE,EAAsBF,EAA8B,CAC3D,MAAO,CACL,MAAOA,EAAO,OAAS,GACvB,MAAOA,EAAO,OAAS,GACvB,WAAYA,EAAO,WACnB,WAAYA,EAAO,WACnB,QAASA,EAAO,QAChB,OAAQA,EAAO,OACf,UAAWA,EAAO,UAClB,KAAMA,EAAO,IAAA,CAEjB,CAEA,SAASG,EAAcH,EAA8B,CACnD,MAAO,CACL,UAAWA,EAAO,WAAa,CAAA,EAC/B,OAAQA,EAAO,QAAU,CAAA,CAAC,CAE9B,CAEA,SAASI,EAAoBd,EAA+BU,EAA8B,CACxF,MAAO,CACL,OAASV,EAAQ,QAAUU,EAAO,QAAU,UAC5C,eAAiBV,EAAQ,gBACvBU,EAAO,eACT,UAAWV,EAAQ,WAAaU,EAAO,UACvC,mBAAoBV,EAAQ,oBAAsBU,EAAO,mBACzD,sBAAuBV,EAAQ,uBAAyBU,EAAO,qBAAA,CAEnE,CAEA,SAASK,EAASf,EAA+BU,EAA8B,CAC7E,MAAO,CACL,SAAUV,EAAQ,UAAYA,EAAQ,UAAYU,EAAO,UAAYA,EAAO,UAAY,GACxF,oBACEV,EAAQ,YACRA,EAAQ,qBACRU,EAAO,YACPA,EAAO,oBACT,UAAWV,EAAQ,WAAaU,EAAO,WAAa,EAAA,CAExD,CCnKA,MAAMS,EAAc,CAClB,IAAK,CAAC,QAAQ,EACd,QAAS,IAAM,CAAC,GAAGA,EAAY,IAAK,SAAS,EAC7C,SAAU,IAAM,CAAC,GAAGA,EAAY,IAAK,UAAU,EAC/C,SAAWC,GAAiC,CAAC,GAAGD,EAAY,IAAK,WAAYC,CAAI,EACjF,UAAW,IAAM,CAAC,GAAGD,EAAY,IAAK,WAAW,EACjD,SAAU,IAAM,CAAC,GAAGA,EAAY,IAAK,UAAU,CACjD,EAEO,SAASE,GAAwB,CACtC,OAAOC,EAAS,CACd,SAAUH,EAAY,QAAA,EACtB,QAAS,SAAY,CACnB,MAAMI,EAAW,MAAMC,EAAU,IAAwBC,EAAc,UAAU,EACjF,OAAOhB,EAAc,QAAQc,EAAS,IAAI,CAC5C,EACA,UAAW,IAAO,GAAK,CAAA,CACxB,CACH,CAEO,SAASG,GAAiC,CAC/C,MAAMC,EAAcC,EAAA,EAEpB,OAAOC,EAAY,CACjB,WAAY,MAAOC,GAAiC,CAClD,MAAMP,EAAW,MAAMC,EAAU,IAAwBC,EAAc,WAAYK,CAAI,EACvF,OAAOrB,EAAc,QAAQc,EAAS,IAAI,CAC5C,EACA,UAAYQ,GAAmB,CAC7BJ,EAAY,aAAaR,EAAY,QAAA,EAAWY,CAAc,CAChE,CAAA,CACD,CACH,CAEO,SAASC,GAAyB,CACvC,OAAOV,EAAS,CACd,SAAUH,EAAY,SAAA,EACtB,QAAS,SAAY,CACnB,MAAMI,EAAW,MAAMC,EAAU,IAAyBC,EAAc,gBAAgB,EACxF,OAAOhB,EAAc,SAASc,EAAS,IAAI,CAC7C,EACA,UAAW,IAAO,GAAK,CAAA,CACxB,CACH,CAEO,SAASU,GAAyB,CACvC,OAAOX,EAAS,CACd,SAAUH,EAAY,SAAS,QAAQ,EACvC,QAAS,SAAY,CACnB,MAAMI,EAAW,MAAMC,EAAU,IAAyBC,EAAc,gBAAgB,EACxF,OAAOhB,EAAc,SAASc,EAAS,IAAI,CAC7C,EACA,UAAW,IAAO,GAAK,CAAA,CACxB,CACH,CAEO,SAASW,GAA4B,CAC1C,OAAOZ,EAAS,CACd,SAAUH,EAAY,SAAS,WAAW,EAC1C,QAAS,SAAY,CACnB,MAAMI,EAAW,MAAMC,EAAU,IAC/BC,EAAc,0BAAA,EAEhB,OAAOhB,EAAc,SAASc,EAAS,IAAI,CAC7C,EACA,UAAW,IAAO,GAAK,CAAA,CACxB,CACH,CAEO,SAASY,GAA0B,CACxC,OAAOb,EAAS,CACd,SAAUH,EAAY,UAAA,EACtB,QAAS,WACU,MAAMK,EAAU,IAA0BC,EAAc,iBAAiB,GAE/D,MAAM,WAAa,CAAA,GAC7B,IACdW,IAAwB,CACvB,GAAIA,EAAS,IAAM,GACnB,KAAMA,EAAS,MAAQ,GACvB,KAAMA,EAAS,MAAQ,GACvB,IAAKA,EAAS,KAAO,GACrB,UAAWA,EAAS,WAAa,EAAA,EACnC,EAGJ,UAAW,IAAO,GAAK,EAAA,CACxB,CACH,CAEO,SAASC,GAAyB,CACvC,OAAOf,EAAS,CACd,SAAUH,EAAY,SAAA,EACtB,QAAS,SAAY,CACnB,MAAMI,EAAW,MAAMC,EAAU,IAAyBC,EAAc,gBAAgB,EACxF,OAAOhB,EAAc,SAASc,EAAS,IAAI,CAC7C,EACA,UAAW,IAAO,GAAK,CAAA,CACxB,CACH,CAEO,SAASe,GAAkB,CAChC,MAAMX,EAAcC,EAAA,EAEpB,OAAOC,EAAY,CACjB,WAAY,MAAOU,GAAsB,CACvC,MAAMC,EAAWf,EAAc,sBAAsB,QAAQ,MAAOc,CAAS,EAC7E,OAAOf,EAAU,KAAKgB,EAAU,EAAE,CACpC,EACA,UAAW,IAAM,CACVb,EAAY,kBAAkB,CAAE,SAAUR,EAAY,SAAS,QAAQ,EAAG,EAC1EQ,EAAY,kBAAkB,CAAE,SAAUR,EAAY,SAAS,WAAW,EAAG,CACpF,CAAA,CACD,CACH,CAEO,SAASsB,GAAwB,CACtC,MAAMd,EAAcC,EAAA,EAEpB,OAAOC,EAAY,CACjB,WAAY,MAAOU,GAAsB,CACvC,MAAMC,EAAWf,EAAc,sBAAsB,QAAQ,MAAOc,CAAS,EAC7E,OAAOf,EAAU,OAAOgB,CAAQ,CAClC,EACA,UAAW,IAAM,CACVb,EAAY,kBAAkB,CAAE,SAAUR,EAAY,SAAS,QAAQ,EAAG,EAC1EQ,EAAY,kBAAkB,CAAE,SAAUR,EAAY,SAAS,WAAW,EAAG,CACpF,CAAA,CACD,CACH,CC/HA,SAASuB,EACPC,EACAC,EACAC,EACA,CACA,MAAMC,EAAgBC,EAAAA,QACpB,KACGH,EAAc,MAAQ,CAAA,GACpB,OAAQ5B,GAAqBA,EAAQ,SAAW,WAAW,EAC3D,OAAO,CAACgC,EAAahC,IAAqBgC,EAAMhC,EAAQ,OAAQ,CAAC,EACtE,CAAC4B,EAAc,IAAI,CAAA,EAGfK,EAAkBF,EAAAA,QACtB,KACGH,EAAc,MAAQ,CAAA,GAAI,OAAQ5B,GAAqBA,EAAQ,SAAW,SAAS,EAAE,OACxF,CAAC4B,EAAc,IAAI,CAAA,EAGfM,EAAmBH,EAAAA,QACvB,KACGF,EAAc,MAAQ,CAAA,GAAI,OAAQ5B,GAAqBA,EAAQ,SAAW,UAAU,EAAE,OACzF,CAAC4B,EAAc,IAAI,CAAA,EAGfM,EAAkBJ,EAAAA,QAAQ,IAAM,CACpC,MAAMK,EAAST,EAAa,MAAM,oBAClC,OAAKS,EACE,KAAK,MAAM,IAAI,KAAKA,CAAM,EAAE,QAAA,EAAY,KAAK,IAAA,IAAU,IAAO,GAAK,GAAK,GAAG,EAD9D,IAEtB,EAAG,CAACT,EAAa,MAAM,mBAAmB,CAAC,EAErCU,EAAYF,IAAoB,MAAQA,GAAmB,EAC3DG,EAAiBH,IAAoB,MAAQA,EAAkB,GAAKA,GAAmB,GAE7F,MAAO,CACL,cAAAL,EACA,gBAAAG,EACA,iBAAAC,EACA,gBAAAC,EACA,UAAAE,EACA,eAAAC,CAAA,CAEJ,CAMO,SAASC,IAAgB,CAC9B,MAAMZ,EAAetB,EAAA,EACfmC,EAAwB9B,EAAA,EACxBkB,EAAgBZ,EAAA,EAChBa,EAAgBZ,EAAA,EAChBwB,EAAyBvB,EAAA,EACzBwB,EAAiBvB,EAAA,EACjBwB,EAAgBtB,EAAA,EAChBuB,EAAetB,EAAA,EACfuB,EAAqBpB,EAAA,EAErB,CACJ,cAAAK,EACA,gBAAAG,EACA,iBAAAC,EACA,gBAAAC,EACA,UAAAE,EACA,eAAAC,CAAA,EACEZ,EAAwBC,EAAcC,EAAeC,CAAa,EAEhEiB,EACJnB,EAAa,WACbC,EAAc,WACdC,EAAc,WACda,EAAe,WACfC,EAAc,UAEVI,EAAQpB,EAAa,OAAO,SAAWC,EAAc,OAAO,SAAW,KAE7E,MAAO,CACL,QAASD,EAAa,MAAQ,KAC9B,SAAUC,EAAc,MAAQ,CAAA,EAChC,SAAUC,EAAc,MAAQ,CAAA,EAChC,kBAAmBY,EAAuB,MAAQ,CAAA,EAClD,UAAWC,EAAe,MAAQ,CAAA,EAClC,SAAUC,EAAc,MAAQ,CAAA,EAChC,UAAAG,EACA,MAAAC,EACA,aAAcpB,EAAa,QAC3B,cAAea,EAAsB,YACrC,cAAeZ,EAAc,QAC7B,cAAeC,EAAc,QAC7B,uBAAwBY,EAAuB,QAC/C,cAAeG,EAAa,YAC5B,WAAYC,EAAmB,YAC/B,eAAgBH,EAAe,QAC/B,cAAeC,EAAc,QAC7B,SAAU,SAAY,CACpB,MAAM,QAAQ,IAAI,CAChBhB,EAAa,QAAA,EACbC,EAAc,QAAA,EACdC,EAAc,QAAA,EACda,EAAe,QAAA,EACfC,EAAc,QAAA,CAAQ,CACvB,CACH,EACA,cAAAb,EACA,gBAAAG,EACA,iBAAAC,EACA,gBAAAC,EACA,UAAAE,EACA,eAAAC,CAAA,CAEJ"}