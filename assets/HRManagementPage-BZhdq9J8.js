import{j as e,a as p}from"./query-vendor-DeB3i2OK.js";import{b,n as y}from"./index-YnLEVKPI.js";import{D}from"./DataTable-Bz__wL_M.js";import{S as v}from"./StatusBadge-YsC6pSWk.js";import{B as N}from"./Button-jhyg_cfE.js";import{F as H}from"./Form-DBW_jRlA.js";import{F as J}from"./FormSelectField-DuLNYIRB.js";import{F as Y}from"./FormTextareaField-CARDcJgX.js";import{M as _}from"./Modal-DSDFZpMT.js";import{o as B,s as z,e as W}from"./types-BhtRVJps.js";import{A as K}from"./AdminPageHeader-BwRDnFrq.js";import{C as R}from"./ConfirmDialog-DcyEGIWl.js";import{u as w,a as I}from"./useAdminData-DA4gw9n3.js";import{a as G}from"./react-vendor-D3fc32Hw.js";import"./animation-vendor-JsFu8W7l.js";import"./helpers-C-aBis0i.js";import"./Select-ViCfK5u5.js";import"./Textarea-CHdiKLHU.js";import"./apiUtils-CDDJc0SC.js";const Q=async()=>b.get("/admin/careers"),X=async t=>b.post("/admin/careers",t),Z=async(t,l)=>b.patch(`/admin/careers/${t}`,l),ee=async t=>b.delete(`/admin/careers/${t}`),te=async()=>b.get("/admin/opportunities"),se=async t=>b.post("/admin/opportunities",t),re=async(t,l)=>b.patch(`/admin/opportunities/${t}`,l),ae=async t=>b.delete(`/admin/opportunities/${t}`),le=async()=>b.get("/admin/applications"),ne=async(t,l,r)=>b.patch(`/admin/applications/${t}/status`,{status:l,notes:r});function ie({applications:t,onReview:l}){const r=[{header:"Applicant",key:"applicant",render:a=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"font-bold text-gray-900",children:[a.firstName," ",a.lastName]}),e.jsx("div",{className:"text-xs text-gray-500",children:a.email})]})},{header:"Position",key:"position",render:a=>e.jsx("span",{className:"font-medium text-gray-700",children:a.career?.title??a.opportunity?.title??"Unknown"})},{header:"Applied Date",key:"createdAt",render:a=>e.jsx("span",{className:"text-gray-500",children:new Date(a.createdAt).toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})})},{header:"Status",key:"status",render:a=>e.jsx(v,{status:a.status})},{header:"Actions",key:"actions",align:"right",render:a=>e.jsx("button",{onClick:()=>l(a),className:"rounded-lg bg-wiria-blue-dark px-4 py-1.5 text-xs font-bold text-white shadow-sm transition-all hover:bg-blue-800",children:"Review"})}];return e.jsx("div",{className:"overflow-hidden rounded-2xl border border-gray-100 bg-white shadow-sm",children:e.jsx(D,{columns:r,data:t,rowKey:"id",emptyMessage:"No applications found in this category.",className:"rounded-none border-none shadow-none"})})}const oe=p.memo(function({careers:l,applications:r,onEdit:a,onDelete:n,onCreate:d}){const m=p.useMemo(()=>{const s={};return r.forEach(i=>{i.careerId&&(s[i.careerId]=(s[i.careerId]??0)+1)}),s},[r]),o=[{header:"Title",key:"title",className:"font-semibold text-gray-900"},{header:"Type",key:"employmentType",render:s=>e.jsx(v,{status:s.employmentType})},{header:"Applications",key:"applications",align:"center",render:s=>e.jsx("span",{className:"font-bold text-wiria-blue-dark",children:m[s.id]??0})},{header:"Status",key:"status",render:s=>e.jsx(v,{status:s.status})},{header:"Actions",key:"actions",align:"right",render:s=>e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>a(s),className:"mr-4 text-sm font-bold text-wiria-blue-dark transition-colors hover:text-blue-800",children:"Edit"}),e.jsx("button",{onClick:()=>n(s.id),className:"text-sm font-bold text-red-500 transition-colors hover:text-red-700",children:"Delete"})]})}];return e.jsxs("div",{className:"overflow-hidden rounded-2xl border border-gray-100 bg-white shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-gray-100 bg-gray-50/50 p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Active Job Postings"}),e.jsx(N,{onClick:d,size:"sm",children:"+ Post New Job"})]}),e.jsx(D,{columns:o,data:l,rowKey:"id",emptyMessage:"No job postings found.",className:"rounded-none border-none shadow-none"})]})}),de=p.memo(function({opportunities:l,applications:r,onEdit:a,onDelete:n,onCreate:d}){const m=p.useMemo(()=>{const s={};return r.forEach(i=>{i.opportunityId&&(s[i.opportunityId]=(s[i.opportunityId]??0)+1)}),s},[r]),o=[{header:"Title",key:"title",className:"font-semibold text-gray-900"},{header:"Type",key:"type",render:s=>e.jsx(v,{status:s.type})},{header:"Category",key:"category",render:s=>e.jsx("span",{className:"text-sm text-gray-600",children:s.category})},{header:"Applications",key:"applications",align:"center",render:s=>e.jsx("span",{className:"font-bold text-wiria-blue-dark",children:m[s.id]??0})},{header:"Actions",key:"actions",align:"right",render:s=>e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>a(s),className:"mr-4 text-sm font-bold text-wiria-blue-dark transition-colors hover:text-blue-800",children:"Edit"}),e.jsx("button",{onClick:()=>n(s.id),className:"text-sm font-bold text-red-500 transition-colors hover:text-red-700",children:"Delete"})]})}];return e.jsxs("div",{className:"overflow-hidden rounded-2xl border border-gray-100 bg-white shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-gray-100 bg-gray-50/50 p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Active Opportunities"}),e.jsx(N,{onClick:d,size:"sm",children:"+ New Opportunity"})]}),e.jsx(D,{columns:o,data:l,rowKey:"id",emptyMessage:"No opportunities found.",className:"rounded-none border-none shadow-none"})]})}),ce=B({status:W(["PENDING","UNDER_REVIEW","SHORTLISTED","INTERVIEWED","ACCEPTED","REJECTED"]),notes:z().optional()}),ue=[{value:"PENDING",label:"Pending"},{value:"UNDER_REVIEW",label:"Under Review"},{value:"SHORTLISTED",label:"Shortlisted"},{value:"INTERVIEWED",label:"Interviewed"},{value:"ACCEPTED",label:"Accepted"},{value:"REJECTED",label:"Rejected"}],P=t=>t?t.startsWith("http")?t:`${"http://localhost:5001/api".replace("/api","")}${t}`:"#";function me({application:t,onClose:l,onSuccess:r}){const a=async n=>{try{await ne(t.id,n.status,n.notes??""),y.success("Application status updated"),r()}catch{y.error("Failed to update status")}};return e.jsx(_,{isOpen:!0,onClose:l,title:"Application Review",size:"2xl",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 border-b border-gray-50 pb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold uppercase text-gray-400",children:"Applicant"}),e.jsxs("p",{className:"text-lg font-semibold text-wiria-blue-dark",children:[t.firstName," ",t.lastName]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold uppercase text-gray-400",children:"Current Status"}),e.jsx("div",{className:"mt-1",children:e.jsx(v,{status:t.status})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold uppercase text-gray-400",children:"Email"}),e.jsx("p",{className:"text-sm font-medium",children:t.email})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold uppercase text-gray-400",children:"Phone"}),e.jsx("p",{className:"text-sm font-medium",children:t.phone})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold uppercase text-gray-400",children:"Applied For"}),e.jsx("p",{className:"text-sm font-semibold text-wiria-blue-dark",children:t.career?.title??t.opportunity?.title??"Unknown Position"})]}),e.jsxs("div",{className:"max-h-60 overflow-y-auto rounded-xl border border-gray-100 bg-gray-50/50 p-4",children:[e.jsx("p",{className:"mb-2 text-xs font-bold uppercase text-gray-400",children:"Cover Letter / Statement"}),e.jsx("p",{className:"whitespace-pre-wrap text-sm text-gray-700",children:t.coverLetter??"No cover letter provided."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"rounded-xl border border-blue-100 bg-blue-50/50 p-4",children:[e.jsx("p",{className:"mb-2 text-xs font-bold uppercase text-blue-600",children:"Resume / CV"}),t.resumeUrl?e.jsxs("a",{href:P(t.resumeUrl),target:"_blank",rel:"noreferrer",className:"inline-flex items-center text-sm font-bold text-wiria-blue-dark hover:underline",children:[e.jsx("span",{className:"mr-2 text-base",children:"ðŸ“„"})," View CV"]}):e.jsx("p",{className:"text-sm italic text-gray-400",children:"No CV provided"})]}),e.jsxs("div",{className:"rounded-xl border border-green-100 bg-green-50/50 p-4",children:[e.jsx("p",{className:"mb-2 text-xs font-bold uppercase text-green-600",children:"Additional Documents"}),t.additionalDocs&&t.additionalDocs.length>0?e.jsx("div",{className:"space-y-1",children:t.additionalDocs.map((n,d)=>e.jsxs("a",{href:P(n),target:"_blank",rel:"noreferrer",className:"block text-sm font-semibold text-wiria-blue-dark hover:underline",children:["ðŸ”— Document ",d+1]},d))}):e.jsx("p",{className:"text-sm italic text-gray-400",children:"None"})]})]}),e.jsx(H,{schema:ce,defaultValues:{status:t.status,notes:t.notes??""},onSubmit:a,className:"border-t border-gray-100 pt-6",children:({formState:{isSubmitting:n}})=>e.jsxs("div",{className:"space-y-4",children:[e.jsx(Y,{name:"notes",label:"Reviewer Notes",placeholder:"Add private notes about this applicant...",rows:3,disabled:n}),e.jsxs("div",{className:"flex items-end gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx(J,{name:"status",label:"Application Status",options:ue,disabled:n})}),e.jsx(N,{type:"submit",disabled:n,className:"h-[42px] px-8",children:n?"Updating...":"Update Review"})]})]})})]})})}function A(t,l,r){t(a=>{const n=[...a];return n[l]=r,n})}function pe({career:t,responsibilities:l,setResponsibilities:r,requirements:a,setRequirements:n,desirable:d,setDesirable:m}){return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-bold text-gray-700",htmlFor:"career-title",children:"Job Title *"}),e.jsx("input",{id:"career-title",name:"title",defaultValue:t?.title,className:"w-full rounded-xl border-gray-200 p-3 transition-all focus:ring-2 focus:ring-wiria-blue-dark",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-bold text-gray-700",htmlFor:"career-employmentType",children:"Employment Type *"}),e.jsxs("select",{id:"career-employmentType",name:"employmentType",defaultValue:t?.employmentType,className:"w-full rounded-xl border-gray-200 p-3",required:!0,children:[e.jsx("option",{value:"FULL_TIME",children:"Full Time"}),e.jsx("option",{value:"PART_TIME",children:"Part Time"}),e.jsx("option",{value:"CONTRACT",children:"Contract"}),e.jsx("option",{value:"CONSULTANCY",children:"Consultancy"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-bold text-gray-700",htmlFor:"career-location",children:"Location *"}),e.jsx("input",{id:"career-location",name:"location",defaultValue:t?.location,className:"w-full rounded-xl border-gray-200 p-3",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-bold text-gray-700",htmlFor:"career-deadline",children:"Deadline *"}),e.jsx("input",{id:"career-deadline",type:"datetime-local",name:"deadline",defaultValue:t?.deadline?new Date(t.deadline).toISOString().slice(0,16):"",className:"w-full rounded-xl border-gray-200 p-3",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-bold text-gray-700",htmlFor:"career-salary",children:"Salary Range"}),e.jsx("input",{id:"career-salary",name:"salary",defaultValue:t?.salary,className:"w-full rounded-xl border-gray-200 p-3",placeholder:"e.g. KES 50k-80k"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-bold text-gray-700",htmlFor:"career-summary",children:"Summary (Short) *"}),e.jsx("textarea",{id:"career-summary",name:"summary",defaultValue:t?.summary,className:"h-20 w-full resize-none rounded-xl border-gray-200 p-3",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-bold text-gray-700",htmlFor:"career-description",children:"Full Description *"}),e.jsx("textarea",{id:"career-description",name:"description",defaultValue:t?.description,className:"h-32 w-full rounded-xl border-gray-200 p-3",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-8 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-sm font-bold text-gray-700",children:"Responsibilities *"}),l.map((o,s)=>e.jsx("input",{"aria-label":`Responsibility ${s+1}`,value:o,onChange:i=>A(r,s,i.target.value),className:"mb-2 w-full rounded-xl border-gray-200 p-3"},s))]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-sm font-bold text-gray-700",children:"Requirements *"}),a.map((o,s)=>e.jsx("input",{"aria-label":`Requirement ${s+1}`,value:o,onChange:i=>A(n,s,i.target.value),className:"mb-2 w-full rounded-xl border-gray-200 p-3"},s))]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-sm font-bold text-gray-700",children:"Desirable Skills (Optional)"}),d.map((o,s)=>e.jsx("input",{"aria-label":`Desirable skill ${s+1}`,value:o,onChange:i=>A(m,s,i.target.value),className:"mb-2 w-full rounded-xl border-gray-200 p-3"},s))]})]})}function xe({career:t,onClose:l,onSuccess:r}){const[a,n]=p.useState(t?.responsibilities??["","",""]),[d,m]=p.useState(t?.requirements??["","",""]),[o,s]=p.useState(t?.desirable??[]),[i,g]=p.useState(!1),f=async x=>{x.preventDefault(),g(!0);const E=new FormData(x.currentTarget),h=Object.fromEntries(E.entries()),j={title:h.title,employmentType:h.employmentType,location:h.location,deadline:new Date(h.deadline).toISOString(),salary:h.salary||void 0,summary:h.summary,description:h.description,responsibilities:a.filter(c=>c.trim()),requirements:d.filter(c=>c.trim()),desirable:o.filter(c=>c.trim())};try{await(t?Z(t.id,j):X(j)),y.success(t?"Updated":"Created"),r()}catch(c){const O=c instanceof Error?c.message:"Error";y.error(O)}finally{g(!1)}};return e.jsx(_,{isOpen:!0,onClose:l,title:t?"Edit Job Posting":"Post New Job",size:"3xl",children:e.jsxs("form",{onSubmit:x=>{f(x)},className:"space-y-8",children:[e.jsx(pe,{career:t,responsibilities:a,setResponsibilities:n,requirements:d,setRequirements:m,desirable:o,setDesirable:s}),e.jsxs("div",{className:"flex justify-end gap-4 border-t pt-8",children:[e.jsx(N,{type:"button",variant:"secondary",onClick:l,disabled:i,children:"Cancel"}),e.jsx(N,{type:"submit",disabled:i,children:i?"Saving...":"Save Job Posting"})]})]})})}function C(t,l,r){t(a=>{const n=[...a];return n[l]=r,n})}function he({opportunity:t,responsibilities:l,setResponsibilities:r,requirements:a,setRequirements:n,benefits:d,setBenefits:m}){return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-bold text-gray-700",htmlFor:"opportunity-title",children:"Title *"}),e.jsx("input",{id:"opportunity-title",name:"title",defaultValue:t?.title,className:"w-full rounded-xl border-gray-200 p-3",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-bold text-gray-700",htmlFor:"opportunity-type",children:"Type *"}),e.jsxs("select",{id:"opportunity-type",name:"type",defaultValue:t?.type,className:"w-full rounded-xl border-gray-200 p-3",required:!0,children:[e.jsx("option",{value:"INTERNSHIP",children:"Internship"}),e.jsx("option",{value:"VOLUNTEER",children:"Volunteer"}),e.jsx("option",{value:"FELLOWSHIP",children:"Fellowship"}),e.jsx("option",{value:"ATTACHMENT",children:"Industrial Attachment"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-bold text-gray-700",htmlFor:"opportunity-category",children:"Category *"}),e.jsx("input",{id:"opportunity-category",name:"category",defaultValue:t?.category,className:"w-full rounded-xl border-gray-200 p-3",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-bold text-gray-700",htmlFor:"opportunity-location",children:"Location *"}),e.jsx("input",{id:"opportunity-location",name:"location",defaultValue:t?.location,className:"w-full rounded-xl border-gray-200 p-3",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-8 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-sm font-bold text-gray-700",children:"Responsibilities (One per line) *"}),l.map((o,s)=>e.jsx("input",{"aria-label":`Opportunity responsibility ${s+1}`,value:o,onChange:i=>C(r,s,i.target.value),className:"mb-2 w-full rounded-xl border-gray-200 p-3"},s))]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-sm font-bold text-gray-700",children:"Requirements (One per line) *"}),a.map((o,s)=>e.jsx("input",{"aria-label":`Opportunity requirement ${s+1}`,value:o,onChange:i=>C(n,s,i.target.value),className:"mb-2 w-full rounded-xl border-gray-200 p-3"},s))]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-sm font-bold text-gray-700",children:"Benefits (One per line)"}),d.map((o,s)=>e.jsx("input",{"aria-label":`Benefit ${s+1}`,value:o,onChange:i=>C(m,s,i.target.value),className:"mb-2 w-full rounded-xl border-gray-200 p-3"},s))]})]})}function ye({opportunity:t,onClose:l,onSuccess:r}){const[a,n]=p.useState(t?.responsibilities??["","",""]),[d,m]=p.useState(t?.requirements??["","",""]),[o,s]=p.useState(t?.benefits??[]),[i,g]=p.useState(!1),f=async x=>{x.preventDefault(),g(!0);const E=new FormData(x.currentTarget),j={...Object.fromEntries(E.entries()),responsibilities:a.filter(c=>c.trim()),requirements:d.filter(c=>c.trim()),benefits:o.filter(c=>c.trim())};try{await(t?re(t.id,j):se(j)),y.success("Success"),r()}catch{y.error("Error")}finally{g(!1)}};return e.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/60 p-4 backdrop-blur-sm",children:e.jsxs("div",{className:"animate-in zoom-in-95 flex max-h-[90vh] w-full max-w-5xl flex-col overflow-hidden rounded-3xl bg-white shadow-2xl duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between border-b p-8",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:t?"Edit Opportunity":"New Opportunity"}),e.jsx("button",{onClick:l,className:"text-4xl leading-none text-gray-400 hover:text-gray-600",children:"Ã—"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto bg-gray-50/30 p-8",children:e.jsxs("form",{onSubmit:x=>{f(x)},className:"space-y-8",children:[e.jsx(he,{opportunity:t,responsibilities:a,setResponsibilities:n,requirements:d,setRequirements:m,benefits:o,setBenefits:s}),e.jsxs("div",{className:"flex justify-end gap-4 border-t pt-8",children:[e.jsx(N,{type:"button",variant:"secondary",onClick:l,disabled:i,children:"Cancel"}),e.jsx(N,{type:"submit",disabled:i,children:i?"Saving...":"Publish Opportunity"})]})]})})]})})}function be({showCareerModal:t,selectedCareer:l,onCloseCareerModal:r,showOpportunityModal:a,selectedOpportunity:n,onCloseOpportunityModal:d,showApplicationModal:m,selectedApplication:o,onCloseApplicationModal:s}){return e.jsxs(e.Fragment,{children:[t&&e.jsx(xe,{career:l,onClose:r,onSuccess:r}),a&&e.jsx(ye,{opportunity:n,onClose:d,onSuccess:d}),m&&o&&e.jsx(me,{application:o,onClose:s,onSuccess:s})]})}function ge({activeTab:t,setActiveTab:l}){return e.jsx("div",{className:"flex gap-1 rounded-xl border border-gray-100 bg-white p-1 shadow-sm",children:["CAREERS","OPPORTUNITIES","APPLICATIONS"].map(r=>e.jsx("button",{onClick:()=>l(r),className:`rounded-lg px-6 py-2 text-sm font-bold transition-all ${t===r?"bg-wiria-blue-dark text-white shadow-md":"text-gray-500 hover:bg-gray-50 hover:text-wiria-blue-dark"}`,children:r.charAt(0)+r.slice(1).toLowerCase()},r))})}function fe(t,l){switch(l.type){case"SET_TAB":return{...t,activeTab:l.tab};case"OPEN_CAREER_MODAL":return{...t,selectedCareer:l.career,showCareerModal:!0};case"OPEN_OPPORTUNITY_MODAL":return{...t,selectedOpportunity:l.opportunity,showOpportunityModal:!0};case"OPEN_APPLICATION_MODAL":return{...t,selectedApplication:l.application,showApplicationModal:!0};case"CLOSE_CAREER_MODAL":return{...t,selectedCareer:null,showCareerModal:!1};case"CLOSE_OPPORTUNITY_MODAL":return{...t,selectedOpportunity:null,showOpportunityModal:!1};case"CLOSE_APPLICATION_MODAL":return{...t,selectedApplication:null,showApplicationModal:!1};case"SET_CAREER_ID_TO_DELETE":return{...t,careerIdToDelete:l.id};case"SET_OPPORTUNITY_ID_TO_DELETE":return{...t,opportunityIdToDelete:l.id};default:return t}}function Ue(){const t=G(),[l,r]=p.useReducer(fe,{activeTab:"CAREERS",selectedCareer:null,selectedOpportunity:null,selectedApplication:null,showCareerModal:!1,showOpportunityModal:!1,showApplicationModal:!1,careerIdToDelete:null,opportunityIdToDelete:null}),{activeTab:a,selectedCareer:n,selectedOpportunity:d,selectedApplication:m,showCareerModal:o,showOpportunityModal:s,showApplicationModal:i,careerIdToDelete:g,opportunityIdToDelete:f}=l;p.useEffect(()=>{const S=new URLSearchParams(t.search).get("tab");if(!S)return;const T=S.toUpperCase();(T==="CAREERS"||T==="OPPORTUNITIES"||T==="APPLICATIONS")&&r({type:"SET_TAB",tab:T})},[t.search]);const{items:x,isLoading:E}=w(["careers"],Q,{enabled:a==="CAREERS"||a==="APPLICATIONS"}),{items:h,isLoading:j}=w(["opportunities"],te,{enabled:a==="OPPORTUNITIES"||a==="APPLICATIONS"}),{items:c,isLoading:O}=w(["applications"],le),L=I(u=>ee(u),[["careers"]],{onSuccess:()=>{y.success("Job posting deleted")},onError:()=>{y.error("Failed to delete job posting")}}),k=I(u=>ae(u),[["opportunities"]],{onSuccess:()=>{y.success("Opportunity deleted")},onError:()=>{y.error("Failed to delete opportunity")}}),M=u=>{r({type:"SET_CAREER_ID_TO_DELETE",id:u})},F=u=>{r({type:"SET_OPPORTUNITY_ID_TO_DELETE",id:u})},U=()=>{g&&(L.mutate(g),r({type:"SET_CAREER_ID_TO_DELETE",id:null}))},q=()=>{f&&(k.mutate(f),r({type:"SET_OPPORTUNITY_ID_TO_DELETE",id:null}))},V=u=>{r({type:"OPEN_APPLICATION_MODAL",application:u})},$=E||j||O;return e.jsxs("div",{className:"space-y-8",children:[e.jsx(K,{title:"HR & Talent Management",description:"Manage job postings, volunteer opportunities, and applications",children:e.jsx(ge,{activeTab:a,setActiveTab:u=>{r({type:"SET_TAB",tab:u})}})}),e.jsx("main",{className:"min-h-[400px]",children:$?e.jsx("div",{className:"flex items-center justify-center p-20",children:e.jsx("div",{className:"h-12 w-12 animate-spin rounded-full border-b-2 border-wiria-blue-dark"})}):e.jsxs(e.Fragment,{children:[a==="CAREERS"&&e.jsx(oe,{careers:x,applications:c,onEdit:u=>{r({type:"OPEN_CAREER_MODAL",career:u})},onDelete:M,onCreate:()=>{r({type:"OPEN_CAREER_MODAL",career:null})}}),a==="OPPORTUNITIES"&&e.jsx(de,{opportunities:h,applications:c,onEdit:u=>{r({type:"OPEN_OPPORTUNITY_MODAL",opportunity:u})},onDelete:F,onCreate:()=>{r({type:"OPEN_OPPORTUNITY_MODAL",opportunity:null})}}),a==="APPLICATIONS"&&e.jsx(ie,{applications:c,onReview:V})]})}),e.jsx(be,{showCareerModal:o,selectedCareer:n,onCloseCareerModal:()=>{r({type:"CLOSE_CAREER_MODAL"})},showOpportunityModal:s,selectedOpportunity:d,onCloseOpportunityModal:()=>{r({type:"CLOSE_OPPORTUNITY_MODAL"})},showApplicationModal:i,selectedApplication:m,onCloseApplicationModal:()=>{r({type:"CLOSE_APPLICATION_MODAL"})}}),e.jsx(R,{isOpen:g!==null,title:"Delete Job Posting",message:"Are you sure you want to delete this job posting? This action cannot be undone.",confirmLabel:"Delete",onConfirm:U,onCancel:()=>{r({type:"SET_CAREER_ID_TO_DELETE",id:null})}}),e.jsx(R,{isOpen:f!==null,title:"Delete Opportunity",message:"Are you sure you want to delete this opportunity? This action cannot be undone.",confirmLabel:"Delete",onConfirm:q,onCancel:()=>{r({type:"SET_OPPORTUNITY_ID_TO_DELETE",id:null})}})]})}export{Ue as default};
//# sourceMappingURL=HRManagementPage-BZhdq9J8.js.map
