import{j as e}from"./query-vendor-CM55eWOT.js";import{r as g,c as j,L as h}from"./react-vendor-CXp26_Hx.js";import{B as L}from"./Button-JX_3oChN.js";import{f as b,n as p,U as l,R as m,k as y,o as N,s as x,e as E,F as f}from"./index-Ck6qqv4n.js";function v(s=!1){const[c,a]=g.useState(!1),[d,r]=g.useState(null),{login:i}=b(),t=j();return{handleLogin:async w=>{a(!0),r(null);try{const n=await i(w,s);p.success("Login successful!");const o=n.role;o===l.MEMBER?t(m.MEMBER_PORTAL,{replace:!0}):[l.SUPER_ADMIN,l.ADMIN,l.STAFF].includes(o)?t(m.ADMIN,{replace:!0}):t(m.HOME,{replace:!0})}catch(n){const o=n instanceof y?n.message||"Invalid credentials":"Login failed. Please try again.";r(o),p.error(o)}finally{a(!1)}},isLoading:c,error:d}}const F=N({identifier:x().min(3,"Username, email or phone is required"),password:x().min(6,"Password must be at least 6 characters")});function I({isMember:s=!1,title:c,subtitle:a}){const{handleLogin:d,isLoading:r,error:i}=v(s),t=async u=>{await d(u)};return e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"mb-8 text-center",children:[e.jsx("h1",{className:"mb-2 text-3xl font-bold text-wiria-blue-dark",children:c||(s?"Member Login":"Staff Login")}),a&&e.jsx("p",{className:"text-gray-600",children:a})]}),e.jsx(E,{schema:F,defaultValues:{identifier:"",password:""},onSubmit:t,className:"rounded-lg bg-white p-8 shadow-lg",children:()=>e.jsxs(e.Fragment,{children:[e.jsx(f,{name:"identifier",label:s?"Email or Phone":"Username or Email",placeholder:s?"your@email.com or 0712345678":"username",disabled:r}),e.jsx(f,{name:"password",label:"Password",type:"password",placeholder:"Enter your password",disabled:r}),i&&e.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 p-3",children:e.jsx("p",{className:"text-sm text-red-800",children:i})}),e.jsx(L,{type:"submit",fullWidth:!0,isLoading:r,children:r?"Logging in...":"Login"}),e.jsxs("div",{className:"space-y-2 text-center text-sm",children:[e.jsx(h,{to:"/reset-password",className:"block text-wiria-blue-dark transition-colors hover:text-wiria-yellow",children:"Forgot password?"}),s&&e.jsxs("p",{className:"text-gray-600",children:["Not a member?"," ",e.jsx(h,{to:"/membership",className:"text-wiria-yellow hover:underline",children:"Register here"})]})]})]})})]})}export{I as L};
//# sourceMappingURL=LoginForm-gI46sUOb.js.map
