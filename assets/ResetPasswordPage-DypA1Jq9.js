import{j as e}from"./query-vendor-frBnvHSF.js";import{r as i,L as y}from"./react-vendor-BdaLayic.js";import{B as w}from"./Button-K8iFFe9S.js";import{C as P,a as C}from"./Card-DmlQfAyP.js";import{I as h}from"./Input-1n81zAKh.js";import{b as g,n as c,l as k}from"./index-ICA0O2oL.js";import{A as v}from"./endpoints-Cofiu-EW.js";import"./helpers-Brneqz2V.js";import"./animation-vendor-CrU7SSpu.js";function R({email:s,isLoading:r,onEmailChange:o,onSubmit:d,onGoToConfirm:n}){return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-8 text-center",children:[e.jsx("div",{className:"mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-wiria-yellow/10",children:e.jsx("svg",{className:"h-8 w-8 text-wiria-yellow",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})})}),e.jsx("h1",{className:"text-2xl font-bold text-wiria-blue-dark",children:"Reset Password"}),e.jsx("p",{className:"mt-2 text-gray-500",children:"Enter your email to receive a password reset link"})]}),e.jsxs("form",{onSubmit:d,className:"space-y-6",children:[e.jsx(h,{type:"email",label:"Email Address",value:s,onChange:m=>o(m.target.value),placeholder:"you@example.com",required:!0}),e.jsx(w,{type:"submit",fullWidth:!0,size:"lg",isLoading:r,children:"Send Reset Link"})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Already have a reset token?"," ",e.jsx("button",{onClick:n,className:"font-semibold text-wiria-blue-dark hover:text-wiria-yellow",children:"Enter token"})]})})]})}function S({token:s,newPassword:r,confirmPassword:o,isLoading:d,onTokenChange:n,onNewPasswordChange:m,onConfirmPasswordChange:l,onSubmit:f,onBackToRequest:u}){return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-8 text-center",children:[e.jsx("div",{className:"mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-green-100",children:e.jsx("svg",{className:"h-8 w-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("h1",{className:"text-2xl font-bold text-wiria-blue-dark",children:"Check Your Email"}),e.jsx("p",{className:"mt-2 text-gray-500",children:"Enter the token from your email and set a new password"})]}),e.jsxs("form",{onSubmit:f,className:"space-y-6",children:[e.jsx(h,{label:"Reset Token",value:s,onChange:t=>n(t.target.value),placeholder:"Enter token from email",required:!0}),e.jsx(h,{type:"password",label:"New Password",value:r,onChange:t=>m(t.target.value),placeholder:"••••••••",helperText:"Minimum 8 characters",required:!0}),e.jsx(h,{type:"password",label:"Confirm Password",value:o,onChange:t=>l(t.target.value),placeholder:"••••••••",required:!0}),e.jsx(w,{type:"submit",fullWidth:!0,size:"lg",isLoading:d,children:"Reset Password"})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx("button",{onClick:u,className:"text-sm text-gray-500 hover:text-wiria-blue-dark",children:"← Request new reset link"})})]})}function L(){return e.jsxs("div",{className:"py-6 text-center",children:[e.jsx("div",{className:"mx-auto mb-6 flex h-20 w-20 items-center justify-center rounded-full bg-green-100",children:e.jsx("svg",{className:"h-10 w-10 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsx("h1",{className:"mb-2 text-2xl font-bold text-green-800",children:"Password Reset!"}),e.jsx("p",{className:"mb-6 text-gray-600",children:"Your password has been successfully reset. You can now login with your new password."}),e.jsx(y,{to:"/member-login",children:e.jsx(w,{fullWidth:!0,size:"lg",children:"Login to Member Portal"})})]})}function E({hidden:s}){return s?null:e.jsx("div",{className:"mt-8 border-t border-gray-100 pt-6 text-center",children:e.jsxs(y,{to:"/member-login",className:"inline-flex items-center gap-2 text-sm text-gray-500 hover:text-wiria-blue-dark",children:[e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to Login"]})})}function D(){const[s,r]=i.useState("request"),[o,d]=i.useState(""),[n,m]=i.useState(""),[l,f]=i.useState(""),[u,t]=i.useState(""),[j,x]=i.useState(!1),b=async a=>{a.preventDefault(),x(!0);try{await g.post(v.AUTH_RESET_PASSWORD_REQUEST,{email:o}),c.success("Password reset link sent to your email!"),r("confirm")}catch(p){c.error("Failed to send reset link. Please check your email and try again."),k.error("Reset request error:",p)}finally{x(!1)}},N=async a=>{if(a.preventDefault(),l!==u){c.error("Passwords do not match");return}if(l.length<8){c.error("Password must be at least 8 characters");return}x(!0);try{await g.post(v.AUTH_RESET_PASSWORD_CONFIRM,{token:n,newPassword:l}),c.success("Password reset successfully!"),r("success")}catch(p){c.error("Failed to reset password. Token may be invalid or expired."),k.error("Reset confirm error:",p)}finally{x(!1)}};return e.jsx("div",{className:"flex min-h-[70vh] items-center justify-center bg-gray-50 px-4 py-12",children:e.jsx("div",{className:"w-full max-w-md",children:e.jsx(P,{children:e.jsxs(C,{className:"p-8",children:[s==="request"&&e.jsx(R,{email:o,isLoading:j,onEmailChange:d,onSubmit:a=>{b(a)},onGoToConfirm:()=>r("confirm")}),s==="confirm"&&e.jsx(S,{token:n,newPassword:l,confirmPassword:u,isLoading:j,onTokenChange:m,onNewPasswordChange:f,onConfirmPasswordChange:t,onSubmit:a=>{N(a)},onBackToRequest:()=>r("request")}),s==="success"&&e.jsx(L,{}),e.jsx(E,{hidden:s==="success"})]})})})})}export{D as default};
//# sourceMappingURL=ResetPasswordPage-DypA1Jq9.js.map
