{"version":3,"file":"useAdminData-91Z-y-lf.js","sources":["../../src/shared/components/ui/DataTable.tsx","../../src/shared/hooks/useAdminData.ts"],"sourcesContent":["import { ReactNode } from 'react';\nimport { cn } from '@/shared/utils/helpers';\n\nexport interface Column<T> {\n  header: string;\n  key: string;\n  render?: (item: T) => ReactNode;\n  className?: string;\n  align?: 'left' | 'center' | 'right';\n}\n\ninterface DataTableProps<T> {\n  columns: Column<T>[];\n  data: T[];\n  isLoading?: boolean;\n  onRowClick?: (item: T) => void;\n  emptyMessage?: string;\n  className?: string;\n  rowKey: keyof T | ((item: T) => string);\n  rowClassName?: (item: T) => string;\n}\n\nexport function DataTable<T>({\n  columns,\n  data,\n  isLoading,\n  onRowClick,\n  emptyMessage = 'No data found.',\n  className,\n  rowKey,\n  rowClassName,\n}: DataTableProps<T>) {\n  const getRowKey = (item: T): string => {\n    if (typeof rowKey === 'function') return rowKey(item);\n    return String(item[rowKey]);\n  };\n\n  const getRowClassName = (item: T): string => {\n    if (typeof rowClassName === 'function') return rowClassName(item);\n    return '';\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"rounded-xl border border-gray-100 bg-white p-8 text-center shadow-sm\">\n        <div className=\"border-wiria-blue mx-auto mb-4 h-10 w-10 animate-spin rounded-full border-4 border-t-transparent\" />\n        <p className=\"font-medium text-gray-500\">Loading data...</p>\n      </div>\n    );\n  }\n\n  if (data.length === 0) {\n    return (\n      <div className=\"rounded-xl border border-gray-100 bg-white p-12 text-center shadow-sm\">\n        <span className=\"mb-4 block text-4xl\">ðŸ“‚</span>\n        <p className=\"text-lg font-medium text-gray-500\">{emptyMessage}</p>\n      </div>\n    );\n  }\n\n  return (\n    <div\n      className={cn(\n        'overflow-x-auto rounded-xl border border-gray-100 bg-white shadow-sm',\n        className\n      )}\n    >\n      <table className=\"w-full border-collapse text-left\">\n        <thead className=\"border-b border-gray-100 bg-gray-50/50\">\n          <tr>\n            {columns.map((col, i) => (\n              <th\n                key={col.key || i}\n                className={cn(\n                  'px-6 py-4 text-sm font-bold uppercase tracking-wider text-gray-700',\n                  col.align === 'center' && 'text-center',\n                  col.align === 'right' && 'text-right',\n                  col.className\n                )}\n              >\n                {col.header}\n              </th>\n            ))}\n          </tr>\n        </thead>\n        <tbody className=\"divide-y divide-gray-50\">\n          {data.map((item) => (\n            <tr\n              key={getRowKey(item)}\n              onClick={() => onRowClick?.(item)}\n              className={cn(\n                'group transition-colors',\n                onRowClick ? 'hover:bg-wiria-blue/5 cursor-pointer' : 'hover:bg-gray-50/50',\n                getRowClassName(item)\n              )}\n            >\n              {columns.map((col, i) => (\n                <td\n                  key={col.key || i}\n                  className={cn(\n                    'px-6 py-4 text-sm text-gray-600',\n                    col.align === 'center' && 'text-center',\n                    col.align === 'right' && 'text-right',\n                    col.className\n                  )}\n                >\n                  {col.render ? col.render(item) : (item[col.key as keyof T] as ReactNode)}\n                </td>\n              ))}\n            </tr>\n          ))}\n        </tbody>\n      </table>\n    </div>\n  );\n}\n","import { useQuery, useMutation, useQueryClient, QueryKey } from '@tanstack/react-query';\nimport { extractArray } from '@/shared/utils/apiUtils';\nimport { notificationService } from '@/shared/services/notification/notificationService';\n\n/**\n * Generic hook for fetching admin data with standardized extraction and error handling\n */\nexport function useAdminData<T>(\n  queryKey: QueryKey,\n  fetchFn: () => Promise<unknown>,\n  options: {\n    arrayKey?: string;\n    onError?: (error: unknown) => void;\n    staleTime?: number;\n    enabled?: boolean;\n  } = {}\n) {\n  const { data, ...rest } = useQuery({\n    queryKey,\n    queryFn: async () => {\n      try {\n        const response = await fetchFn();\n        return extractArray<T>(response, options.arrayKey);\n      } catch (error) {\n        if (options.onError) {\n          options.onError(error);\n        } else {\n          console.error(`Error fetching ${queryKey.join('/')}:`, error);\n          notificationService.error('Failed to load data. Please try again.');\n        }\n        throw error;\n      }\n    },\n    staleTime: options.staleTime ?? 1000 * 60 * 5, // 5 minutes default\n    enabled: options.enabled,\n  });\n\n  return {\n    items: data ?? [],\n    ...rest,\n  };\n}\n\n/**\n * Generic hook for admin CRUD operations with automatic cache invalidation\n */\nexport function useAdminAction<TInput, TResponse>(\n  actionFn: (input: TInput) => Promise<TResponse>,\n  queriesToInvalidate: string[][],\n  options: {\n    successMessage?: string;\n    errorMessage?: string;\n    onSuccess?: (data: TResponse) => void;\n  } = {}\n) {\n  const queryClient = useQueryClient();\n\n  return useMutation({\n    mutationFn: actionFn,\n    onSuccess: (data) => {\n      queriesToInvalidate.forEach((key) => {\n        queryClient.invalidateQueries({ queryKey: key });\n      });\n\n      if (options.successMessage) {\n        notificationService.success(options.successMessage);\n      }\n\n      options.onSuccess?.(data);\n    },\n    onError: (error) => {\n      console.error('Action failed:', error);\n      notificationService.error(options.errorMessage ?? 'Operation failed');\n    },\n  });\n}\n"],"names":["DataTable","columns","data","isLoading","onRowClick","emptyMessage","className","rowKey","rowClassName","getRowKey","item","getRowClassName","jsxs","jsx","cn","col","i","useAdminData","queryKey","fetchFn","options","rest","useQuery","response","extractArray","error","notificationService","useAdminAction","actionFn","queriesToInvalidate","queryClient","useQueryClient","useMutation","key","_a"],"mappings":"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"}