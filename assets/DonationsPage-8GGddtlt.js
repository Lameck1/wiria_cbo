import{j as e}from"./query-vendor-DHwl1fd7.js";import{a as j,n as m,A as D,L as V,f as E}from"./index-Chx-FnBA.js";import{C as v,a as P}from"./Card-ZXsCUXPm.js";import{B as A}from"./Button-BXp3l8QM.js";import{I as k}from"./Input-C5pkOg9I.js";import{S as C}from"./Spinner-CVHhsreH.js";import{m as r,A as S}from"./animation-vendor-DqiKO7jm.js";import{u as L,P as K,a as O}from"./usePaymentPoller-DVki4Np1.js";import{r as x}from"./react-vendor-Bq_hyp-_.js";const H=[{value:500,label:"500",impact:"5 Youth Kits"},{value:1e3,label:"1,000",impact:"10 Handbooks"},{value:2e3,label:"2,000",impact:"20 HIV Tests"},{value:5e3,label:"5,000",impact:"10 Women Trained"},{value:1e4,label:"10,000",impact:"Community Outreach"}];function X({selectedAmount:t,onAmountChange:n,disabled:h}){return e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-wiria-blue-dark mb-4",children:["Select Amount (KES) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-5 gap-4 mb-6",children:H.map(a=>e.jsxs(r.button,{type:"button","aria-label":a.label,whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>n(a.value),disabled:h,className:`
                            relative flex flex-col items-center justify-center min-h-[100px] p-2 px-3 rounded-2xl border-2 transition-all duration-300
                            ${t===a.value?"border-wiria-yellow bg-wiria-yellow/10 shadow-lg shadow-wiria-yellow/5":"border-gray-100 bg-white hover:border-gray-300 hover:bg-gray-50"}
                            disabled:opacity-50 disabled:cursor-not-allowed
                        `,children:[e.jsx("span",{className:`text-xl font-extrabold tracking-tight ${t===a.value?"text-wiria-blue-dark":"text-gray-800"}`,children:a.label}),e.jsx("span",{className:`text-[10px] uppercase tracking-widest font-bold mt-2 text-center leading-tight ${t===a.value?"text-wiria-blue-dark/70":"text-gray-400"}`,children:a.impact}),t===a.value&&e.jsx(r.div,{layoutId:"activeAmountBorder",className:"absolute -inset-[2px] border-2 border-wiria-yellow rounded-2xl pointer-events-none ring-4 ring-wiria-yellow/10",transition:{type:"spring",bounce:.2,duration:.5}})]},a.value))}),e.jsxs("div",{className:"bg-gray-100/50 p-4 rounded-xl border border-dashed border-gray-300",children:[e.jsx("label",{htmlFor:"customAmount",className:"block text-xs font-bold text-gray-500 uppercase tracking-widest mb-3",children:"Or enter a custom amount:"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 flex items-center pointer-events-none",children:e.jsx("span",{className:"text-gray-400 font-bold mr-1",children:"KES"})}),e.jsx("input",{id:"customAmount",type:"number",min:"100",value:t,onChange:a=>n(Number(a.target.value)),disabled:h,className:"block w-full pl-16 pr-4 py-3 bg-white border border-gray-200 rounded-lg text-lg font-semibold text-wiria-blue-dark focus:ring-2 focus:ring-wiria-yellow/30 focus:border-wiria-yellow outline-none transition-all disabled:bg-gray-50 disabled:cursor-not-allowed",placeholder:"0.00"})]}),e.jsx("p",{className:"mt-2 text-xs text-gray-400 italic",children:"Minimum donation: KES 100"})]})]})}const _=[{amount:"500",amountDisplay:"500",title:"Education Kits",description:"Provide mentorship kits for 5 youth in our empowerment programs.",icon:"ðŸ“š",color:"from-blue-400 to-blue-600"},{amount:"2000",amountDisplay:"2K",title:"Health Services",description:"Supports HIV testing and counseling for 20 community members.",icon:"ðŸ¥",color:"from-green-400 to-green-600"},{amount:"5000",amountDisplay:"5K",title:"Economic Empowerment",description:"Enables business skills training for 10 women in our livelihood program.",icon:"âš–ï¸",color:"from-wiria-yellow to-orange-500"}],U={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.2}}},B={hidden:{y:30,opacity:0},visible:{y:0,opacity:1,transition:{type:"spring",stiffness:100}}};function R(){return e.jsx("section",{className:"py-24 bg-gradient-to-b from-white to-gray-50 overflow-hidden",children:e.jsxs("div",{className:"container mx-auto px-4 lg:px-6",children:[e.jsxs("div",{className:"text-center mb-16 relative",children:[e.jsx(r.div,{initial:{opacity:0,scale:.9},whileInView:{opacity:1,scale:1},viewport:{once:!0},className:"inline-block px-4 py-1.5 bg-wiria-blue-dark/5 text-wiria-blue-dark rounded-full text-sm font-bold mb-4",children:"Your Impact Matters"}),e.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-wiria-blue-dark mb-6",children:"See the Difference You Make"}),e.jsx("div",{className:"w-24 h-1.5 bg-gradient-to-r from-wiria-yellow to-wiria-green-light mx-auto rounded-full mb-8"}),e.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto text-lg",children:"Every shilling you donate goes directly towards fueling our high-impact programs in Homa Bay County."})]}),e.jsx(r.div,{variants:U,initial:"hidden",whileInView:"visible",viewport:{once:!0,margin:"-100px"},className:"grid md:grid-cols-3 gap-8 lg:gap-12 max-w-6xl mx-auto",children:_.map(t=>e.jsxs(r.div,{variants:B,whileHover:{y:-10},className:"bg-white rounded-3xl p-8 shadow-xl shadow-gray-200/50 border border-gray-100 flex flex-col items-center text-center group",children:[e.jsx("div",{className:`w-20 h-20 rounded-2xl bg-gradient-to-br ${t.color} flex items-center justify-center text-4xl shadow-lg mb-8 group-hover:rotate-6 transition-transform duration-300 ring-4 ring-white`,children:t.icon}),e.jsx("div",{className:"mb-4",children:e.jsxs("span",{className:"text-3xl font-black text-wiria-blue-dark",children:["KES ",t.amountDisplay]})}),e.jsx("h4",{className:"text-xl font-bold text-gray-800 mb-4",children:t.title}),e.jsx("p",{className:"text-gray-600 leading-relaxed mb-8",children:t.description}),e.jsx("div",{className:"mt-auto pt-6 border-t border-gray-100 w-full text-sm font-bold text-wiria-blue-dark/40 group-hover:text-wiria-yellow transition-colors",children:"HIGH IMPACT PROGRAM"})]},t.amount))})]})})}const Y=[{label:"Bank Name:",value:"Kenya Commercial Bank"},{label:"Account Name:",value:"WIRIA CBO"},{label:"Account Number:",value:"1234567890"}];function F(){return e.jsxs("div",{className:"mt-12 bg-white border border-gray-200 p-8 rounded-xl text-center shadow-sm",children:[e.jsx("h3",{className:"text-xl font-bold text-wiria-blue-dark mb-4",children:"Other Ways to Give"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"You can also donate directly to our bank account:"}),e.jsx("div",{className:"inline-block bg-gray-50 p-6 rounded-lg text-left",children:e.jsx("div",{className:"grid grid-cols-2 gap-x-8 gap-y-2 text-sm",children:Y.map(t=>e.jsxs("div",{className:"contents",children:[e.jsx("span",{className:"text-gray-500",children:t.label}),e.jsx("span",{className:"font-semibold",children:t.value})]},t.label))})})]})}function q(){const[t,n]=x.useState(!1),[h,a]=x.useState(null),[w,p]=x.useState(null),[o,u]=x.useState(null),[f,b]=x.useState(!1),[d,y]=x.useState(!1);return{initiateDonation:async s=>{n(!0),u(null);try{const l=await j.post(D.DONATIONS_INITIATE,s),{donation:i,checkoutRequestId:N,message:T}=l.data;return p(i.id),s.paymentMethod==="STK_PUSH"&&N?(a(N),u("PENDING"),m.info("STK push sent to your phone. Please complete the payment.")):m.success(T||"Donation initiated successfully!"),{success:!0,donationId:i.id,checkoutRequestId:N}}catch{return m.error("Failed to initiate donation. Please try again."),{success:!1}}finally{n(!1)}},checkPaymentStatus:async s=>{try{const l=await j.get(`${D.DONATIONS_STATUS}/${s}`),{status:i}=l.data;return u(i),i==="COMPLETED"?(m.success("Payment completed successfully! Thank you for your donation."),"COMPLETED"):i==="FAILED"?(m.error("Payment failed. Please try again."),"FAILED"):i}catch{return"PENDING"}},verifyManualPayment:async(s,l)=>{b(!0),y(!1);try{const i=await j.post("/api/donations/verify-manual",{phone:s,amount:l,accountReference:"DONATION"});return i.verified||i.status==="CONFIRMED"?(y(!0),m.success("Payment verified successfully!"),{success:!0}):(m.error("Payment not found yet. Please wait a moment and try again."),{success:!1})}catch{return m.error("Verification failed. Please try again."),{success:!1}}finally{b(!1)}},resetDonation:()=>{a(null),p(null),u(null),n(!1),b(!1),y(!1)},isSubmitting:t,isVerifying:f,isManualPaymentVerified:d,checkoutRequestId:h,donationId:w,paymentStatus:o}}function ae(){const[t,n]=x.useState({amount:1e3,donorName:"",donorEmail:"",donorPhone:"",paymentMethod:"STK_PUSH",manualVerificationPhone:""}),{initiateDonation:h,checkPaymentStatus:a,verifyManualPayment:w,resetDonation:p,isSubmitting:o,isVerifying:u,isManualPaymentVerified:f,donationId:b,paymentStatus:d}=q();L({donationId:b,isActive:d==="PENDING"&&t.paymentMethod==="STK_PUSH",onStatusCheck:a});const y=async c=>{if(c.preventDefault(),t.paymentMethod==="MANUAL"&&!f){alert("Please verify your payment first.");return}const s={amount:t.amount,donorName:t.donorName,donorEmail:t.donorEmail,donorPhone:E(t.donorPhone),purpose:"",isAnonymous:!1,paymentMethod:t.paymentMethod};(await h(s)).success&&t.paymentMethod==="MANUAL"&&setTimeout(()=>{confirm("Would you like to make another donation?")&&(p(),n({amount:1e3,donorName:"",donorEmail:"",donorPhone:"",paymentMethod:"STK_PUSH",manualVerificationPhone:""}))},2e3)},g=c=>{const{name:s,value:l}=c.target;n(i=>({...i,[s]:l}))},I=async()=>{if(!t.manualVerificationPhone){alert("Please enter the phone number used for payment");return}await w(E(t.manualVerificationPhone),t.amount)},M=()=>{p(),n({amount:1e3,donorName:"",donorEmail:"",donorPhone:"",paymentMethod:"STK_PUSH",manualVerificationPhone:""})};return e.jsxs(V,{children:[e.jsxs("section",{className:"relative bg-wiria-blue-dark py-28 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 opacity-20",children:e.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')]"})}),e.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-wiria-yellow/10 rounded-full blur-3xl -mr-48 -mt-48"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 bg-blue-600/10 rounded-full blur-3xl -ml-48 -mb-48"}),e.jsx("div",{className:"container mx-auto px-4 lg:px-6 relative z-10",children:e.jsx("div",{className:"max-w-4xl mx-auto text-center",children:e.jsxs(r.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[e.jsx("span",{className:"inline-block px-5 py-2 bg-wiria-yellow text-wiria-blue-dark rounded-full text-xs font-bold uppercase tracking-widest mb-8 shadow-lg shadow-wiria-yellow/20",children:"Make an Impact"}),e.jsxs("h1",{className:"text-5xl md:text-7xl font-black text-white mb-8 tracking-tight",children:["Your Support ",e.jsx("span",{className:"text-wiria-yellow",children:"Saves Lives"})]}),e.jsx("p",{className:"text-xl md:text-2xl text-blue-100 font-medium leading-relaxed max-w-2xl mx-auto",children:"Join us in our mission to empower communities, enhance health, and champion human rights in Homa Bay County."})]})})})]}),e.jsx("section",{className:"py-20 bg-gray-50 relative -mt-10 rounded-t-[3rem] shadow-2xl z-20",children:e.jsx("div",{className:"container mx-auto px-4 lg:px-6",children:e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsxs(S,{mode:"wait",children:[d==="COMPLETED"&&e.jsx(r.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},children:e.jsxs(v,{className:"mb-12 bg-white border-none shadow-2xl rounded-3xl overflow-hidden",children:[e.jsx("div",{className:"h-2 bg-green-500 w-full"}),e.jsx(P,{className:"p-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-24 h-24 bg-green-100 text-green-600 rounded-full flex items-center justify-center text-5xl mx-auto mb-8 animate-bounce",children:"âœ“"}),e.jsx("h2",{className:"text-4xl font-black text-wiria-blue-dark mb-6",children:"Donation Successful!"}),e.jsxs("p",{className:"text-xl text-gray-600 mb-10 leading-relaxed",children:["Your generous contribution of"," ",e.jsxs("span",{className:"font-bold text-wiria-blue-dark px-2 bg-wiria-yellow/20 rounded",children:["KES ",t.amount.toLocaleString()]})," ","has been received. We are deeply grateful for your support."]}),e.jsx(A,{onClick:M,size:"lg",className:"px-10 py-4 bg-wiria-blue-dark text-white rounded-2xl hover:bg-blue-900 transition-all font-bold text-lg",children:"Make Another Donation"})]})})]})},"success"),d==="PENDING"&&t.paymentMethod==="STK_PUSH"&&e.jsx(r.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},children:e.jsxs(v,{className:"mb-12 bg-white border-none shadow-2xl rounded-3xl overflow-hidden",children:[e.jsx("div",{className:"h-2 bg-wiria-yellow w-full"}),e.jsx(P,{className:"p-10",children:e.jsxs("div",{className:"text-center max-w-md mx-auto",children:[e.jsxs("div",{className:"relative w-24 h-24 mx-auto mb-8",children:[e.jsx(C,{size:"lg",className:"absolute inset-0 w-full h-full text-wiria-yellow"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-2xl",children:"ðŸ“±"})]}),e.jsx("h3",{className:"text-2xl font-black text-wiria-blue-dark mb-4",children:"Complete on Your Phone"}),e.jsxs("div",{className:"space-y-4 mb-8 text-left bg-gray-50 p-6 rounded-2xl border border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-4 text-sm font-bold text-wiria-blue-dark",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-wiria-yellow flex items-center justify-center text-[10px] text-white",children:"1"}),e.jsx("span",{children:"Check your phone for M-Pesa prompt"})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm font-bold text-wiria-blue-dark",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-wiria-yellow flex items-center justify-center text-[10px] text-white",children:"2"}),e.jsx("span",{children:"Enter your M-Pesa PIN"})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-400",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-gray-200 flex items-center justify-center text-[10px] text-white",children:"3"}),e.jsx("span",{children:"Wait for confirmation here"})]})]}),e.jsx("p",{className:"text-sm text-gray-500 animate-pulse",children:"Checking payment status securelly..."})]})})]})},"pending"),d!=="COMPLETED"&&d!=="PENDING"&&e.jsx(r.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},children:e.jsx(v,{className:"bg-white shadow-2xl rounded-[2.5rem] overflow-hidden border-none p-2 sm:p-4",children:e.jsxs(P,{className:"p-6 sm:p-12",children:[e.jsxs("div",{className:"flex flex-col items-center mb-12",children:[e.jsx("div",{className:"w-20 h-20 bg-wiria-yellow/10 text-wiria-yellow rounded-2xl flex items-center justify-center text-3xl mb-6 rotate-3 shadow-inner",children:"â¤ï¸"}),e.jsx("h2",{className:"text-4xl font-black text-wiria-blue-dark mb-4 text-center",children:"Enter Donation Details"}),e.jsx("p",{className:"text-gray-500 font-medium",children:"Your information is secure and private."})]}),e.jsxs("form",{onSubmit:y,className:"space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-1 bg-gray-50/50 rounded-3xl",children:[e.jsx(k,{label:"Full Name",name:"donorName",value:t.donorName,onChange:g,required:!0,placeholder:"Jane Doe",disabled:o,className:"bg-white border-gray-100 rounded-2xl h-14"}),e.jsx(k,{type:"email",label:"Email Address",name:"donorEmail",value:t.donorEmail,onChange:g,required:!0,placeholder:"jane@example.com",disabled:o,className:"bg-white border-gray-100 rounded-2xl h-14"})]}),e.jsx("div",{className:"pt-4 border-t border-gray-100",children:e.jsx(X,{selectedAmount:t.amount,onAmountChange:c=>n(s=>({...s,amount:c})),disabled:o})}),e.jsx("div",{className:"pt-4 border-t border-gray-100",children:e.jsx(K,{selected:t.paymentMethod,onChange:c=>n(s=>({...s,paymentMethod:c})),disabled:o})}),e.jsx(S,{children:t.paymentMethod==="STK_PUSH"&&e.jsx(r.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"overflow-hidden",children:e.jsx(k,{label:"M-Pesa Phone Number",name:"donorPhone",value:t.donorPhone,onChange:g,required:!0,placeholder:"e.g., 254712345678",helperText:"Format: 2547XXXXXXXX or 2541XXXXXXXX",disabled:o,className:"bg-white border-gray-100 rounded-2xl h-14"})})}),e.jsx(S,{children:t.paymentMethod==="MANUAL"&&e.jsx(r.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"overflow-hidden",children:e.jsxs("div",{className:"bg-blue-50/50 p-8 rounded-3xl border-2 border-dashed border-blue-200",children:[e.jsxs("h4",{className:"font-bold text-wiria-blue-dark text-lg mb-6 flex items-center gap-2",children:[e.jsx("span",{className:"bg-blue-100 p-2 rounded-lg",children:"ðŸ“‹"})," Paybill Instructions"]}),e.jsx(O,{paymentMethod:"MANUAL",amount:t.amount}),e.jsxs("div",{className:"space-y-4 mt-10",children:[e.jsx("p",{className:"text-sm font-bold text-wiria-blue-dark uppercase tracking-wider opacity-60",children:"Verify Your Payment"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("input",{type:"text",name:"manualVerificationPhone",value:t.manualVerificationPhone,onChange:g,placeholder:"Phone number used...",className:"flex-1 px-6 py-4 border-2 border-gray-100 rounded-2xl text-base focus:ring-4 focus:ring-wiria-yellow/10 focus:border-wiria-yellow outline-none transition-all placeholder:text-gray-300"}),e.jsx("button",{type:"button",onClick:I,disabled:u,className:"bg-wiria-blue-dark text-white font-black py-4 px-8 rounded-2xl hover:bg-blue-900 transition-all shadow-xl shadow-blue-900/10 flex items-center justify-center gap-2 disabled:opacity-50",children:u?e.jsx(C,{size:"sm"}):"Verify"})]}),f&&e.jsxs(r.p,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},className:"text-sm font-bold text-green-600 bg-green-50 p-3 rounded-xl border border-green-100 flex items-center gap-2",children:[e.jsx("span",{children:"âœ“"})," Payment Verified! You can now complete your donation."]})]})]})})}),e.jsx(A,{type:"submit",fullWidth:!0,size:"lg",isLoading:o,className:"w-full bg-gradient-to-r from-wiria-blue-dark to-blue-900 text-white font-black py-5 px-8 rounded-2xl hover:translate-y-[-2px] hover:shadow-2xl transition-all shadow-xl shadow-blue-900/20 flex items-center justify-center gap-4 text-xl group",children:o?"Processing...":e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Complete Donation"}),e.jsx("svg",{className:"w-6 h-6 group-hover:translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]})}),e.jsxs("div",{className:"mt-8 flex items-center justify-center gap-3 text-xs text-gray-400 font-medium",children:[e.jsx("span",{className:"flex items-center gap-1",children:"ðŸ”’ SSL Secure"}),e.jsx("span",{children:"â€¢"}),e.jsx("span",{children:"Powered by M-Pesa Safaricom"})]})]})]})})},"form")]}),d!=="COMPLETED"&&e.jsx(r.div,{initial:{opacity:0},whileInView:{opacity:1},viewport:{once:!0},className:"mt-12",children:e.jsx(F,{})})]})})}),e.jsx(R,{})]})}export{ae as default};
//# sourceMappingURL=DonationsPage-8GGddtlt.js.map
