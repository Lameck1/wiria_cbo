import{j as e}from"./query-vendor-DD8i-cqI.js";import{r,L as p}from"./react-vendor-CPrm261X.js";import{L as N,a as f,A as w,n as t}from"./index-BCEghY_F.js";import{C as P,a as C}from"./Card-aheH1Y98.js";import{B as d}from"./Button-Bwbs8nAk.js";import{I as i}from"./Input-D2RcsvqJ.js";import"./animation-vendor-DKvKsx_2.js";function W(){const[a,o]=r.useState("request"),[m,j]=r.useState(""),[u,g]=r.useState(""),[l,y]=r.useState(""),[x,k]=r.useState(""),[h,n]=r.useState(!1),v=async s=>{s.preventDefault(),n(!0);try{await f.post(w.AUTH_RESET_PASSWORD_REQUEST,{email:m}),t.success("Password reset link sent to your email!"),o("confirm")}catch(c){t.error("Failed to send reset link. Please check your email and try again."),console.error("Reset request error:",c)}finally{n(!1)}},b=async s=>{if(s.preventDefault(),l!==x){t.error("Passwords do not match");return}if(l.length<8){t.error("Password must be at least 8 characters");return}n(!0);try{await f.post(w.AUTH_RESET_PASSWORD_CONFIRM,{token:u,newPassword:l}),t.success("Password reset successfully!"),o("success")}catch(c){t.error("Failed to reset password. Token may be invalid or expired."),console.error("Reset confirm error:",c)}finally{n(!1)}};return e.jsx(N,{children:e.jsx("div",{className:"min-h-[70vh] flex items-center justify-center py-12 px-4 bg-gray-50",children:e.jsx("div",{className:"w-full max-w-md",children:e.jsx(P,{children:e.jsxs(C,{className:"p-8",children:[a==="request"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-16 h-16 bg-wiria-yellow/10 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-wiria-yellow",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})})}),e.jsx("h1",{className:"text-2xl font-bold text-wiria-blue-dark",children:"Reset Password"}),e.jsx("p",{className:"text-gray-500 mt-2",children:"Enter your email to receive a password reset link"})]}),e.jsxs("form",{onSubmit:v,className:"space-y-6",children:[e.jsx(i,{type:"email",label:"Email Address",value:m,onChange:s=>j(s.target.value),placeholder:"you@example.com",required:!0}),e.jsx(d,{type:"submit",fullWidth:!0,size:"lg",isLoading:h,children:"Send Reset Link"})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Already have a reset token?"," ",e.jsx("button",{onClick:()=>o("confirm"),className:"text-wiria-blue-dark hover:text-wiria-yellow font-semibold",children:"Enter token"})]})})]}),a==="confirm"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("h1",{className:"text-2xl font-bold text-wiria-blue-dark",children:"Check Your Email"}),e.jsx("p",{className:"text-gray-500 mt-2",children:"Enter the token from your email and set a new password"})]}),e.jsxs("form",{onSubmit:b,className:"space-y-6",children:[e.jsx(i,{label:"Reset Token",value:u,onChange:s=>g(s.target.value),placeholder:"Enter token from email",required:!0}),e.jsx(i,{type:"password",label:"New Password",value:l,onChange:s=>y(s.target.value),placeholder:"••••••••",helperText:"Minimum 8 characters",required:!0}),e.jsx(i,{type:"password",label:"Confirm Password",value:x,onChange:s=>k(s.target.value),placeholder:"••••••••",required:!0}),e.jsx(d,{type:"submit",fullWidth:!0,size:"lg",isLoading:h,children:"Reset Password"})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx("button",{onClick:()=>o("request"),className:"text-sm text-gray-500 hover:text-wiria-blue-dark",children:"← Request new reset link"})})]}),a==="success"&&e.jsxs("div",{className:"text-center py-6",children:[e.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx("svg",{className:"w-10 h-10 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsx("h1",{className:"text-2xl font-bold text-green-800 mb-2",children:"Password Reset!"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Your password has been successfully reset. You can now login with your new password."}),e.jsx(p,{to:"/member-login",children:e.jsx(d,{fullWidth:!0,size:"lg",children:"Login to Member Portal"})})]}),a!=="success"&&e.jsx("div",{className:"mt-8 pt-6 border-t border-gray-100 text-center",children:e.jsxs(p,{to:"/member-login",className:"text-sm text-gray-500 hover:text-wiria-blue-dark inline-flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to Login"]})})]})})})})})}export{W as default};
//# sourceMappingURL=ResetPasswordPage-C2PYiRVB.js.map
