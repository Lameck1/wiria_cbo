{"version":3,"file":"useMemberData-Dtng_W7m.js","sources":["../../src/features/membership/components/PortalNavigation.tsx","../../src/features/membership/components/PortalLayout.tsx","../../src/features/membership/hooks/useMemberData.ts"],"sourcesContent":["/**\n * Portal Navigation Component\n * Horizontal tabs for member portal pages\n */\n\nimport { NavLink } from 'react-router-dom';\n\nconst NAV_ITEMS = [\n    { to: '/member-portal', label: 'Dashboard', icon: 'üè†', exact: true },\n    { to: '/member-profile', label: 'Profile', icon: 'üë§' },\n    { to: '/member-renewal', label: 'Renewal', icon: 'üîÑ' },\n    { to: '/member-payments', label: 'Payments', icon: 'üí≥' },\n    { to: '/member-meetings', label: 'Meetings', icon: 'üìÖ' },\n];\n\nexport function PortalNavigation() {\n    return (\n        <nav className=\"bg-white rounded-xl shadow-md mb-6 overflow-x-auto\">\n            <div className=\"flex\">\n                {NAV_ITEMS.map((item) => (\n                    <NavLink\n                        key={item.to}\n                        to={item.to}\n                        end={item.exact}\n                        className={({ isActive }) =>\n                            `flex items-center gap-2 px-5 py-4 text-sm font-semibold border-b-2 whitespace-nowrap transition-colors ${isActive\n                                ? 'border-wiria-blue-dark text-wiria-blue-dark bg-wiria-blue-dark/5'\n                                : 'border-transparent text-gray-600 hover:text-wiria-blue-dark hover:bg-gray-50'\n                            }`\n                        }\n                    >\n                        <span>{item.icon}</span>\n                        <span>{item.label}</span>\n                    </NavLink>\n                ))}\n            </div>\n        </nav>\n    );\n}\n","/**\n * Portal Layout Component\n * Shared layout for all member portal pages\n */\n\nimport { ReactNode } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { useAuth } from '@/features/auth/context/AuthContext';\nimport { PortalNavigation } from './PortalNavigation';\n\ninterface PortalLayoutProps {\n    children: ReactNode;\n    title: string;\n    subtitle?: string;\n    showNavigation?: boolean;\n}\n\nexport function PortalLayout({ children, title, subtitle, showNavigation = true }: PortalLayoutProps) {\n    const { user, logout } = useAuth();\n    const navigate = useNavigate();\n\n    const handleLogout = async () => {\n        await logout();\n        navigate('/member-login');\n    };\n\n    return (\n        <div className=\"min-h-screen bg-gray-50\">\n            {/* Portal Header */}\n            <header className=\"bg-white shadow-md sticky top-0 z-50\">\n                <nav className=\"container mx-auto px-4 lg:px-6 py-4 flex justify-between items-center\">\n                    <Link to=\"/member-portal\" className=\"flex items-center gap-2\">\n                        <img\n                            src={`${import.meta.env.BASE_URL}images/Wiria_CBO_Logo_NEW_IV.png`}\n                            alt=\"WIRIA CBO\"\n                            className=\"h-10\"\n                        />\n                        <span className=\"text-xl font-bold text-wiria-blue-dark hidden sm:block\">WIRIA CBO</span>\n                    </Link>\n                    <div className=\"flex items-center space-x-4\">\n                        <Link\n                            to=\"/\"\n                            className=\"text-sm font-semibold text-wiria-blue-dark hover:text-wiria-yellow transition-colors\"\n                        >\n                            üè† Home\n                        </Link>\n                        {user && (\n                            <span className=\"text-sm font-semibold text-gray-700 hidden md:block\">\n                                {user.firstName} {user.lastName}\n                            </span>\n                        )}\n                        <button\n                            onClick={handleLogout}\n                            className=\"bg-gray-200 text-gray-700 font-bold py-2 px-4 rounded-lg hover:bg-gray-300 transition-all text-sm\"\n                        >\n                            Logout\n                        </button>\n                    </div>\n                </nav>\n            </header>\n\n            <main className=\"py-8\">\n                <div className=\"container mx-auto px-4\">\n                    {/* Page Header */}\n                    <div className=\"mb-6\">\n                        <h1 className=\"text-3xl font-bold text-wiria-blue-dark mb-1\">{title}</h1>\n                        {subtitle && <p className=\"text-gray-600\">{subtitle}</p>}\n                    </div>\n\n                    {/* Portal Navigation */}\n                    {showNavigation && <PortalNavigation />}\n\n                    {/* Page Content */}\n                    {children}\n                </div>\n            </main>\n\n            {/* Portal Footer */}\n            <footer className=\"bg-wiria-blue-dark text-white py-8 mt-12\">\n                <div className=\"container mx-auto px-4 text-center\">\n                    <p>&copy; 2025 WIRIA Community Based Organization. Confidential Member Portal.</p>\n                </div>\n            </footer>\n        </div>\n    );\n}\n","/**\n * Member Data Hook\n * Fetches member profile, payments, meetings, documents, and activity\n */\n\nimport { useState, useCallback } from 'react';\nimport { apiClient } from '@/shared/services/api/client';\nimport { API_ENDPOINTS } from '@/shared/services/api/endpoints';\n\n// Types\nexport interface MemberProfile {\n    id: string;\n    memberNumber: string;\n    firstName: string;\n    lastName: string;\n    email: string;\n    phone: string;\n    nationalId?: string;\n    occupation?: string;\n    address?: string;\n    county?: string;\n    subcounty?: string;\n    ward?: string;\n    interests?: string[];\n    skills?: string[];\n    status: 'PENDING' | 'ACTIVE' | 'SUSPENDED' | 'EXPIRED';\n    membershipType?: 'INDIVIDUAL' | 'GROUP';\n    groupName?: string;\n    currentMemberCount?: number;\n    maxMemberCountReached?: number;\n    membershipExpiresAt?: string;\n    joinedAt: string;\n    createdAt: string;\n}\n\nexport interface Payment {\n    id: string;\n    amount: number;\n    type: 'REGISTRATION' | 'RENEWAL' | 'DONATION';\n    status: 'PENDING' | 'COMPLETED' | 'FAILED';\n    method: 'STK_PUSH' | 'MANUAL';\n    mpesaReceiptNumber?: string;\n    createdAt: string;\n}\n\nexport interface Meeting {\n    id: string;\n    title: string;\n    description?: string;\n    date: string;\n    time: string;\n    location: string;\n    type: 'AGM' | 'SPECIAL' | 'COMMITTEE' | 'TRAINING';\n    status: 'UPCOMING' | 'ONGOING' | 'COMPLETED' | 'CANCELLED';\n    isRsvpd?: boolean;\n    attendeesCount?: number;\n}\n\nexport interface Document {\n    id: string;\n    name: string;\n    type: string;\n    url: string;\n    createdAt: string;\n}\n\nexport interface Activity {\n    id: string;\n    type: string;\n    description: string;\n    createdAt: string;\n    timestamp?: string; // Backend may send timestamp instead of createdAt\n}\n\n// API response type that handles varying backend response structures\ninterface MemberApiResponse extends Partial<MemberProfile> {\n    props?: Partial<MemberProfile> & {\n        joinDate?: string;\n        expiryDate?: string;\n    };\n    joinDate?: string;\n    expiryDate?: string;\n}\n\nexport function useMemberData() {\n    const [profile, setProfile] = useState<MemberProfile | null>(null);\n    const [payments, setPayments] = useState<Payment[]>([]);\n    const [meetings, setMeetings] = useState<Meeting[]>([]);\n    const [availableMeetings, setAvailableMeetings] = useState<Meeting[]>([]);\n    const [documents, setDocuments] = useState<Document[]>([]);\n    const [activity, setActivity] = useState<Activity[]>([]);\n    const [isLoading, setIsLoading] = useState(false);\n    const [error, setError] = useState<string | null>(null);\n\n    const fetchProfile = useCallback(async () => {\n        try {\n            const response = await apiClient.get<{ data: MemberApiResponse }>(API_ENDPOINTS.MEMBERS_ME);\n\n            const apiData = response.data;\n\n            if (!apiData) {\n                console.error('fetchProfile: Valid data not found in response');\n                return null;\n            }\n\n            // Map backend fields to frontend interface, handling potential \"props\" wrapper or flat structure\n            const mappedProfile: MemberProfile = {\n                ...apiData as Partial<MemberProfile>,\n                // Required fields with fallbacks\n                id: apiData.id || '',\n                memberNumber: apiData.memberNumber || '',\n                firstName: apiData.firstName || apiData.props?.firstName || '',\n                lastName: apiData.lastName || apiData.props?.lastName || '',\n                email: apiData.email || apiData.props?.email || '',\n                phone: apiData.phone || apiData.props?.phone || '',\n\n                // Date overrides\n                joinedAt: apiData.joinDate || apiData.joinedAt || apiData.props?.joinDate || '',\n                membershipExpiresAt: apiData.expiryDate || apiData.membershipExpiresAt || apiData.props?.expiryDate,\n                status: apiData.status || 'PENDING',\n                createdAt: apiData.createdAt || '',\n                // Group fields\n                membershipType: apiData.membershipType || apiData.props?.membershipType,\n                groupName: apiData.groupName || apiData.props?.groupName,\n                currentMemberCount: apiData.currentMemberCount || apiData.props?.currentMemberCount,\n                maxMemberCountReached: apiData.maxMemberCountReached || apiData.props?.maxMemberCountReached,\n            };\n\n            setProfile(mappedProfile);\n            return mappedProfile;\n        } catch (err) {\n            console.error('Failed to fetch profile:', err);\n            throw err;\n        }\n    }, []);\n\n    const updateProfile = useCallback(async (data: Partial<MemberProfile>) => {\n        try {\n            const response = await apiClient.put<{ data: MemberApiResponse }>(API_ENDPOINTS.MEMBERS_ME, data);\n            const apiData = response.data;\n            const mappedProfile: MemberProfile = {\n                ...apiData as Partial<MemberProfile>,\n                id: apiData.id || '',\n                memberNumber: apiData.memberNumber || '',\n                firstName: apiData.firstName || '',\n                lastName: apiData.lastName || '',\n                email: apiData.email || '',\n                phone: apiData.phone || '',\n                status: apiData.status || 'PENDING',\n                createdAt: apiData.createdAt || '',\n                joinedAt: apiData.joinDate || apiData.joinedAt || '',\n                membershipExpiresAt: apiData.expiryDate || apiData.membershipExpiresAt,\n            };\n            setProfile(mappedProfile);\n            return mappedProfile;\n        } catch (err) {\n            console.error('Failed to update profile:', err);\n            throw err;\n        }\n    }, []);\n\n\n\n    const fetchPayments = useCallback(async () => {\n        try {\n            // API returns { data: { payments: [], summary: {} } }\n            const response = await apiClient.get<{ data: { payments: Payment[] } }>(API_ENDPOINTS.MEMBERS_PAYMENTS);\n            const paymentList = response.data?.payments || [];\n            setPayments(paymentList);\n            return paymentList;\n        } catch (err) {\n            console.error('Failed to fetch payments:', err);\n            // Don't throw, just set empty to avoid crash\n            setPayments([]);\n            return [];\n        }\n    }, []);\n\n    const fetchMeetings = useCallback(async () => {\n        try {\n            // API returns { data: Meeting[] }\n            const response = await apiClient.get<{ data: Meeting[] }>(API_ENDPOINTS.MEMBERS_MEETINGS);\n            const meetingList = Array.isArray(response.data) ? response.data : [];\n            setMeetings(meetingList);\n            return meetingList;\n        } catch (err) {\n            console.error('Failed to fetch meetings:', err);\n            setMeetings([]);\n            return [];\n        }\n    }, []);\n\n    const fetchAvailableMeetings = useCallback(async () => {\n        try {\n            const response = await apiClient.get<{ data: Meeting[] }>(API_ENDPOINTS.MEMBERS_MEETINGS_AVAILABLE);\n            const meetingList = Array.isArray(response.data) ? response.data : [];\n            setAvailableMeetings(meetingList);\n            return meetingList;\n        } catch (err) {\n            console.error('Failed to fetch available meetings:', err);\n            setAvailableMeetings([]);\n            return [];\n        }\n    }, []);\n\n    // ... (rsvp/cancelRsvp)\n\n    const rsvpToMeeting = useCallback(async (meetingId: string) => {\n        try {\n            const endpoint = API_ENDPOINTS.MEMBERS_MEETINGS_RSVP.replace(':id', meetingId);\n            await apiClient.post(endpoint, {});\n            // Refresh meetings after RSVP\n            await fetchMeetings();\n            await fetchAvailableMeetings();\n        } catch (err) {\n            console.error('Failed to RSVP:', err);\n            // throw err; // Optional: rethrow if UI needs to show specific error\n        }\n    }, [fetchMeetings, fetchAvailableMeetings]);\n\n    const cancelRsvp = useCallback(async (meetingId: string) => {\n        try {\n            const endpoint = API_ENDPOINTS.MEMBERS_MEETINGS_RSVP.replace(':id', meetingId);\n            await apiClient.delete(endpoint);\n            await fetchMeetings();\n            await fetchAvailableMeetings();\n        } catch (err) {\n            console.error('Failed to cancel RSVP:', err);\n        }\n    }, [fetchMeetings, fetchAvailableMeetings]);\n\n    const fetchDocuments = useCallback(async () => {\n        try {\n            // API returns { data: { documents: [], message: string } }\n            const response = await apiClient.get<{ data: { documents: Document[] } }>(API_ENDPOINTS.MEMBERS_DOCUMENTS);\n            const docList = response.data?.documents || [];\n            setDocuments(docList);\n            return docList;\n        } catch (err) {\n            console.error('Failed to fetch documents:', err);\n            setDocuments([]);\n            return [];\n        }\n    }, []);\n\n    const fetchActivity = useCallback(async () => {\n        try {\n            // API returns { data: Activity[] }\n            const response = await apiClient.get<{ data: Activity[] }>(API_ENDPOINTS.MEMBERS_ACTIVITY);\n            const activityList = Array.isArray(response.data) ? response.data : [];\n\n            // Map backend timestamp to frontend createdAt\n            const mappedActivity = activityList.map(item => ({\n                ...item,\n                createdAt: item.timestamp || item.createdAt\n            }));\n\n            setActivity(mappedActivity);\n            return mappedActivity;\n        } catch (err) {\n            console.error('Failed to fetch activity:', err);\n            setActivity([]);\n            return [];\n        }\n    }, []);\n\n    const fetchAll = useCallback(async () => {\n        setIsLoading(true);\n        setError(null);\n        try {\n            await Promise.all([\n                fetchProfile(),\n                fetchPayments(),\n                fetchMeetings(),\n                fetchDocuments(),\n                fetchActivity(),\n            ]);\n        } catch (_err) {\n            setError('Failed to load member data');\n        } finally {\n            setIsLoading(false);\n        }\n    }, [fetchProfile, fetchPayments, fetchMeetings, fetchDocuments, fetchActivity]);\n\n    // Computed values\n    const totalPayments = payments\n        .filter(p => p.status === 'COMPLETED')\n        .reduce((sum, p) => sum + p.amount, 0);\n\n    const pendingPayments = payments.filter(p => p.status === 'PENDING').length;\n\n    const upcomingMeetings = (meetings || []).filter(m => m.status === 'UPCOMING').length;\n\n    const daysUntilExpiry = profile?.membershipExpiresAt\n        ? Math.ceil((new Date(profile.membershipExpiresAt).getTime() - Date.now()) / (1000 * 60 * 60 * 24))\n        : null;\n\n    const isExpired = daysUntilExpiry !== null && daysUntilExpiry <= 0;\n    const isExpiringSoon = daysUntilExpiry !== null && daysUntilExpiry > 0 && daysUntilExpiry <= 30;\n\n    return {\n        // Data\n        profile,\n        payments,\n        meetings,\n        availableMeetings,\n        documents,\n        activity,\n\n        // State\n        isLoading,\n        error,\n\n        // Actions\n        fetchProfile,\n        updateProfile,\n        fetchPayments,\n        fetchMeetings,\n        fetchAvailableMeetings,\n        rsvpToMeeting,\n        cancelRsvp,\n        fetchDocuments,\n        fetchActivity,\n        fetchAll,\n\n        // Computed\n        totalPayments,\n        pendingPayments,\n        upcomingMeetings,\n        daysUntilExpiry,\n        isExpired,\n        isExpiringSoon,\n    };\n}\n"],"names":["NAV_ITEMS","PortalNavigation","jsx","item","jsxs","NavLink","isActive","PortalLayout","children","title","subtitle","showNavigation","user","logout","useAuth","navigate","useNavigate","handleLogout","Link","useMemberData","profile","setProfile","useState","payments","setPayments","meetings","setMeetings","availableMeetings","setAvailableMeetings","documents","setDocuments","activity","setActivity","isLoading","setIsLoading","error","setError","fetchProfile","useCallback","apiData","apiClient","API_ENDPOINTS","mappedProfile","_a","_b","_c","_d","_e","_f","_g","_h","_i","_j","err","updateProfile","data","fetchPayments","paymentList","fetchMeetings","response","meetingList","fetchAvailableMeetings","rsvpToMeeting","meetingId","endpoint","cancelRsvp","fetchDocuments","docList","fetchActivity","mappedActivity","fetchAll","totalPayments","p","sum","pendingPayments","upcomingMeetings","m","daysUntilExpiry","isExpired","isExpiringSoon"],"mappings":"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"}