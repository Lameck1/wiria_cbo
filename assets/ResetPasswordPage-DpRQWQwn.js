import{j as e}from"./query-vendor-CM55eWOT.js";import{r,L as p}from"./react-vendor-CXp26_Hx.js";import{C as N,a as P}from"./Card-C-jJKiAv.js";import{B as d}from"./Button-JX_3oChN.js";import{I as i,d as f,A as w,n as t}from"./index-Ck6qqv4n.js";import"./animation-vendor-Bcu85ETC.js";function T(){const[a,l]=r.useState("request"),[m,j]=r.useState(""),[u,g]=r.useState(""),[n,y]=r.useState(""),[x,k]=r.useState(""),[h,o]=r.useState(!1),v=async s=>{s.preventDefault(),o(!0);try{await f.post(w.AUTH_RESET_PASSWORD_REQUEST,{email:m}),t.success("Password reset link sent to your email!"),l("confirm")}catch(c){t.error("Failed to send reset link. Please check your email and try again."),console.error("Reset request error:",c)}finally{o(!1)}},b=async s=>{if(s.preventDefault(),n!==x){t.error("Passwords do not match");return}if(n.length<8){t.error("Password must be at least 8 characters");return}o(!0);try{await f.post(w.AUTH_RESET_PASSWORD_CONFIRM,{token:u,newPassword:n}),t.success("Password reset successfully!"),l("success")}catch(c){t.error("Failed to reset password. Token may be invalid or expired."),console.error("Reset confirm error:",c)}finally{o(!1)}};return e.jsx("div",{className:"flex min-h-[70vh] items-center justify-center bg-gray-50 px-4 py-12",children:e.jsx("div",{className:"w-full max-w-md",children:e.jsx(N,{children:e.jsxs(P,{className:"p-8",children:[a==="request"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-8 text-center",children:[e.jsx("div",{className:"mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-wiria-yellow/10",children:e.jsx("svg",{className:"h-8 w-8 text-wiria-yellow",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})})}),e.jsx("h1",{className:"text-2xl font-bold text-wiria-blue-dark",children:"Reset Password"}),e.jsx("p",{className:"mt-2 text-gray-500",children:"Enter your email to receive a password reset link"})]}),e.jsxs("form",{onSubmit:v,className:"space-y-6",children:[e.jsx(i,{type:"email",label:"Email Address",value:m,onChange:s=>j(s.target.value),placeholder:"you@example.com",required:!0}),e.jsx(d,{type:"submit",fullWidth:!0,size:"lg",isLoading:h,children:"Send Reset Link"})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Already have a reset token?"," ",e.jsx("button",{onClick:()=>l("confirm"),className:"font-semibold text-wiria-blue-dark hover:text-wiria-yellow",children:"Enter token"})]})})]}),a==="confirm"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-8 text-center",children:[e.jsx("div",{className:"mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-green-100",children:e.jsx("svg",{className:"h-8 w-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("h1",{className:"text-2xl font-bold text-wiria-blue-dark",children:"Check Your Email"}),e.jsx("p",{className:"mt-2 text-gray-500",children:"Enter the token from your email and set a new password"})]}),e.jsxs("form",{onSubmit:b,className:"space-y-6",children:[e.jsx(i,{label:"Reset Token",value:u,onChange:s=>g(s.target.value),placeholder:"Enter token from email",required:!0}),e.jsx(i,{type:"password",label:"New Password",value:n,onChange:s=>y(s.target.value),placeholder:"••••••••",helperText:"Minimum 8 characters",required:!0}),e.jsx(i,{type:"password",label:"Confirm Password",value:x,onChange:s=>k(s.target.value),placeholder:"••••••••",required:!0}),e.jsx(d,{type:"submit",fullWidth:!0,size:"lg",isLoading:h,children:"Reset Password"})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx("button",{onClick:()=>l("request"),className:"text-sm text-gray-500 hover:text-wiria-blue-dark",children:"← Request new reset link"})})]}),a==="success"&&e.jsxs("div",{className:"py-6 text-center",children:[e.jsx("div",{className:"mx-auto mb-6 flex h-20 w-20 items-center justify-center rounded-full bg-green-100",children:e.jsx("svg",{className:"h-10 w-10 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsx("h1",{className:"mb-2 text-2xl font-bold text-green-800",children:"Password Reset!"}),e.jsx("p",{className:"mb-6 text-gray-600",children:"Your password has been successfully reset. You can now login with your new password."}),e.jsx(p,{to:"/member-login",children:e.jsx(d,{fullWidth:!0,size:"lg",children:"Login to Member Portal"})})]}),a!=="success"&&e.jsx("div",{className:"mt-8 border-t border-gray-100 pt-6 text-center",children:e.jsxs(p,{to:"/member-login",className:"inline-flex items-center gap-2 text-sm text-gray-500 hover:text-wiria-blue-dark",children:[e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to Login"]})})]})})})})}export{T as default};
//# sourceMappingURL=ResetPasswordPage-DpRQWQwn.js.map
