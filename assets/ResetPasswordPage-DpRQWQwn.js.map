{"version":3,"file":"ResetPasswordPage-DpRQWQwn.js","sources":["../../src/pages/ResetPasswordPage.tsx"],"sourcesContent":["/**\n * Reset Password Page\n * Password reset request and confirmation\n */\n\nimport { useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { Card, CardBody } from '@/shared/components/ui/Card';\nimport { Button } from '@/shared/components/ui/Button';\nimport { Input } from '@/shared/components/ui/Input';\nimport { apiClient } from '@/shared/services/api/client';\nimport { API_ENDPOINTS } from '@/shared/services/api/endpoints';\nimport { notificationService } from '@/shared/services/notification/notificationService';\n\ntype Step = 'request' | 'confirm' | 'success';\n\nfunction ResetPasswordPage() {\n  const [step, setStep] = useState<Step>('request');\n  const [email, setEmail] = useState('');\n  const [token, setToken] = useState('');\n  const [newPassword, setNewPassword] = useState('');\n  const [confirmPassword, setConfirmPassword] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n\n  const handleRequestReset = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setIsLoading(true);\n\n    try {\n      await apiClient.post(API_ENDPOINTS.AUTH_RESET_PASSWORD_REQUEST, { email });\n      notificationService.success('Password reset link sent to your email!');\n      setStep('confirm');\n    } catch (err) {\n      notificationService.error(\n        'Failed to send reset link. Please check your email and try again.'\n      );\n      console.error('Reset request error:', err);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleConfirmReset = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (newPassword !== confirmPassword) {\n      notificationService.error('Passwords do not match');\n      return;\n    }\n\n    if (newPassword.length < 8) {\n      notificationService.error('Password must be at least 8 characters');\n      return;\n    }\n\n    setIsLoading(true);\n\n    try {\n      await apiClient.post(API_ENDPOINTS.AUTH_RESET_PASSWORD_CONFIRM, {\n        token,\n        newPassword,\n      });\n      notificationService.success('Password reset successfully!');\n      setStep('success');\n    } catch (err) {\n      notificationService.error('Failed to reset password. Token may be invalid or expired.');\n      console.error('Reset confirm error:', err);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"flex min-h-[70vh] items-center justify-center bg-gray-50 px-4 py-12\">\n      <div className=\"w-full max-w-md\">\n        <Card>\n          <CardBody className=\"p-8\">\n            {/* Request Step */}\n            {step === 'request' && (\n              <>\n                <div className=\"mb-8 text-center\">\n                  <div className=\"mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-wiria-yellow/10\">\n                    <svg\n                      className=\"h-8 w-8 text-wiria-yellow\"\n                      fill=\"none\"\n                      stroke=\"currentColor\"\n                      viewBox=\"0 0 24 24\"\n                    >\n                      <path\n                        strokeLinecap=\"round\"\n                        strokeLinejoin=\"round\"\n                        strokeWidth={2}\n                        d=\"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z\"\n                      />\n                    </svg>\n                  </div>\n                  <h1 className=\"text-2xl font-bold text-wiria-blue-dark\">Reset Password</h1>\n                  <p className=\"mt-2 text-gray-500\">Enter your email to receive a password reset link</p>\n                </div>\n\n                <form onSubmit={handleRequestReset} className=\"space-y-6\">\n                  <Input\n                    type=\"email\"\n                    label=\"Email Address\"\n                    value={email}\n                    onChange={(e) => setEmail(e.target.value)}\n                    placeholder=\"you@example.com\"\n                    required\n                  />\n\n                  <Button type=\"submit\" fullWidth size=\"lg\" isLoading={isLoading}>\n                    Send Reset Link\n                  </Button>\n                </form>\n\n                <div className=\"mt-6 text-center\">\n                  <p className=\"text-sm text-gray-600\">\n                    Already have a reset token?{' '}\n                    <button\n                      onClick={() => setStep('confirm')}\n                      className=\"font-semibold text-wiria-blue-dark hover:text-wiria-yellow\"\n                    >\n                      Enter token\n                    </button>\n                  </p>\n                </div>\n              </>\n            )}\n\n            {/* Confirm Step */}\n            {step === 'confirm' && (\n              <>\n                <div className=\"mb-8 text-center\">\n                  <div className=\"mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-green-100\">\n                    <svg\n                      className=\"h-8 w-8 text-green-600\"\n                      fill=\"none\"\n                      stroke=\"currentColor\"\n                      viewBox=\"0 0 24 24\"\n                    >\n                      <path\n                        strokeLinecap=\"round\"\n                        strokeLinejoin=\"round\"\n                        strokeWidth={2}\n                        d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\"\n                      />\n                    </svg>\n                  </div>\n                  <h1 className=\"text-2xl font-bold text-wiria-blue-dark\">Check Your Email</h1>\n                  <p className=\"mt-2 text-gray-500\">Enter the token from your email and set a new password</p>\n                </div>\n\n                <form onSubmit={handleConfirmReset} className=\"space-y-6\">\n                  <Input\n                    label=\"Reset Token\"\n                    value={token}\n                    onChange={(e) => setToken(e.target.value)}\n                    placeholder=\"Enter token from email\"\n                    required\n                  />\n\n                  <Input\n                    type=\"password\"\n                    label=\"New Password\"\n                    value={newPassword}\n                    onChange={(e) => setNewPassword(e.target.value)}\n                    placeholder=\"••••••••\"\n                    helperText=\"Minimum 8 characters\"\n                    required\n                  />\n\n                  <Input\n                    type=\"password\"\n                    label=\"Confirm Password\"\n                    value={confirmPassword}\n                    onChange={(e) => setConfirmPassword(e.target.value)}\n                    placeholder=\"••••••••\"\n                    required\n                  />\n\n                  <Button type=\"submit\" fullWidth size=\"lg\" isLoading={isLoading}>\n                    Reset Password\n                  </Button>\n                </form>\n\n                <div className=\"mt-6 text-center\">\n                  <button\n                    onClick={() => setStep('request')}\n                    className=\"text-sm text-gray-500 hover:text-wiria-blue-dark\"\n                  >\n                    ← Request new reset link\n                  </button>\n                </div>\n              </>\n            )}\n\n            {/* Success Step */}\n            {step === 'success' && (\n              <div className=\"py-6 text-center\">\n                <div className=\"mx-auto mb-6 flex h-20 w-20 items-center justify-center rounded-full bg-green-100\">\n                  <svg\n                    className=\"h-10 w-10 text-green-600\"\n                    fill=\"none\"\n                    stroke=\"currentColor\"\n                    viewBox=\"0 0 24 24\"\n                  >\n                    <path\n                      strokeLinecap=\"round\"\n                      strokeLinejoin=\"round\"\n                      strokeWidth={2}\n                      d=\"M5 13l4 4L19 7\"\n                    />\n                  </svg>\n                </div>\n                <h1 className=\"mb-2 text-2xl font-bold text-green-800\">Password Reset!</h1>\n                <p className=\"mb-6 text-gray-600\">\n                  Your password has been successfully reset. You can now login with your new password.\n                </p>\n                <Link to=\"/member-login\">\n                  <Button fullWidth size=\"lg\">\n                    Login to Member Portal\n                  </Button>\n                </Link>\n              </div>\n            )}\n\n            {/* Back to Login */}\n            {step !== 'success' && (\n              <div className=\"mt-8 border-t border-gray-100 pt-6 text-center\">\n                <Link\n                  to=\"/member-login\"\n                  className=\"inline-flex items-center gap-2 text-sm text-gray-500 hover:text-wiria-blue-dark\"\n                >\n                  <svg className=\"h-4 w-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path\n                      strokeLinecap=\"round\"\n                      strokeLinejoin=\"round\"\n                      strokeWidth={2}\n                      d=\"M10 19l-7-7m0 0l7-7m-7 7h18\"\n                    />\n                  </svg>\n                  Back to Login\n                </Link>\n              </div>\n            )}\n          </CardBody>\n        </Card>\n      </div>\n    </div>\n  );\n}\n\nexport default ResetPasswordPage;\n"],"names":["ResetPasswordPage","step","setStep","useState","email","setEmail","token","setToken","newPassword","setNewPassword","confirmPassword","setConfirmPassword","isLoading","setIsLoading","handleRequestReset","e","apiClient","API_ENDPOINTS","notificationService","err","handleConfirmReset","jsx","Card","jsxs","CardBody","Fragment","Input","Button","Link"],"mappings":"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"}