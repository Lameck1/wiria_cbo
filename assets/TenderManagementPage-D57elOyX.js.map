{"version":3,"file":"TenderManagementPage-D57elOyX.js","sources":["../../src/features/admin/api/tenders.api.ts","../../src/pages/admin/TenderManagementPage.tsx"],"sourcesContent":["import { apiClient as client } from '@/shared/services/api/client';\n\nexport interface Tender {\n    id: string;\n    refNo: string;\n    title: string;\n    category: string;\n    deadline: string;\n    status: 'OPEN' | 'CLOSED' | 'AWARDED' | 'CANCELLED';\n    estimatedValue?: string;\n    submissionMethod: 'ONLINE' | 'PHYSICAL' | 'BOTH';\n    submissionEmail: string;\n    contactPerson: string;\n    contactPhone: string;\n    downloadUrl?: string;\n    description: string;\n    eligibility: string[];\n    requiredDocuments: string[];\n    createdAt: string;\n}\n\nexport interface CreateTenderPayload {\n    refNo: string;\n    title: string;\n    category: string;\n    deadline: string;\n    status: string;\n    estimatedValue?: string;\n    submissionMethod: string;\n    submissionEmail: string;\n    contactPerson: string;\n    contactPhone: string;\n    downloadUrl?: string;\n    description: string;\n    eligibility: string[];\n    requiredDocuments: string[];\n}\n\nexport const getTenders = async (options: { status?: string, category?: string, all?: boolean } = {}) => {\n    const params = new URLSearchParams();\n    if (options.status) params.append('status', options.status);\n    if (options.category) params.append('category', options.category);\n    if (options.all) params.append('all', 'true');\n\n    const queryString = params.toString();\n    const url = `/tenders${queryString ? `?${queryString}` : ''}`;\n\n    return client.get<{ data: Tender[] }>(url);\n};\n\nexport const createTender = async (data: CreateTenderPayload) => {\n    return client.post<Tender>('/tenders', data);\n};\n\nexport const updateTender = async (id: string, data: Partial<CreateTenderPayload>) => {\n    return client.patch<Tender>(`/tenders/${id}`, data);\n};\n\nexport const deleteTender = async (id: string) => {\n    return client.delete(`/tenders/${id}`);\n};\n","import { useEffect, useState } from 'react';\nimport { useQueryClient } from '@tanstack/react-query';\nimport { Tender, getTenders, createTender, updateTender, deleteTender } from '@/features/admin/api/tenders.api';\nimport { uploadFile } from '@/features/admin/api/resources.api'; // Reuse upload\nimport { Button } from '@/shared/components/ui/Button';\nimport { notificationService } from '@/shared/services/notification/notificationService';\nimport { extractArray, getErrorMessage } from '@/shared/utils/apiUtils';\n\nexport default function TenderManagementPage() {\n    const queryClient = useQueryClient();\n    const [tenders, setTenders] = useState<Tender[]>([]);\n    const [isLoading, setIsLoading] = useState(true);\n    const [editingTender, setEditingTender] = useState<Tender | null>(null);\n    const [showModal, setShowModal] = useState(false);\n\n    const loadTenders = async () => {\n        setIsLoading(true);\n        try {\n            const response = await getTenders({ all: true });\n            setTenders(extractArray<Tender>(response));\n        } catch (error) {\n            console.error(error);\n            notificationService.error('Failed to load tenders');\n        } finally {\n            setIsLoading(false);\n        }\n    };\n\n    useEffect(() => {\n        loadTenders();\n    }, []);\n\n    const handleDelete = async (id: string) => {\n        if (!confirm('Are you sure you want to delete this tender?')) return;\n        try {\n            await deleteTender(id);\n            notificationService.success('Tender deleted successfully');\n            // Invalidate React Query cache so resources page updates\n            queryClient.invalidateQueries({ queryKey: ['tenders'] });\n            loadTenders();\n        } catch (_error) {\n            notificationService.error('Failed to delete tender');\n        }\n    };\n\n    return (\n        <div>\n            <div className=\"flex justify-between items-center mb-6\">\n                <h2 className=\"text-2xl font-bold text-wiria-blue-dark\">Tender Management</h2>\n                <Button onClick={() => { setEditingTender(null); setShowModal(true); }}>\n                    + Advertise New Tender\n                </Button>\n            </div>\n\n            <div className=\"bg-white rounded-xl shadow overflow-hidden\">\n                {isLoading ? (\n                    <div className=\"p-8 text-center\">Loading...</div>\n                ) : (\n                    <table className=\"w-full text-left border-collapse\">\n                        <thead className=\"bg-gray-50 border-b\">\n                            <tr>\n                                <th className=\"px-6 py-4\">Ref No</th>\n                                <th className=\"px-6 py-4\">Title</th>\n                                <th className=\"px-6 py-4\">Deadline</th>\n                                <th className=\"px-6 py-4\">Document</th>\n                                <th className=\"px-6 py-4\">Status</th>\n                                <th className=\"px-6 py-4 text-right\">Actions</th>\n                            </tr>\n                        </thead>\n                        <tbody className=\"divide-y\">\n                            {tenders.map(tender => (\n                                <tr key={tender.id} className=\"hover:bg-gray-50\">\n                                    <td className=\"px-6 py-4 font-mono text-sm\">{tender.refNo}</td>\n                                    <td className=\"px-6 py-4 font-semibold\">{tender.title}</td>\n                                    <td className=\"px-6 py-4 text-sm\">{new Date(tender.deadline).toLocaleDateString()}</td>\n                                    <td className=\"px-6 py-4\">\n                                        {tender.downloadUrl ? (\n                                            <span className=\"inline-flex items-center gap-1 text-xs font-semibold px-2 py-1 rounded bg-green-100 text-green-700\">\n                                                ✓ Uploaded\n                                            </span>\n                                        ) : (\n                                            <span className=\"inline-flex items-center gap-1 text-xs font-semibold px-2 py-1 rounded bg-yellow-100 text-yellow-700\">\n                                                ⚠ Missing\n                                            </span>\n                                        )}\n                                    </td>\n                                    <td className=\"px-6 py-4\">\n                                        <TenderStatusBadge tender={tender} />\n                                    </td>\n                                    <td className=\"px-6 py-4 text-right\">\n                                        <button onClick={() => { setEditingTender(tender); setShowModal(true); }} className=\"text-wiria-blue-dark hover:underline text-sm font-bold mr-3\">Edit</button>\n                                        <button onClick={() => handleDelete(tender.id)} className=\"text-red-600 hover:underline text-sm font-bold\">Delete</button>\n                                    </td>\n                                </tr>\n                            ))}\n                            {tenders.length === 0 && (\n                                <tr><td colSpan={6} className=\"px-6 py-8 text-center text-gray-500\">No tenders advertised yet.</td></tr>\n                            )}\n                        </tbody>\n                    </table>\n                )}\n            </div>\n\n            {showModal && (\n                <TenderModal\n                    tender={editingTender}\n                    onClose={() => setShowModal(false)}\n                    onSuccess={() => { setShowModal(false); loadTenders(); }}\n                />\n            )}\n        </div>\n    );\n}\n\nfunction TenderStatusBadge({ tender }: { tender: Tender }) {\n    const isExpired = tender.status === 'OPEN' && new Date(tender.deadline) < new Date();\n    const status = isExpired ? 'EXPIRED' : tender.status;\n\n    const styles: Record<string, string> = {\n        OPEN: 'bg-green-100 text-green-700',\n        CLOSED: 'bg-red-100 text-red-700',\n        AWARDED: 'bg-blue-100 text-blue-700',\n        CANCELLED: 'bg-gray-100 text-gray-700',\n        EXPIRED: 'bg-yellow-100 text-yellow-700',\n    };\n    return <span className={`px-2 py-1 rounded-full text-xs font-bold ${styles[status] || 'bg-gray-100'}`}>{status}</span>;\n}\n\nfunction TenderModal({ tender, onClose, onSuccess }: { tender: Tender | null; onClose: () => void; onSuccess: () => void }) {\n    const queryClient = useQueryClient();\n    const [eligibility, setEligibility] = useState<string[]>(tender?.eligibility || ['Legal registration in Kenya', 'Tax compliance']);\n    const [docs, setDocs] = useState<string[]>(tender?.requiredDocuments || ['Certificate of Incorporation', 'KRA PIN/Tax Compliance']);\n    const [isSubmitting, setIsSubmitting] = useState(false);\n\n    const handleArrayChange = (setter: React.Dispatch<React.SetStateAction<string[]>>, index: number, value: string) => {\n        setter(prev => {\n            const newArr = [...prev];\n            newArr[index] = value;\n            return newArr;\n        });\n    };\n\n    const addArrayItem = (setter: React.Dispatch<React.SetStateAction<string[]>>) => setter(prev => [...prev, '']);\n    const removeArrayItem = (setter: React.Dispatch<React.SetStateAction<string[]>>, index: number) => setter(prev => prev.filter((_, i) => i !== index));\n\n    const handleSubmit = async (e: React.FormEvent<HTMLFormElement>) => {\n        e.preventDefault();\n        setIsSubmitting(true);\n        const form = e.currentTarget;\n        const formData = new FormData(form);\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const rawData: any = Object.fromEntries(formData.entries());\n\n        const fileInput = form.querySelector('#tender-file-input') as HTMLInputElement;\n        let downloadUrl = rawData.downloadUrl;\n\n        try {\n            if (fileInput?.files?.length) {\n                notificationService.info('Uploading document...');\n                const file = fileInput.files[0];\n                if (file) {\n                    const uploadRes = await uploadFile(file, 'tenders');\n                    downloadUrl = uploadRes.data.url;\n                }\n            }\n\n            const data = {\n                title: rawData.title,\n                refNo: rawData.refNo,\n                category: rawData.category,\n                estimatedValue: rawData.estimatedValue,\n                deadline: new Date(rawData.deadline).toISOString(),\n                status: rawData.status,\n                submissionMethod: rawData.submissionMethod,\n                submissionEmail: rawData.submissionEmail,\n                contactPerson: rawData.contactPerson,\n                contactPhone: rawData.contactPhone,\n                description: rawData.description,\n                eligibility: eligibility.filter(i => i.trim()),\n                requiredDocuments: docs.filter(i => i.trim()),\n                downloadUrl\n            };\n\n            if (tender) {\n                await updateTender(tender.id, data);\n                notificationService.success('Tender updated');\n            } else {\n                await createTender(data);\n                notificationService.success('Tender advertised');\n            }\n            // Invalidate React Query cache so resources page updates\n            queryClient.invalidateQueries({ queryKey: ['tenders'] });\n            onSuccess();\n        } catch (error: unknown) {\n            notificationService.error(getErrorMessage(error, 'Operation failed'));\n        } finally {\n            setIsSubmitting(false);\n        }\n    };\n\n    return (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60] p-4\">\n            <div className=\"bg-white rounded-2xl shadow-2xl w-full max-w-5xl max-h-[90vh] flex flex-col\">\n                <div className=\"p-8 pb-4 border-b\">\n                    <h3 className=\"text-2xl font-bold\">{tender ? 'Edit Tender' : 'Advertise New Tender'}</h3>\n                </div>\n                <div className=\"p-8 pt-4 overflow-y-auto flex-1\">\n                    <form onSubmit={handleSubmit} className=\"space-y-6\">\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                            <div className=\"space-y-4\">\n                                <h4 className=\"font-bold text-wiria-blue-dark border-b pb-1\">Basic Information</h4>\n                                <div>\n                                    <label className=\"block text-sm font-bold mb-1\" htmlFor=\"tender-title\">Tender Title *</label>\n                                    <input id=\"tender-title\" name=\"title\" defaultValue={tender?.title} className=\"w-full border rounded-lg p-2.5\" required />\n                                </div>\n                                <div className=\"grid grid-cols-2 gap-3\">\n                                    <div>\n                                        <label className=\"block text-sm font-bold mb-1\" htmlFor=\"tender-refNo\">Reference No *</label>\n                                        <input id=\"tender-refNo\" name=\"refNo\" defaultValue={tender?.refNo} className=\"w-full border rounded-lg p-2.5\" required placeholder=\"WIRIA/2025/...\" />\n                                    </div>\n                                    <div>\n                                        <label className=\"block text-sm font-bold mb-1\" htmlFor=\"tender-category\">Category *</label>\n                                        <input id=\"tender-category\" name=\"category\" defaultValue={tender?.category} className=\"w-full border rounded-lg p-2.5\" required />\n                                    </div>\n                                </div>\n                                <div className=\"grid grid-cols-2 gap-3\">\n                                    <div>\n                                        <label className=\"block text-sm font-bold mb-1\" htmlFor=\"tender-deadline\">Deadline *</label>\n                                        <input id=\"tender-deadline\" type=\"datetime-local\" name=\"deadline\" defaultValue={tender?.deadline ? new Date(tender.deadline).toISOString().slice(0, 16) : ''} className=\"w-full border rounded-lg p-2.5\" required />\n                                    </div>\n                                    <div>\n                                        <label className=\"block text-sm font-bold mb-1\" htmlFor=\"tender-estimatedValue\">Est. Value</label>\n                                        <input id=\"tender-estimatedValue\" name=\"estimatedValue\" defaultValue={tender?.estimatedValue} className=\"w-full border rounded-lg p-2.5\" />\n                                    </div>\n                                </div>\n                                <div>\n                                    <label className=\"block text-sm font-bold mb-1\" htmlFor=\"tender-status\">Status</label>\n                                    <select id=\"tender-status\" name=\"status\" defaultValue={tender?.status || 'OPEN'} className=\"w-full border rounded-lg p-2.5\">\n                                        <option value=\"OPEN\">Open</option>\n                                        <option value=\"CLOSED\">Closed</option>\n                                        <option value=\"AWARDED\">Awarded</option>\n                                        <option value=\"CANCELLED\">Cancelled</option>\n                                    </select>\n                                </div>\n                            </div>\n\n                            <div className=\"space-y-4\">\n                                <h4 className=\"font-bold text-wiria-blue-dark border-b pb-1\">Submission & Contact</h4>\n                                <div>\n                                    <label className=\"block text-sm font-bold mb-1\" htmlFor=\"tender-submissionMethod\">Submission Method *</label>\n                                    <select id=\"tender-submissionMethod\" name=\"submissionMethod\" defaultValue={tender?.submissionMethod || 'ONLINE'} className=\"w-full border rounded-lg p-2.5\">\n                                        <option value=\"ONLINE\">Online (Email)</option>\n                                        <option value=\"PHYSICAL\">Physical (Seal Box)</option>\n                                        <option value=\"BOTH\">Both</option>\n                                    </select>\n                                </div>\n                                <div>\n                                    <label className=\"block text-sm font-bold mb-1\" htmlFor=\"tender-submissionEmail\">Submission Email *</label>\n                                    <input id=\"tender-submissionEmail\" type=\"email\" name=\"submissionEmail\" defaultValue={tender?.submissionEmail || 'tenders@wiria.org'} className=\"w-full border rounded-lg p-2.5\" required />\n                                </div>\n                                <div className=\"grid grid-cols-2 gap-3\">\n                                    <div>\n                                        <label className=\"block text-sm font-bold mb-1\" htmlFor=\"tender-contactPerson\">Contact Person *</label>\n                                        <input id=\"tender-contactPerson\" name=\"contactPerson\" defaultValue={tender?.contactPerson} className=\"w-full border rounded-lg p-2.5\" required />\n                                    </div>\n                                    <div>\n                                        <label className=\"block text-sm font-bold mb-1\" htmlFor=\"tender-contactPhone\">Contact Phone *</label>\n                                        <input id=\"tender-contactPhone\" name=\"contactPhone\" defaultValue={tender?.contactPhone} className=\"w-full border rounded-lg p-2.5\" required />\n                                    </div>\n                                </div>\n                                <div>\n                                    <label className=\"block text-sm font-bold mb-1\" htmlFor=\"tender-file-input\">Tender Document (PDF)</label>\n                                    <input type=\"file\" id=\"tender-file-input\" className=\"w-full border rounded-lg p-2 text-sm\" accept=\".pdf,.doc,.docx\" />\n                                    <input type=\"hidden\" name=\"downloadUrl\" defaultValue={tender?.downloadUrl} />\n                                </div>\n                            </div>\n                        </div>\n\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                            <div>\n                                <label className=\"block text-sm font-bold mb-2\">Eligibility Criteria</label>\n                                {eligibility.map((item, i) => (\n                                    <div key={i} className=\"flex gap-2 mb-2\">\n                                        <input aria-label={`Eligibility criteria ${i + 1}`} value={item} onChange={e => handleArrayChange(setEligibility, i, e.target.value)} className=\"flex-1 border rounded-lg p-2 text-sm\" required />\n                                        <button type=\"button\" onClick={() => removeArrayItem(setEligibility, i)} className=\"text-red-500\">✕</button>\n                                    </div>\n                                ))}\n                                <button type=\"button\" onClick={() => addArrayItem(setEligibility)} className=\"text-xs text-blue-600 font-bold\">+ Add Criteria</button>\n                            </div>\n                            <div>\n                                <label className=\"block text-sm font-bold mb-2\">Required Documents</label>\n                                {docs.map((item, i) => (\n                                    <div key={i} className=\"flex gap-2 mb-2\">\n                                        <input aria-label={`Required document ${i + 1}`} value={item} onChange={e => handleArrayChange(setDocs, i, e.target.value)} className=\"flex-1 border rounded-lg p-2 text-sm\" required />\n                                        <button type=\"button\" onClick={() => removeArrayItem(setDocs, i)} className=\"text-red-500\">✕</button>\n                                    </div>\n                                ))}\n                                <button type=\"button\" onClick={() => addArrayItem(setDocs)} className=\"text-xs text-blue-600 font-bold\">+ Add Document</button>\n                            </div>\n                        </div>\n\n                        <div>\n                            <label className=\"block text-sm font-bold mb-1\" htmlFor=\"tender-description\">Full Description *</label>\n                            <textarea id=\"tender-description\" name=\"description\" defaultValue={tender?.description} className=\"w-full border rounded-lg p-3 h-24 text-sm\" required />\n                        </div>\n\n                        <div className=\"flex gap-4 pt-4\">\n                            <Button type=\"submit\" fullWidth disabled={isSubmitting}>{isSubmitting ? 'Saving...' : (tender ? 'Update Tender' : 'Advertise Tender')}</Button>\n                            <Button type=\"button\" variant=\"secondary\" fullWidth onClick={onClose} disabled={isSubmitting}>Cancel</Button>\n                        </div>\n                    </form>\n                </div>\n            </div>\n        </div>\n    );\n}\n"],"names":["getTenders","options","params","queryString","url","client","createTender","data","updateTender","id","deleteTender","TenderManagementPage","queryClient","useQueryClient","tenders","setTenders","useState","isLoading","setIsLoading","editingTender","setEditingTender","showModal","setShowModal","loadTenders","response","extractArray","error","notificationService","useEffect","handleDelete","jsxs","jsx","Button","tender","TenderStatusBadge","TenderModal","status","styles","onClose","onSuccess","eligibility","setEligibility","docs","setDocs","isSubmitting","setIsSubmitting","handleArrayChange","setter","index","value","prev","newArr","addArrayItem","removeArrayItem","_","i","handleSubmit","e","form","formData","rawData","fileInput","downloadUrl","_a","file","uploadFile","getErrorMessage","item"],"mappings":"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"}