{"version":3,"file":"FormModal-t6sCIWsd.js","sources":["../../src/shared/components/modals/FormModal.tsx"],"sourcesContent":["import type { ReactNode } from 'react';\n\nimport { Button } from '@/shared/components/ui/Button';\nimport { Input } from '@/shared/components/ui/Input';\nimport { Modal } from '@/shared/components/ui/Modal';\nimport { Select } from '@/shared/components/ui/Select';\nimport { Textarea } from '@/shared/components/ui/Textarea';\n\ntype FieldType =\n  | 'text'\n  | 'email'\n  | 'password'\n  | 'number'\n  | 'date'\n  | 'textarea'\n  | 'select'\n  | 'file';\n\ninterface SelectOption {\n  label: string;\n  value: string;\n}\n\nexport interface FormField<T = unknown> {\n  name: keyof T;\n  label: string;\n  type: FieldType;\n  placeholder?: string;\n  required?: boolean;\n  options?: SelectOption[]; // For select fields\n  accept?: string; // For file fields\n  rows?: number; // For textarea fields\n  min?: number; // For number/date fields\n  max?: number; // For number/date fields\n  disabled?: boolean;\n  defaultValue?: unknown;\n}\n\n// Type alias for backwards compatibility\nexport type FieldConfig = FormField<Record<string, unknown>>;\n\nexport interface FormModalProps<T extends Record<string, unknown>> {\n  isOpen: boolean;\n  onClose: () => void;\n  onSubmit: (data: T) => void | Promise<void>;\n  title: string;\n  fields: FormField<T>[];\n  initialData?: Partial<T>;\n  isSubmitting?: boolean;\n  submitLabel?: string;\n  cancelLabel?: string;\n  children?: ReactNode; // For custom fields\n}\n\nexport function FormModal<T extends Record<string, unknown>>({\n  isOpen,\n  onClose,\n  onSubmit,\n  title,\n  fields,\n  initialData = {},\n  isSubmitting = false,\n  submitLabel = 'Save',\n  cancelLabel = 'Cancel',\n  children,\n}: FormModalProps<T>) {\n  const handleSubmit = async (event: React.FormEvent<HTMLFormElement>) => {\n    event.preventDefault();\n    const formData = new FormData(event.currentTarget);\n    const data: Record<string, unknown> = {};\n\n    fields.forEach((field) => {\n      const value = formData.get(field.name as string);\n      if (field.type === 'number') {\n        data[field.name as string] = value ? Number(value) : undefined;\n      } else if (field.type === 'file') {\n        data[field.name as string] = value;\n      } else {\n        data[field.name as string] = value;\n      }\n    });\n\n    await onSubmit(data as T);\n  };\n\n  const renderField = (field: FormField<T>) => {\n    const commonProps = {\n      name: field.name as string,\n      id: field.name as string,\n      required: field.required,\n      disabled: isSubmitting || field.disabled,\n      placeholder: field.placeholder,\n      defaultValue: initialData[field.name] as string | number | undefined,\n    };\n\n    switch (field.type) {\n      case 'textarea': {\n        return <Textarea {...commonProps} rows={field.rows ?? 4} />;\n      }\n\n      case 'select': {\n        return (\n          <Select {...commonProps}>\n            <option value=\"\">Select {field.label}</option>\n            {field.options?.map((option) => (\n              <option key={option.value} value={option.value}>\n                {option.label}\n              </option>\n            ))}\n          </Select>\n        );\n      }\n\n      case 'file': {\n        return (\n          <Input\n            {...commonProps}\n            type=\"file\"\n            accept={field.accept}\n            defaultValue={undefined} // Files can't have defaultValue\n          />\n        );\n      }\n\n      case 'number':\n      case 'date': {\n        return <Input {...commonProps} type={field.type} min={field.min} max={field.max} />;\n      }\n\n      default: {\n        return <Input {...commonProps} type={field.type} />;\n      }\n    }\n  };\n\n  return (\n    <Modal isOpen={isOpen} onClose={onClose} title={title}>\n      <form onSubmit={(event) => void handleSubmit(event)} className=\"space-y-4\">\n        {fields.map((field) => (\n          <div key={field.name as string}>\n            <label\n              htmlFor={field.name as string}\n              className=\"mb-1 block text-sm font-medium text-gray-700\"\n            >\n              {field.label}\n              {field.required && <span className=\"ml-1 text-red-500\">*</span>}\n            </label>\n            {renderField(field)}\n          </div>\n        ))}\n\n        {children}\n\n        <div className=\"flex justify-end gap-3 pt-4\">\n          <Button type=\"button\" variant=\"outline\" onClick={onClose} disabled={isSubmitting}>\n            {cancelLabel}\n          </Button>\n          <Button type=\"submit\" disabled={isSubmitting} isLoading={isSubmitting}>\n            {isSubmitting ? 'Submitting...' : submitLabel}\n          </Button>\n        </div>\n      </form>\n    </Modal>\n  );\n}\n"],"names":["FormModal","isOpen","onClose","onSubmit","title","fields","initialData","isSubmitting","submitLabel","cancelLabel","children","handleSubmit","event","formData","data","field","value","renderField","commonProps","Textarea","jsxs","Select","_a","option","jsx","Input","Modal","Button"],"mappings":"4PAsDO,SAASA,EAA6C,CAC3D,OAAAC,EACA,QAAAC,EACA,SAAAC,EACA,MAAAC,EACA,OAAAC,EACA,YAAAC,EAAc,CAAA,EACd,aAAAC,EAAe,GACf,YAAAC,EAAc,OACd,YAAAC,EAAc,SACd,SAAAC,CACF,EAAsB,CACpB,MAAMC,EAAe,MAAOC,GAA4C,CACtEA,EAAM,eAAA,EACN,MAAMC,EAAW,IAAI,SAASD,EAAM,aAAa,EAC3CE,EAAgC,CAAA,EAEtCT,EAAO,QAASU,GAAU,CACxB,MAAMC,EAAQH,EAAS,IAAIE,EAAM,IAAc,EAC3CA,EAAM,OAAS,SACjBD,EAAKC,EAAM,IAAc,EAAIC,EAAQ,OAAOA,CAAK,EAAI,QAC5CD,EAAM,KACfD,EAAKC,EAAM,IAAc,EAAIC,EAIjC,CAAC,EAED,MAAMb,EAASW,CAAS,CAC1B,EAEMG,EAAeF,GAAwB,OAC3C,MAAMG,EAAc,CAClB,KAAMH,EAAM,KACZ,GAAIA,EAAM,KACV,SAAUA,EAAM,SAChB,SAAUR,GAAgBQ,EAAM,SAChC,YAAaA,EAAM,YACnB,aAAcT,EAAYS,EAAM,IAAI,CAAA,EAGtC,OAAQA,EAAM,KAAA,CACZ,IAAK,WACH,aAAQI,EAAA,CAAU,GAAGD,EAAa,KAAMH,EAAM,MAAQ,EAAG,EAG3D,IAAK,SACH,OACEK,EAAAA,KAACC,EAAA,CAAQ,GAAGH,EACV,SAAA,CAAAE,EAAAA,KAAC,SAAA,CAAO,MAAM,GAAG,SAAA,CAAA,UAAQL,EAAM,KAAA,EAAM,GACpCO,EAAAP,EAAM,UAAN,YAAAO,EAAe,IAAKC,GACnBC,EAAAA,IAAC,SAAA,CAA0B,MAAOD,EAAO,MACtC,SAAAA,EAAO,KAAA,EADGA,EAAO,KAEpB,EACD,EACH,EAIJ,IAAK,OACH,OACEC,EAAAA,IAACC,EAAA,CACE,GAAGP,EACJ,KAAK,OACL,OAAQH,EAAM,OACd,aAAc,MAAA,CAAA,EAKpB,IAAK,SACL,IAAK,OACH,OAAOS,EAAAA,IAACC,EAAA,CAAO,GAAGP,EAAa,KAAMH,EAAM,KAAM,IAAKA,EAAM,IAAK,IAAKA,EAAM,GAAA,CAAK,EAGnF,QACE,aAAQU,EAAA,CAAO,GAAGP,EAAa,KAAMH,EAAM,KAAM,CACnD,CAEJ,EAEA,OACES,EAAAA,IAACE,EAAA,CAAM,OAAAzB,EAAgB,QAAAC,EAAkB,MAAAE,EACvC,SAAAgB,OAAC,OAAA,CAAK,SAAWR,GAAU,KAAKD,EAAaC,CAAK,EAAG,UAAU,YAC5D,SAAA,CAAAP,EAAO,IAAKU,GACXK,EAAAA,KAAC,MAAA,CACC,SAAA,CAAAA,EAAAA,KAAC,QAAA,CACC,QAASL,EAAM,KACf,UAAU,+CAET,SAAA,CAAAA,EAAM,MACNA,EAAM,UAAYS,EAAAA,IAAC,OAAA,CAAK,UAAU,oBAAoB,SAAA,GAAA,CAAC,CAAA,CAAA,CAAA,EAEzDP,EAAYF,CAAK,CAAA,GARVA,EAAM,IAShB,CACD,EAEAL,EAEDU,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAI,EAAAA,IAACG,EAAA,CAAO,KAAK,SAAS,QAAQ,UAAU,QAASzB,EAAS,SAAUK,EACjE,SAAAE,CAAA,CACH,EACAe,EAAAA,IAACG,EAAA,CAAO,KAAK,SAAS,SAAUpB,EAAc,UAAWA,EACtD,SAAAA,EAAe,gBAAkBC,CAAA,CACpC,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAEJ"}