{"version":3,"file":"validation-Dk4xCuuu.js","sources":["../../src/features/membership/validation.ts"],"sourcesContent":["/**\n * Registration Form Validation Schema\n */\n\nimport { z } from 'zod';\n\nimport { emailSchema, phoneSchema } from '@/shared/utils/validators';\n\nexport const registrationSchema = z\n  .object({\n    membershipType: z.enum(['INDIVIDUAL', 'GROUP']),\n    groupName: z.string().optional(),\n    memberCount: z.number().min(1).optional(),\n    firstName: z.string().min(2, 'First name must be at least 2 characters'),\n    lastName: z.string().min(2, 'Last name must be at least 2 characters'),\n    dateOfBirth: z.string().optional(),\n    gender: z\n      .enum(['MALE', 'FEMALE', 'OTHER'], {\n        required_error: 'Please select your gender',\n      })\n      .optional(),\n    nationalId: z.string().max(20, 'National ID must be at most 20 characters').optional(),\n    email: emailSchema,\n    phoneNumber: phoneSchema, // Use shared phone schema for consistency\n    county: z.string().min(1, 'County is required'),\n    subCounty: z.string().min(1, 'Sub-county is required'),\n    ward: z.string().min(1, 'Ward is required'),\n    village: z.string().min(1, 'Village is required'),\n    membershipFee: z.number().min(100, 'Minimum membership fee is KES 100'),\n    paymentMethod: z.enum(['STK_PUSH', 'MANUAL']),\n    agreedToTerms: z.boolean().refine((value) => value === true, {\n      message: 'You must agree to the terms and conditions',\n    }),\n    consentToDataProcessing: z.boolean().refine((value) => value === true, {\n      message: 'You must consent to data processing',\n    }),\n  })\n  .superRefine((data, context) => {\n    if (data.membershipType === 'GROUP') {\n      if (!data.groupName) {\n        context.addIssue({\n          code: z.ZodIssueCode.custom,\n          message: 'Group name is required for group membership',\n          path: ['groupName'],\n        });\n      }\n      if (!data.memberCount) {\n        context.addIssue({\n          code: z.ZodIssueCode.custom,\n          message: 'Member count is required for group membership',\n          path: ['memberCount'],\n        });\n      }\n    } else {\n      // Individual specific requirements\n      if (!data.dateOfBirth || data.dateOfBirth.length === 0) {\n        context.addIssue({\n          code: z.ZodIssueCode.custom,\n          message: 'Date of birth is required',\n          path: ['dateOfBirth'],\n        });\n      }\n      if (!data.gender) {\n        context.addIssue({\n          code: z.ZodIssueCode.custom,\n          message: 'Please select your gender',\n          path: ['gender'],\n        });\n      }\n      if (!data.nationalId || data.nationalId.length < 6) {\n        context.addIssue({\n          code: z.ZodIssueCode.custom,\n          message: 'National ID must be at least 6 characters',\n          path: ['nationalId'],\n        });\n      }\n    }\n  });\n\nexport const renewalSchema = z.object({\n  paymentMethod: z.enum(['STK_PUSH', 'MANUAL']),\n  phoneNumber: phoneSchema.optional(), // Use shared phone schema for consistency\n  transactionCode: z.string().optional(),\n  memberCount: z.number().min(1).optional(),\n  agreedToDataProtection: z.boolean().refine((value) => value === true, {\n    message: 'You must consent to data protection',\n  }),\n  agreedToCodeOfEthics: z.boolean().refine((value) => value === true, {\n    message: 'You must agree to the code of ethics',\n  }),\n});\n\nexport const profileSchema = z.object({\n  firstName: z.string().min(2, 'First name must be at least 2 characters'),\n  lastName: z.string().min(2, 'Last name must be at least 2 characters'),\n  phone: phoneSchema, // Use shared phone schema for consistency\n  occupation: z.string().optional(),\n  address: z.string().optional(),\n  county: z.string().optional(),\n  subcounty: z.string().optional(),\n  ward: z.string().optional(),\n  interests: z.array(z.string()).optional(),\n  skills: z.array(z.string()).optional(),\n});\n\nexport type ProfileFormSchema = z.infer<typeof profileSchema>;\nexport type RenewalFormSchema = z.infer<typeof renewalSchema>;\nexport type RegistrationFormSchema = z.infer<typeof registrationSchema>;\n"],"names":["registrationSchema","z.object","z.enum","z.string","z.number","emailSchema","phoneSchema","z.boolean","value","data","context","z.ZodIssueCode","renewalSchema","profileSchema","z.array"],"mappings":"sIAQO,MAAMA,EAAqBC,EACxB,CACN,eAAgBC,EAAO,CAAC,aAAc,OAAO,CAAC,EAC9C,UAAWC,EAAE,EAAS,SAAA,EACtB,YAAaC,EAAE,EAAS,IAAI,CAAC,EAAE,SAAA,EAC/B,UAAWD,EAAE,EAAS,IAAI,EAAG,0CAA0C,EACvE,SAAUA,EAAE,EAAS,IAAI,EAAG,yCAAyC,EACrE,YAAaA,EAAE,EAAS,SAAA,EACxB,OAAQD,EACA,CAAC,OAAQ,SAAU,OAAO,EAAG,CACjC,eAAgB,2BAAA,CACjB,EACA,SAAA,EACH,WAAYC,EAAE,EAAS,IAAI,GAAI,2CAA2C,EAAE,SAAA,EAC5E,MAAOE,EACP,YAAaC,EACb,OAAQH,EAAE,EAAS,IAAI,EAAG,oBAAoB,EAC9C,UAAWA,EAAE,EAAS,IAAI,EAAG,wBAAwB,EACrD,KAAMA,EAAE,EAAS,IAAI,EAAG,kBAAkB,EAC1C,QAASA,EAAE,EAAS,IAAI,EAAG,qBAAqB,EAChD,cAAeC,EAAE,EAAS,IAAI,IAAK,mCAAmC,EACtE,cAAeF,EAAO,CAAC,WAAY,QAAQ,CAAC,EAC5C,cAAeK,EAAE,EAAU,OAAQC,GAAUA,IAAU,GAAM,CAC3D,QAAS,4CAAA,CACV,EACD,wBAAyBD,EAAE,EAAU,OAAQC,GAAUA,IAAU,GAAM,CACrE,QAAS,qCAAA,CACV,CACH,CAAC,EACA,YAAY,CAACC,EAAMC,IAAY,CAC1BD,EAAK,iBAAmB,SACrBA,EAAK,WACRC,EAAQ,SAAS,CACf,KAAMC,EAAe,OACrB,QAAS,8CACT,KAAM,CAAC,WAAW,CAAA,CACnB,EAEEF,EAAK,aACRC,EAAQ,SAAS,CACf,KAAMC,EAAe,OACrB,QAAS,gDACT,KAAM,CAAC,aAAa,CAAA,CACrB,KAIC,CAACF,EAAK,aAAeA,EAAK,YAAY,SAAW,IACnDC,EAAQ,SAAS,CACf,KAAMC,EAAe,OACrB,QAAS,4BACT,KAAM,CAAC,aAAa,CAAA,CACrB,EAEEF,EAAK,QACRC,EAAQ,SAAS,CACf,KAAMC,EAAe,OACrB,QAAS,4BACT,KAAM,CAAC,QAAQ,CAAA,CAChB,GAEC,CAACF,EAAK,YAAcA,EAAK,WAAW,OAAS,IAC/CC,EAAQ,SAAS,CACf,KAAMC,EAAe,OACrB,QAAS,4CACT,KAAM,CAAC,YAAY,CAAA,CACpB,EAGP,CAAC,EAEUC,EAAgBX,EAAS,CACpC,cAAeC,EAAO,CAAC,WAAY,QAAQ,CAAC,EAC5C,YAAaI,EAAY,SAAA,EACzB,gBAAiBH,EAAE,EAAS,SAAA,EAC5B,YAAaC,EAAE,EAAS,IAAI,CAAC,EAAE,SAAA,EAC/B,uBAAwBG,EAAE,EAAU,OAAQC,GAAUA,IAAU,GAAM,CACpE,QAAS,qCAAA,CACV,EACD,qBAAsBD,EAAE,EAAU,OAAQC,GAAUA,IAAU,GAAM,CAClE,QAAS,sCAAA,CACV,CACH,CAAC,EAEYK,EAAgBZ,EAAS,CACpC,UAAWE,EAAE,EAAS,IAAI,EAAG,0CAA0C,EACvE,SAAUA,EAAE,EAAS,IAAI,EAAG,yCAAyC,EACrE,MAAOG,EACP,WAAYH,EAAE,EAAS,SAAA,EACvB,QAASA,EAAE,EAAS,SAAA,EACpB,OAAQA,EAAE,EAAS,SAAA,EACnB,UAAWA,EAAE,EAAS,SAAA,EACtB,KAAMA,EAAE,EAAS,SAAA,EACjB,UAAWW,EAAQX,EAAE,CAAQ,EAAE,SAAA,EAC/B,OAAQW,EAAQX,EAAE,CAAQ,EAAE,SAAA,CAC9B,CAAC"}