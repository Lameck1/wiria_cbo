import{j as e}from"./query-vendor-frBnvHSF.js";import{r as p,c as H}from"./react-vendor-BdaLayic.js";import{b as y,n as b}from"./index-ICA0O2oL.js";import{D}from"./DataTable-D2X_cuFs.js";import{S as v}from"./StatusBadge-DPX4J2hm.js";import{B as N}from"./Button-K8iFFe9S.js";import{F as J}from"./Form-CTmH-Wzc.js";import{F as Y}from"./FormSelectField-BPp2n8Yd.js";import{F as B}from"./FormTextareaField-DNkm6uru.js";import{M as _}from"./Modal-D8P6KMMh.js";import{o as z,s as W,e as K}from"./types-BwqQ6cFe.js";import{A as G}from"./AdminPageHeader-CmCPoIZw.js";import{C as R}from"./ConfirmDialog-BLp-gmhy.js";import{u as w,a as I}from"./useAdminData-B_72029o.js";import"./animation-vendor-CrU7SSpu.js";import"./helpers-Brneqz2V.js";import"./Select-xLPpYUY_.js";import"./Textarea-Bn66OGKX.js";import"./apiUtils-CDDJc0SC.js";const Q=async()=>y.get("/admin/careers"),X=async s=>y.post("/admin/careers",s),Z=async(s,l)=>y.patch(`/admin/careers/${s}`,l),ee=async s=>y.delete(`/admin/careers/${s}`),se=async()=>y.get("/admin/opportunities"),te=async s=>y.post("/admin/opportunities",s),ae=async(s,l)=>y.patch(`/admin/opportunities/${s}`,l),re=async s=>y.delete(`/admin/opportunities/${s}`),le=async()=>y.get("/admin/applications"),ne=async(s,l,a)=>y.patch(`/admin/applications/${s}/status`,{status:l,notes:a});function ie({applications:s,onReview:l}){const a=[{header:"Applicant",key:"applicant",render:r=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"font-bold text-gray-900",children:[r.firstName," ",r.lastName]}),e.jsx("div",{className:"text-xs text-gray-500",children:r.email})]})},{header:"Position",key:"position",render:r=>{var o,c;return e.jsx("span",{className:"font-medium text-gray-700",children:((o=r.career)==null?void 0:o.title)??((c=r.opportunity)==null?void 0:c.title)??"Unknown"})}},{header:"Applied Date",key:"createdAt",render:r=>e.jsx("span",{className:"text-gray-500",children:new Date(r.createdAt).toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})})},{header:"Status",key:"status",render:r=>e.jsx(v,{status:r.status})},{header:"Actions",key:"actions",align:"right",render:r=>e.jsx("button",{onClick:()=>l(r),className:"rounded-lg bg-wiria-blue-dark px-4 py-1.5 text-xs font-bold text-white shadow-sm transition-all hover:bg-blue-800",children:"Review"})}];return e.jsx("div",{className:"overflow-hidden rounded-2xl border border-gray-100 bg-white shadow-sm",children:e.jsx(D,{columns:a,data:s,rowKey:"id",emptyMessage:"No applications found in this category.",className:"rounded-none border-none shadow-none"})})}const oe=p.memo(function({careers:l,applications:a,onEdit:r,onDelete:o,onCreate:c}){const d=p.useMemo(()=>{const t={};return a.forEach(i=>{i.careerId&&(t[i.careerId]=(t[i.careerId]??0)+1)}),t},[a]),n=[{header:"Title",key:"title",className:"font-semibold text-gray-900"},{header:"Type",key:"employmentType",render:t=>e.jsx(v,{status:t.employmentType})},{header:"Applications",key:"applications",align:"center",render:t=>e.jsx("span",{className:"font-bold text-wiria-blue-dark",children:d[t.id]??0})},{header:"Status",key:"status",render:t=>e.jsx(v,{status:t.status})},{header:"Actions",key:"actions",align:"right",render:t=>e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>r(t),className:"mr-4 text-sm font-bold text-wiria-blue-dark transition-colors hover:text-blue-800",children:"Edit"}),e.jsx("button",{onClick:()=>o(t.id),className:"text-sm font-bold text-red-500 transition-colors hover:text-red-700",children:"Delete"})]})}];return e.jsxs("div",{className:"overflow-hidden rounded-2xl border border-gray-100 bg-white shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-gray-100 bg-gray-50/50 p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Active Job Postings"}),e.jsx(N,{onClick:c,size:"sm",children:"+ Post New Job"})]}),e.jsx(D,{columns:n,data:l,rowKey:"id",emptyMessage:"No job postings found.",className:"rounded-none border-none shadow-none"})]})}),de=p.memo(function({opportunities:l,applications:a,onEdit:r,onDelete:o,onCreate:c}){const d=p.useMemo(()=>{const t={};return a.forEach(i=>{i.opportunityId&&(t[i.opportunityId]=(t[i.opportunityId]??0)+1)}),t},[a]),n=[{header:"Title",key:"title",className:"font-semibold text-gray-900"},{header:"Type",key:"type",render:t=>e.jsx(v,{status:t.type})},{header:"Category",key:"category",render:t=>e.jsx("span",{className:"text-sm text-gray-600",children:t.category})},{header:"Applications",key:"applications",align:"center",render:t=>e.jsx("span",{className:"font-bold text-wiria-blue-dark",children:d[t.id]??0})},{header:"Actions",key:"actions",align:"right",render:t=>e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>r(t),className:"mr-4 text-sm font-bold text-wiria-blue-dark transition-colors hover:text-blue-800",children:"Edit"}),e.jsx("button",{onClick:()=>o(t.id),className:"text-sm font-bold text-red-500 transition-colors hover:text-red-700",children:"Delete"})]})}];return e.jsxs("div",{className:"overflow-hidden rounded-2xl border border-gray-100 bg-white shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-gray-100 bg-gray-50/50 p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Active Opportunities"}),e.jsx(N,{onClick:c,size:"sm",children:"+ New Opportunity"})]}),e.jsx(D,{columns:n,data:l,rowKey:"id",emptyMessage:"No opportunities found.",className:"rounded-none border-none shadow-none"})]})}),ce=z({status:K(["PENDING","UNDER_REVIEW","SHORTLISTED","INTERVIEWED","ACCEPTED","REJECTED"]),notes:W().optional()}),me=[{value:"PENDING",label:"Pending"},{value:"UNDER_REVIEW",label:"Under Review"},{value:"SHORTLISTED",label:"Shortlisted"},{value:"INTERVIEWED",label:"Interviewed"},{value:"ACCEPTED",label:"Accepted"},{value:"REJECTED",label:"Rejected"}],P=s=>s?s.startsWith("http")?s:`${"http://localhost:5001/api".replace("/api","")}${s}`:"#";function ue({application:s,onClose:l,onSuccess:a}){var o,c;const r=async d=>{try{await ne(s.id,d.status,d.notes??""),b.success("Application status updated"),a()}catch{b.error("Failed to update status")}};return e.jsx(_,{isOpen:!0,onClose:l,title:"Application Review",size:"2xl",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 border-b border-gray-50 pb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold uppercase text-gray-400",children:"Applicant"}),e.jsxs("p",{className:"text-lg font-semibold text-wiria-blue-dark",children:[s.firstName," ",s.lastName]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold uppercase text-gray-400",children:"Current Status"}),e.jsx("div",{className:"mt-1",children:e.jsx(v,{status:s.status})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold uppercase text-gray-400",children:"Email"}),e.jsx("p",{className:"text-sm font-medium",children:s.email})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold uppercase text-gray-400",children:"Phone"}),e.jsx("p",{className:"text-sm font-medium",children:s.phone})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold uppercase text-gray-400",children:"Applied For"}),e.jsx("p",{className:"text-sm font-semibold text-wiria-blue-dark",children:((o=s.career)==null?void 0:o.title)??((c=s.opportunity)==null?void 0:c.title)??"Unknown Position"})]}),e.jsxs("div",{className:"max-h-60 overflow-y-auto rounded-xl border border-gray-100 bg-gray-50/50 p-4",children:[e.jsx("p",{className:"mb-2 text-xs font-bold uppercase text-gray-400",children:"Cover Letter / Statement"}),e.jsx("p",{className:"whitespace-pre-wrap text-sm text-gray-700",children:s.coverLetter??"No cover letter provided."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"rounded-xl border border-blue-100 bg-blue-50/50 p-4",children:[e.jsx("p",{className:"mb-2 text-xs font-bold uppercase text-blue-600",children:"Resume / CV"}),s.resumeUrl?e.jsxs("a",{href:P(s.resumeUrl),target:"_blank",rel:"noreferrer",className:"inline-flex items-center text-sm font-bold text-wiria-blue-dark hover:underline",children:[e.jsx("span",{className:"mr-2 text-base",children:"ðŸ“„"})," View CV"]}):e.jsx("p",{className:"text-sm italic text-gray-400",children:"No CV provided"})]}),e.jsxs("div",{className:"rounded-xl border border-green-100 bg-green-50/50 p-4",children:[e.jsx("p",{className:"mb-2 text-xs font-bold uppercase text-green-600",children:"Additional Documents"}),s.additionalDocs&&s.additionalDocs.length>0?e.jsx("div",{className:"space-y-1",children:s.additionalDocs.map((d,n)=>e.jsxs("a",{href:P(d),target:"_blank",rel:"noreferrer",className:"block text-sm font-semibold text-wiria-blue-dark hover:underline",children:["ðŸ”— Document ",n+1]},n))}):e.jsx("p",{className:"text-sm italic text-gray-400",children:"None"})]})]}),e.jsx(J,{schema:ce,defaultValues:{status:s.status,notes:s.notes??""},onSubmit:r,className:"border-t border-gray-100 pt-6",children:({formState:{isSubmitting:d}})=>e.jsxs("div",{className:"space-y-4",children:[e.jsx(B,{name:"notes",label:"Reviewer Notes",placeholder:"Add private notes about this applicant...",rows:3,disabled:d}),e.jsxs("div",{className:"flex items-end gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx(Y,{name:"status",label:"Application Status",options:me,disabled:d})}),e.jsx(N,{type:"submit",disabled:d,className:"h-[42px] px-8",children:d?"Updating...":"Update Review"})]})]})})]})})}function A(s,l,a){s(r=>{const o=[...r];return o[l]=a,o})}function pe({career:s,responsibilities:l,setResponsibilities:a,requirements:r,setRequirements:o,desirable:c,setDesirable:d}){return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-bold text-gray-700",htmlFor:"career-title",children:"Job Title *"}),e.jsx("input",{id:"career-title",name:"title",defaultValue:s==null?void 0:s.title,className:"w-full rounded-xl border-gray-200 p-3 transition-all focus:ring-2 focus:ring-wiria-blue-dark",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-bold text-gray-700",htmlFor:"career-employmentType",children:"Employment Type *"}),e.jsxs("select",{id:"career-employmentType",name:"employmentType",defaultValue:s==null?void 0:s.employmentType,className:"w-full rounded-xl border-gray-200 p-3",required:!0,children:[e.jsx("option",{value:"FULL_TIME",children:"Full Time"}),e.jsx("option",{value:"PART_TIME",children:"Part Time"}),e.jsx("option",{value:"CONTRACT",children:"Contract"}),e.jsx("option",{value:"CONSULTANCY",children:"Consultancy"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-bold text-gray-700",htmlFor:"career-location",children:"Location *"}),e.jsx("input",{id:"career-location",name:"location",defaultValue:s==null?void 0:s.location,className:"w-full rounded-xl border-gray-200 p-3",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-bold text-gray-700",htmlFor:"career-deadline",children:"Deadline *"}),e.jsx("input",{id:"career-deadline",type:"datetime-local",name:"deadline",defaultValue:s!=null&&s.deadline?new Date(s.deadline).toISOString().slice(0,16):"",className:"w-full rounded-xl border-gray-200 p-3",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-bold text-gray-700",htmlFor:"career-salary",children:"Salary Range"}),e.jsx("input",{id:"career-salary",name:"salary",defaultValue:s==null?void 0:s.salary,className:"w-full rounded-xl border-gray-200 p-3",placeholder:"e.g. KES 50k-80k"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-bold text-gray-700",htmlFor:"career-summary",children:"Summary (Short) *"}),e.jsx("textarea",{id:"career-summary",name:"summary",defaultValue:s==null?void 0:s.summary,className:"h-20 w-full resize-none rounded-xl border-gray-200 p-3",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-bold text-gray-700",htmlFor:"career-description",children:"Full Description *"}),e.jsx("textarea",{id:"career-description",name:"description",defaultValue:s==null?void 0:s.description,className:"h-32 w-full rounded-xl border-gray-200 p-3",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-8 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-sm font-bold text-gray-700",children:"Responsibilities *"}),l.map((n,t)=>e.jsx("input",{"aria-label":`Responsibility ${t+1}`,value:n,onChange:i=>A(a,t,i.target.value),className:"mb-2 w-full rounded-xl border-gray-200 p-3"},t))]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-sm font-bold text-gray-700",children:"Requirements *"}),r.map((n,t)=>e.jsx("input",{"aria-label":`Requirement ${t+1}`,value:n,onChange:i=>A(o,t,i.target.value),className:"mb-2 w-full rounded-xl border-gray-200 p-3"},t))]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-sm font-bold text-gray-700",children:"Desirable Skills (Optional)"}),c.map((n,t)=>e.jsx("input",{"aria-label":`Desirable skill ${t+1}`,value:n,onChange:i=>A(d,t,i.target.value),className:"mb-2 w-full rounded-xl border-gray-200 p-3"},t))]})]})}function xe({career:s,onClose:l,onSuccess:a}){const[r,o]=p.useState((s==null?void 0:s.responsibilities)??["","",""]),[c,d]=p.useState((s==null?void 0:s.requirements)??["","",""]),[n,t]=p.useState((s==null?void 0:s.desirable)??[]),[i,g]=p.useState(!1),f=async x=>{x.preventDefault(),g(!0);const E=new FormData(x.currentTarget),h=Object.fromEntries(E.entries()),j={title:h.title,employmentType:h.employmentType,location:h.location,deadline:new Date(h.deadline).toISOString(),salary:h.salary||void 0,summary:h.summary,description:h.description,responsibilities:r.filter(m=>m.trim()),requirements:c.filter(m=>m.trim()),desirable:n.filter(m=>m.trim())};try{await(s?Z(s.id,j):X(j)),b.success(s?"Updated":"Created"),a()}catch(m){const O=m instanceof Error?m.message:"Error";b.error(O)}finally{g(!1)}};return e.jsx(_,{isOpen:!0,onClose:l,title:s?"Edit Job Posting":"Post New Job",size:"3xl",children:e.jsxs("form",{onSubmit:x=>void f(x),className:"space-y-8",children:[e.jsx(pe,{career:s,responsibilities:r,setResponsibilities:o,requirements:c,setRequirements:d,desirable:n,setDesirable:t}),e.jsxs("div",{className:"flex justify-end gap-4 border-t pt-8",children:[e.jsx(N,{type:"button",variant:"secondary",onClick:l,disabled:i,children:"Cancel"}),e.jsx(N,{type:"submit",disabled:i,children:i?"Saving...":"Save Job Posting"})]})]})})}function C(s,l,a){s(r=>{const o=[...r];return o[l]=a,o})}function he({opportunity:s,responsibilities:l,setResponsibilities:a,requirements:r,setRequirements:o,benefits:c,setBenefits:d}){return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-bold text-gray-700",htmlFor:"opportunity-title",children:"Title *"}),e.jsx("input",{id:"opportunity-title",name:"title",defaultValue:s==null?void 0:s.title,className:"w-full rounded-xl border-gray-200 p-3",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-bold text-gray-700",htmlFor:"opportunity-type",children:"Type *"}),e.jsxs("select",{id:"opportunity-type",name:"type",defaultValue:s==null?void 0:s.type,className:"w-full rounded-xl border-gray-200 p-3",required:!0,children:[e.jsx("option",{value:"INTERNSHIP",children:"Internship"}),e.jsx("option",{value:"VOLUNTEER",children:"Volunteer"}),e.jsx("option",{value:"FELLOWSHIP",children:"Fellowship"}),e.jsx("option",{value:"ATTACHMENT",children:"Industrial Attachment"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-bold text-gray-700",htmlFor:"opportunity-category",children:"Category *"}),e.jsx("input",{id:"opportunity-category",name:"category",defaultValue:s==null?void 0:s.category,className:"w-full rounded-xl border-gray-200 p-3",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-bold text-gray-700",htmlFor:"opportunity-location",children:"Location *"}),e.jsx("input",{id:"opportunity-location",name:"location",defaultValue:s==null?void 0:s.location,className:"w-full rounded-xl border-gray-200 p-3",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-8 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-sm font-bold text-gray-700",children:"Responsibilities (One per line) *"}),l.map((n,t)=>e.jsx("input",{"aria-label":`Opportunity responsibility ${t+1}`,value:n,onChange:i=>C(a,t,i.target.value),className:"mb-2 w-full rounded-xl border-gray-200 p-3"},t))]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-sm font-bold text-gray-700",children:"Requirements (One per line) *"}),r.map((n,t)=>e.jsx("input",{"aria-label":`Opportunity requirement ${t+1}`,value:n,onChange:i=>C(o,t,i.target.value),className:"mb-2 w-full rounded-xl border-gray-200 p-3"},t))]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-sm font-bold text-gray-700",children:"Benefits (One per line)"}),c.map((n,t)=>e.jsx("input",{"aria-label":`Benefit ${t+1}`,value:n,onChange:i=>C(d,t,i.target.value),className:"mb-2 w-full rounded-xl border-gray-200 p-3"},t))]})]})}function be({opportunity:s,onClose:l,onSuccess:a}){const[r,o]=p.useState((s==null?void 0:s.responsibilities)??["","",""]),[c,d]=p.useState((s==null?void 0:s.requirements)??["","",""]),[n,t]=p.useState((s==null?void 0:s.benefits)??[]),[i,g]=p.useState(!1),f=async x=>{x.preventDefault(),g(!0);const E=new FormData(x.currentTarget),j={...Object.fromEntries(E.entries()),responsibilities:r.filter(m=>m.trim()),requirements:c.filter(m=>m.trim()),benefits:n.filter(m=>m.trim())};try{await(s?ae(s.id,j):te(j)),b.success("Success"),a()}catch{b.error("Error")}finally{g(!1)}};return e.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/60 p-4 backdrop-blur-sm",children:e.jsxs("div",{className:"animate-in zoom-in-95 flex max-h-[90vh] w-full max-w-5xl flex-col overflow-hidden rounded-3xl bg-white shadow-2xl duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between border-b p-8",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:s?"Edit Opportunity":"New Opportunity"}),e.jsx("button",{onClick:l,className:"text-4xl leading-none text-gray-400 hover:text-gray-600",children:"Ã—"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto bg-gray-50/30 p-8",children:e.jsxs("form",{onSubmit:x=>void f(x),className:"space-y-8",children:[e.jsx(he,{opportunity:s,responsibilities:r,setResponsibilities:o,requirements:c,setRequirements:d,benefits:n,setBenefits:t}),e.jsxs("div",{className:"flex justify-end gap-4 border-t pt-8",children:[e.jsx(N,{type:"button",variant:"secondary",onClick:l,disabled:i,children:"Cancel"}),e.jsx(N,{type:"submit",disabled:i,children:i?"Saving...":"Publish Opportunity"})]})]})})]})})}function ye({showCareerModal:s,selectedCareer:l,onCloseCareerModal:a,showOpportunityModal:r,selectedOpportunity:o,onCloseOpportunityModal:c,showApplicationModal:d,selectedApplication:n,onCloseApplicationModal:t}){return e.jsxs(e.Fragment,{children:[s&&e.jsx(xe,{career:l,onClose:a,onSuccess:a}),r&&e.jsx(be,{opportunity:o,onClose:c,onSuccess:c}),d&&n&&e.jsx(ue,{application:n,onClose:t,onSuccess:t})]})}function ge({activeTab:s,setActiveTab:l}){return e.jsx("div",{className:"flex gap-1 rounded-xl border border-gray-100 bg-white p-1 shadow-sm",children:["CAREERS","OPPORTUNITIES","APPLICATIONS"].map(a=>e.jsx("button",{onClick:()=>l(a),className:`rounded-lg px-6 py-2 text-sm font-bold transition-all ${s===a?"bg-wiria-blue-dark text-white shadow-md":"text-gray-500 hover:bg-gray-50 hover:text-wiria-blue-dark"}`,children:a.charAt(0)+a.slice(1).toLowerCase()},a))})}function fe(s,l){switch(l.type){case"SET_TAB":return{...s,activeTab:l.tab};case"OPEN_CAREER_MODAL":return{...s,selectedCareer:l.career,showCareerModal:!0};case"OPEN_OPPORTUNITY_MODAL":return{...s,selectedOpportunity:l.opportunity,showOpportunityModal:!0};case"OPEN_APPLICATION_MODAL":return{...s,selectedApplication:l.application,showApplicationModal:!0};case"CLOSE_CAREER_MODAL":return{...s,selectedCareer:null,showCareerModal:!1};case"CLOSE_OPPORTUNITY_MODAL":return{...s,selectedOpportunity:null,showOpportunityModal:!1};case"CLOSE_APPLICATION_MODAL":return{...s,selectedApplication:null,showApplicationModal:!1};case"SET_CAREER_ID_TO_DELETE":return{...s,careerIdToDelete:l.id};case"SET_OPPORTUNITY_ID_TO_DELETE":return{...s,opportunityIdToDelete:l.id};default:return s}}function Ue(){const s=H(),[l,a]=p.useReducer(fe,{activeTab:"CAREERS",selectedCareer:null,selectedOpportunity:null,selectedApplication:null,showCareerModal:!1,showOpportunityModal:!1,showApplicationModal:!1,careerIdToDelete:null,opportunityIdToDelete:null}),{activeTab:r,selectedCareer:o,selectedOpportunity:c,selectedApplication:d,showCareerModal:n,showOpportunityModal:t,showApplicationModal:i,careerIdToDelete:g,opportunityIdToDelete:f}=l;p.useEffect(()=>{const S=new URLSearchParams(s.search).get("tab");if(!S)return;const T=S.toUpperCase();(T==="CAREERS"||T==="OPPORTUNITIES"||T==="APPLICATIONS")&&a({type:"SET_TAB",tab:T})},[s.search]);const{items:x,isLoading:E}=w(["careers"],Q,{enabled:r==="CAREERS"||r==="APPLICATIONS"}),{items:h,isLoading:j}=w(["opportunities"],se,{enabled:r==="OPPORTUNITIES"||r==="APPLICATIONS"}),{items:m,isLoading:O}=w(["applications"],le),L=I(u=>ee(u),[["careers"]],{onSuccess:()=>{b.success("Job posting deleted")},onError:()=>{b.error("Failed to delete job posting")}}),k=I(u=>re(u),[["opportunities"]],{onSuccess:()=>{b.success("Opportunity deleted")},onError:()=>{b.error("Failed to delete opportunity")}}),M=u=>{a({type:"SET_CAREER_ID_TO_DELETE",id:u})},F=u=>{a({type:"SET_OPPORTUNITY_ID_TO_DELETE",id:u})},U=()=>{g&&(L.mutate(g),a({type:"SET_CAREER_ID_TO_DELETE",id:null}))},q=()=>{f&&(k.mutate(f),a({type:"SET_OPPORTUNITY_ID_TO_DELETE",id:null}))},V=u=>{a({type:"OPEN_APPLICATION_MODAL",application:u})},$=E||j||O;return e.jsxs("div",{className:"space-y-8",children:[e.jsx(G,{title:"HR & Talent Management",description:"Manage job postings, volunteer opportunities, and applications",children:e.jsx(ge,{activeTab:r,setActiveTab:u=>{a({type:"SET_TAB",tab:u})}})}),e.jsx("main",{className:"min-h-[400px]",children:$?e.jsx("div",{className:"flex items-center justify-center p-20",children:e.jsx("div",{className:"h-12 w-12 animate-spin rounded-full border-b-2 border-wiria-blue-dark"})}):e.jsxs(e.Fragment,{children:[r==="CAREERS"&&e.jsx(oe,{careers:x,applications:m,onEdit:u=>{a({type:"OPEN_CAREER_MODAL",career:u})},onDelete:M,onCreate:()=>{a({type:"OPEN_CAREER_MODAL",career:null})}}),r==="OPPORTUNITIES"&&e.jsx(de,{opportunities:h,applications:m,onEdit:u=>{a({type:"OPEN_OPPORTUNITY_MODAL",opportunity:u})},onDelete:F,onCreate:()=>{a({type:"OPEN_OPPORTUNITY_MODAL",opportunity:null})}}),r==="APPLICATIONS"&&e.jsx(ie,{applications:m,onReview:V})]})}),e.jsx(ye,{showCareerModal:n,selectedCareer:o,onCloseCareerModal:()=>{a({type:"CLOSE_CAREER_MODAL"})},showOpportunityModal:t,selectedOpportunity:c,onCloseOpportunityModal:()=>{a({type:"CLOSE_OPPORTUNITY_MODAL"})},showApplicationModal:i,selectedApplication:d,onCloseApplicationModal:()=>{a({type:"CLOSE_APPLICATION_MODAL"})}}),e.jsx(R,{isOpen:g!==null,title:"Delete Job Posting",message:"Are you sure you want to delete this job posting? This action cannot be undone.",confirmLabel:"Delete",onConfirm:U,onCancel:()=>{a({type:"SET_CAREER_ID_TO_DELETE",id:null})}}),e.jsx(R,{isOpen:f!==null,title:"Delete Opportunity",message:"Are you sure you want to delete this opportunity? This action cannot be undone.",confirmLabel:"Delete",onConfirm:q,onCancel:()=>{a({type:"SET_OPPORTUNITY_ID_TO_DELETE",id:null})}})]})}export{Ue as default};
//# sourceMappingURL=HRManagementPage-BvXx2tTa.js.map
