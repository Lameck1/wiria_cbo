{"version":3,"file":"apiUtils-BfmRaJyO.js","sources":["../../src/shared/utils/apiUtils.ts"],"sourcesContent":["/**\n * API Response Utilities\n * Shared typed utilities for handling varying API response structures\n */\n\n/**\n * Extracts an array from varying API response structures.\n * Handles:\n * - Direct array response\n * - { data: T[] } wrapper\n * - { data: { data: T[] } } nested wrapper\n * - Named arrays like { items: T[] } or { members: T[] }\n * \n * @example\n * const items = extractArray<Item>(apiResponse);\n */\nexport function extractArray<T>(response: unknown, arrayKey?: string): T[] {\n    // Direct array\n    if (Array.isArray(response)) {\n        return response as T[];\n    }\n\n    // Handle object responses\n    if (response && typeof response === 'object') {\n        const obj = response as Record<string, unknown>;\n\n        // Check for specific key if provided (e.g., 'members', 'items')\n        if (arrayKey && Array.isArray(obj[arrayKey])) {\n            return obj[arrayKey] as T[];\n        }\n\n        // Standard { data: T[] } wrapper\n        if (Array.isArray(obj['data'])) {\n            return obj['data'] as T[];\n        }\n\n        // Nested { data: { data: T[] } } wrapper\n        if (obj['data'] && typeof obj['data'] === 'object') {\n            const nested = obj['data'] as Record<string, unknown>;\n            if (Array.isArray(nested['data'])) {\n                return nested['data'] as T[];\n            }\n            // Check for named arrays in nested data\n            if (arrayKey && Array.isArray(nested[arrayKey])) {\n                return nested[arrayKey] as T[];\n            }\n        }\n    }\n\n    return [];\n}\n\n/**\n * Extracts a single data object from API response.\n * Handles:\n * - Direct object response\n * - { data: T } wrapper\n * \n * @example\n * const item = extractData<Item>(apiResponse);\n */\nexport function extractData<T>(response: unknown): T | null {\n    if (!response) {\n        return null;\n    }\n\n    if (typeof response === 'object') {\n        const obj = response as Record<string, unknown>;\n\n        // If response has 'data' property, use it\n        if ('data' in obj && obj['data'] !== undefined) {\n            return obj['data'] as T;\n        }\n\n        // Otherwise return the response itself\n        return response as T;\n    }\n\n    return null;\n}\n\n/**\n * Type-safe error message extractor\n * Handles unknown catch block errors\n * \n * @example\n * catch (error: unknown) {\n *   const message = getErrorMessage(error);\n * }\n */\nexport function getErrorMessage(error: unknown, fallback = 'An error occurred'): string {\n    if (error instanceof Error) {\n        return error.message;\n    }\n    if (typeof error === 'string') {\n        return error;\n    }\n    if (error && typeof error === 'object' && 'message' in error) {\n        return String((error as { message: unknown }).message);\n    }\n    return fallback;\n}\n\n/**\n * Type guard to check if value is a non-null object\n */\nexport function isObject(value: unknown): value is Record<string, unknown> {\n    return value !== null && typeof value === 'object' && !Array.isArray(value);\n}\n"],"names":["extractArray","response","arrayKey","obj","nested","getErrorMessage","error","fallback"],"mappings":"AAgBO,SAASA,EAAgBC,EAAmBC,EAAwB,CAEvE,GAAI,MAAM,QAAQD,CAAQ,EACtB,OAAOA,EAIX,GAAIA,GAAY,OAAOA,GAAa,SAAU,CAC1C,MAAME,EAAMF,EAGZ,GAAIC,GAAY,MAAM,QAAQC,EAAID,CAAQ,CAAC,EACvC,OAAOC,EAAID,CAAQ,EAIvB,GAAI,MAAM,QAAQC,EAAI,IAAO,EACzB,OAAOA,EAAI,KAIf,GAAIA,EAAI,MAAW,OAAOA,EAAI,MAAY,SAAU,CAChD,MAAMC,EAASD,EAAI,KACnB,GAAI,MAAM,QAAQC,EAAO,IAAO,EAC5B,OAAOA,EAAO,KAGlB,GAAIF,GAAY,MAAM,QAAQE,EAAOF,CAAQ,CAAC,EAC1C,OAAOE,EAAOF,CAAQ,CAE9B,CACJ,CAEA,MAAO,CAAA,CACX,CAwCO,SAASG,EAAgBC,EAAgBC,EAAW,oBAA6B,CACpF,OAAID,aAAiB,MACVA,EAAM,QAEb,OAAOA,GAAU,SACVA,EAEPA,GAAS,OAAOA,GAAU,UAAY,YAAaA,EAC5C,OAAQA,EAA+B,OAAO,EAElDC,CACX"}