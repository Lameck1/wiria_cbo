import{j as s}from"./query-vendor-frBnvHSF.js";import{r as c}from"./react-vendor-BdaLayic.js";import{a as N,b as w,F as k,u as C,C as j}from"./types-BwqQ6cFe.js";import{u as p,P as h}from"./useMemberData-P6dvgI-k.js";import{p as P}from"./validation-Dk4xCuuu.js";import{B as m}from"./Button-K8iFFe9S.js";import{C as f,a as S}from"./Card-DmlQfAyP.js";import{F as l}from"./FormField-ys3L58kM.js";import{S as F}from"./Spinner-DvzCBoUM.js";import{n as g}from"./index-ICA0O2oL.js";import"./endpoints-Cofiu-EW.js";import"./validators-BLdh7FbM.js";import"./helpers-Brneqz2V.js";import"./Input-1n81zAKh.js";import"./animation-vendor-CrU7SSpu.js";function t({label:e,value:r}){return s.jsxs("div",{className:"rounded-xl border border-gray-100/50 bg-gray-50/50 p-4",children:[s.jsx("p",{className:"mb-1 text-xs font-bold uppercase tracking-wider text-gray-500",children:e}),s.jsx("p",{className:"text-lg font-semibold text-gray-800",children:Array.isArray(r)?r.join(", "):r??"--"})]})}function E({profile:e,onEdit:r}){return s.jsxs("div",{id:"profile-view",children:[s.jsxs("div",{className:"mb-8 flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-wiria-blue-dark",children:"Profile Information"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Your personal and contact details"})]}),s.jsx(m,{onClick:r,variant:"outline",children:"Edit Profile"})]}),s.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[s.jsx(t,{label:"Full Name",value:`${e==null?void 0:e.firstName} ${e==null?void 0:e.lastName}`}),s.jsx(t,{label:"Email Address",value:e==null?void 0:e.email}),s.jsx(t,{label:"Phone Number",value:e==null?void 0:e.phone}),s.jsx(t,{label:"National ID",value:e==null?void 0:e.nationalId}),s.jsx(t,{label:"Occupation",value:e==null?void 0:e.occupation}),s.jsx(t,{label:"Address",value:e==null?void 0:e.address}),s.jsx(t,{label:"County",value:e==null?void 0:e.county}),s.jsx(t,{label:"Sub-County",value:e==null?void 0:e.subcounty}),s.jsx(t,{label:"Ward",value:e==null?void 0:e.ward}),s.jsx("div",{className:"md:col-span-2",children:s.jsx(t,{label:"Interests",value:e==null?void 0:e.interests})}),s.jsx("div",{className:"md:col-span-2",children:s.jsx(t,{label:"Skills",value:e==null?void 0:e.skills})})]})]})}function A({isSaving:e,onSubmit:r,onCancel:d}){const{handleSubmit:o}=C();return s.jsxs("form",{onSubmit:a=>{o(r)(a)},className:"space-y-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h2",{className:"text-2xl font-bold text-wiria-blue-dark",children:"Edit Member Profile"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Keep your information up to date"})]}),s.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[s.jsx(l,{label:"First Name",name:"firstName",required:!0}),s.jsx(l,{label:"Last Name",name:"lastName",required:!0}),s.jsx(l,{label:"Phone",name:"phone",type:"tel",placeholder:"e.g. 0712345678"}),s.jsx(l,{label:"Occupation",name:"occupation"}),s.jsx("div",{className:"md:col-span-2",children:s.jsx(l,{label:"Address",name:"address"})}),s.jsx(l,{label:"County",name:"county"}),s.jsx(l,{label:"Sub-County",name:"subcounty"}),s.jsx(l,{label:"Ward",name:"ward"}),s.jsx("div",{className:"md:col-span-2",children:s.jsxs("div",{className:"space-y-1.5",children:[s.jsx("label",{htmlFor:"interests",className:"text-sm font-semibold text-wiria-blue-dark",children:"Interests"}),s.jsx(j,{name:"interests",render:({field:a})=>s.jsx("input",{...a,id:"interests",value:Array.isArray(a.value)?a.value.join(", "):"",onChange:n=>a.onChange(n.target.value.split(",").map(i=>i.trim())),className:"block w-full rounded-lg border border-gray-300 bg-white p-3 text-wiria-blue-dark outline-none transition-all focus:border-wiria-blue-dark focus:ring-1 focus:ring-wiria-blue-dark"})}),s.jsx("p",{className:"text-xs text-gray-400",children:"Comma separated list of interests"})]})}),s.jsx("div",{className:"md:col-span-2",children:s.jsxs("div",{className:"space-y-1.5",children:[s.jsx("label",{htmlFor:"skills",className:"text-sm font-semibold text-wiria-blue-dark",children:"Skills"}),s.jsx(j,{name:"skills",render:({field:a})=>s.jsx("input",{...a,id:"skills",value:Array.isArray(a.value)?a.value.join(", "):"",onChange:n=>a.onChange(n.target.value.split(",").map(i=>i.trim())),className:"block w-full rounded-lg border border-gray-300 bg-white p-3 text-wiria-blue-dark outline-none transition-all focus:border-wiria-blue-dark focus:ring-1 focus:ring-wiria-blue-dark"})}),s.jsx("p",{className:"text-xs text-gray-400",children:"Comma separated list of skills"})]})})]}),s.jsxs("div",{className:"flex gap-4 border-t pt-4",children:[s.jsx(m,{type:"submit",className:"h-12 flex-1",isLoading:e,children:"Save Changes"}),s.jsx(m,{type:"button",className:"h-12 flex-1",variant:"outline",onClick:d,disabled:e,children:"Cancel"})]})]})}function H(){const{profile:e,isLoading:r,fetchProfile:d,updateProfile:o}=p(),[a,n]=c.useState(!1),[i,u]=c.useState(!1),x=N({resolver:w(P)}),{reset:b}=x;c.useEffect(()=>{d()},[d]),c.useEffect(()=>{e&&b({firstName:e.firstName,lastName:e.lastName,phone:e.phone,occupation:e.occupation,address:e.address,county:e.county,subcounty:e.subcounty,ward:e.ward,interests:e.interests,skills:e.skills})},[e,b]);const v=async y=>{u(!0);try{await o(y),g.success("Profile updated successfully"),n(!1)}catch{g.error("Failed to update profile")}finally{u(!1)}};return r&&!e?s.jsx(h,{title:"Member Profile",children:s.jsx("div",{className:"flex items-center justify-center py-20",children:s.jsx(F,{size:"lg"})})}):s.jsx(h,{title:"Member Profile",subtitle:"View and manage your profile information",children:s.jsx("div",{className:"max-w-4xl",children:s.jsxs(f,{className:"overflow-hidden border-none shadow-xl",children:[s.jsx("div",{className:"h-2 w-full bg-gradient-to-r from-wiria-blue-dark via-wiria-yellow to-wiria-green-light"}),s.jsx(S,{className:"p-8",children:s.jsxs(k,{...x,children:[!a&&e&&s.jsx(E,{profile:e,onEdit:()=>n(!0)}),a&&s.jsx(A,{isSaving:i,onSubmit:v,onCancel:()=>n(!1)})]})})]})})})}export{H as default};
//# sourceMappingURL=MemberProfilePage-BvrEaVHe.js.map
