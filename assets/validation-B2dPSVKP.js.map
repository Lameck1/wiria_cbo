{"version":3,"file":"validation-B2dPSVKP.js","sources":["../../src/features/membership/validation.ts"],"sourcesContent":["/**\n * Registration Form Validation Schema\n */\n\nimport { z } from 'zod';\n\nexport const registrationSchema = z\n  .object({\n    membershipType: z.enum(['INDIVIDUAL', 'GROUP']),\n    groupName: z.string().optional(),\n    memberCount: z.number().min(1).optional(),\n    firstName: z.string().min(2, 'First name must be at least 2 characters'),\n    lastName: z.string().min(2, 'Last name must be at least 2 characters'),\n    dateOfBirth: z.string().optional(),\n    gender: z\n      .enum(['MALE', 'FEMALE', 'OTHER'], {\n        required_error: 'Please select your gender',\n      })\n      .optional(),\n    nationalId: z.string().max(20, 'National ID must be at most 20 characters').optional(),\n    email: z.string().email('Please enter a valid email address'),\n    phoneNumber: z\n      .string()\n      .regex(/^(\\+?254|0)[17]\\d{8}$/, 'Please enter a valid Kenyan phone number'),\n    county: z.string().min(1, 'County is required'),\n    subCounty: z.string().min(1, 'Sub-county is required'),\n    ward: z.string().min(1, 'Ward is required'),\n    village: z.string().min(1, 'Village is required'),\n    membershipFee: z.number().min(100, 'Minimum membership fee is KES 100'),\n    paymentMethod: z.enum(['STK_PUSH', 'MANUAL']),\n    agreedToTerms: z.boolean().refine((val) => val === true, {\n      message: 'You must agree to the terms and conditions',\n    }),\n    consentToDataProcessing: z.boolean().refine((val) => val === true, {\n      message: 'You must consent to data processing',\n    }),\n  })\n  .superRefine((data, ctx) => {\n    if (data.membershipType === 'GROUP') {\n      if (!data.groupName) {\n        ctx.addIssue({\n          code: z.ZodIssueCode.custom,\n          message: 'Group name is required for group membership',\n          path: ['groupName'],\n        });\n      }\n      if (!data.memberCount) {\n        ctx.addIssue({\n          code: z.ZodIssueCode.custom,\n          message: 'Member count is required for group membership',\n          path: ['memberCount'],\n        });\n      }\n    } else {\n      // Individual specific requirements\n      if (!data.dateOfBirth || data.dateOfBirth.length === 0) {\n        ctx.addIssue({\n          code: z.ZodIssueCode.custom,\n          message: 'Date of birth is required',\n          path: ['dateOfBirth'],\n        });\n      }\n      if (!data.gender) {\n        ctx.addIssue({\n          code: z.ZodIssueCode.custom,\n          message: 'Please select your gender',\n          path: ['gender'],\n        });\n      }\n      if (!data.nationalId || data.nationalId.length < 6) {\n        ctx.addIssue({\n          code: z.ZodIssueCode.custom,\n          message: 'National ID must be at least 6 characters',\n          path: ['nationalId'],\n        });\n      }\n    }\n  });\n\nexport const renewalSchema = z.object({\n  paymentMethod: z.enum(['STK_PUSH', 'MANUAL']),\n  phoneNumber: z\n    .string()\n    .regex(/^(\\+?254|0)[17]\\d{8}$/, 'Please enter a valid Kenyan phone number')\n    .optional(),\n  transactionCode: z.string().optional(),\n  memberCount: z.number().min(1).optional(),\n  agreedToDataProtection: z.boolean().refine((val) => val === true, {\n    message: 'You must consent to data protection',\n  }),\n  agreedToCodeOfEthics: z.boolean().refine((val) => val === true, {\n    message: 'You must agree to the code of ethics',\n  }),\n});\n\nexport const profileSchema = z.object({\n  firstName: z.string().min(2, 'First name must be at least 2 characters'),\n  lastName: z.string().min(2, 'Last name must be at least 2 characters'),\n  phone: z\n    .string()\n    .regex(/^(\\+?254|0)[17]\\d{8}$/, 'Please enter a valid Kenyan phone number'),\n  occupation: z.string().optional(),\n  address: z.string().optional(),\n  county: z.string().optional(),\n  subcounty: z.string().optional(),\n  ward: z.string().optional(),\n  interests: z.array(z.string()).optional(),\n  skills: z.array(z.string()).optional(),\n});\n\nexport type ProfileFormSchema = z.infer<typeof profileSchema>;\nexport type RenewalFormSchema = z.infer<typeof renewalSchema>;\nexport type RegistrationFormSchema = z.infer<typeof registrationSchema>;\n"],"names":["registrationSchema","z.object","z.enum","z.string","z.number","z.boolean","val","data","ctx","z.ZodIssueCode","renewalSchema","profileSchema","z.array"],"mappings":"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"}